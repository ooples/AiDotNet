{
  "comments": [
    {
      "id": "IC_kwDOKSXUF87PmVpk",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "<!-- This is an auto-generated comment: summarize by coderabbit.ai -->\n<!-- other_code_reviewer_warning_start -->\n\n> [!NOTE]\n> ## Other AI code review bot(s) detected\n> \n> CodeRabbit has detected other AI code review bot(s) in this pull request and will avoid duplicating their findings in the review comments. This may lead to a less comprehensive review.\n\n<!-- other_code_reviewer_warning_end -->\n\n<!-- walkthrough_start -->\n\n<!-- This is an auto-generated comment: release notes by coderabbit.ai -->\n\n## Summary by CodeRabbit\n\n## Release Notes\n\n* **New Features**\n  * Added 10+ document store backends (Elasticsearch, Pinecone, Azure Search, Milvus, Weaviate, and more)\n  * Added multiple retrieval strategies (Dense, BM25, TF-IDF, Hybrid, Multi-Query, ColBERT)\n  * Added advanced reranking options (MMR, Diversity, Reciprocal Rank Fusion, CrossEncoder)\n  * Added query expansion and processing capabilities\n  * Added semantic chunking and text splitting strategies\n  * Added context compression and evaluation metrics for RAG quality\n  * Added knowledge graph and NER support\n\n* **Refactor**\n  * Unified component architecture for consistency across RAG pipeline\n\n<!-- end of auto-generated comment: release notes by coderabbit.ai -->\n## Walkthrough\nConverted the RAG subsystem to use a generic numeric type parameter T, moved core interfaces to AiDotNet.Interfaces, added many generic concrete implementations (document stores, retrievers, rerankers, chunkers, embeddings, compressors, query processors, generators, metrics, graph/advanced patterns), and integrated RAG into PredictionModelBuilder/PredictionModelResult.\n\n## Changes\n\n| Cohort / File(s) | Summary |\n|---|---|\n| **Interfaces & Core API** <br> `src/Interfaces/*` <br> `\\`src/Interfaces/IDocumentStore.cs\\`, \\`src/Interfaces/IGenerator.cs\\`, \\`src/Interfaces/IQueryProcessor.cs\\`, \\`src/Interfaces/IRAGMetric.cs\\`, \\`src/Interfaces/IReranker.cs\\`, \\`src/Interfaces/IRetriever.cs\\`, \\`src/Interfaces/IContextCompressor.cs\\`, \\`src/Interfaces/IChunkingStrategy.cs\\`, \\`src/Interfaces/IEmbeddingModel.cs\\`, \\`src/Interfaces/IPredictionModelBuilder.cs\\`` | Namespace moved to `AiDotNet.Interfaces`; many interfaces made generic `<T>` and updated to use `Document<T>`/`GroundedAnswer<T>`; added `IContextCompressor<T>` and builder method `ConfigureRetrievalAugmentedGeneration`. |\n| **Core models** <br> `src/RetrievalAugmentedGeneration/Models/*` <br> `\\`.../Document.cs\\`, \\`.../GroundedAnswer.cs\\`, \\`.../VectorDocument.cs\\`` | Made models generic (`Document<T>`, `GroundedAnswer<T>`, `VectorDocument<T>`); RelevanceScore changed to `T` with `HasRelevanceScore`; added `Embedding` on Document. |\n| **Base classes & helpers** <br> `.../*Base.cs` <br> `DocumentStoreBase.cs`, `RetrieverBase.cs`, `RerankerBase.cs`, `GeneratorBase.cs`, `ContextCompressorBase.cs`, `RAGMetricBase.cs`, `EmbeddingModelBase.cs` | Generalized base classes to `<T>`, added `NumOps` (`INumericOperations<T>`), updated abstract/core method signatures and numeric operations usage. |\n| **Document stores** <br> `src/RetrievalAugmentedGeneration/DocumentStores/*` | Added many generic stores `*DocumentStore<T>` (InMemory updates plus FAISS, Milvus, Weaviate, Pinecone, ChromaDB, Elasticsearch, AzureSearch, Qdrant, RedisVL, SQLiteVSS, PostgresVector, Hybrid, etc.) with Add/Get/Remove/Clear and GetSimilarCore/GetByIdCore/GetAllCore implementations. |\n| **Retrievers & advanced patterns** <br> `src/RetrievalAugmentedGeneration/Retrievers/*`, `AdvancedPatterns/*` | Added generic retrievers (Dense, BM25, TFIDF, Hybrid, MultiQuery, MultiVector, ParentDocument, Graph, ColBERT, BM25, etc.) and advanced patterns (ChainOfThoughtRetriever, FLARERetriever, GraphRAG, SelfCorrectingRetriever, etc.). |\n| **Rerankers** <br> `src/RetrievalAugmentedGeneration/Rerankers/*` | Added many generic rerankers (CrossEncoder, Diversity, MMR, Identity, ReciprocalRankFusion, Cohere, LLMBased, LostInTheMiddle, etc.) and updated reranker base to `RerankerBase<T>`. |\n| **Chunking strategies** <br> `src/RetrievalAugmentedGeneration/ChunkingStrategies/*` | Added multiple chunkers (RecursiveCharacterTextSplitter, SemanticChunkingStrategy, SlidingWindowChunkingStrategy, MarkdownTextSplitter, CodeAwareTextSplitter, HeaderBasedTextSplitter, TableAwareTextSplitter, MultiModalTextSplitter, AgenticChunker, SentenceChunkingStrategy, etc.). |\n| **Embeddings** <br> `src/RetrievalAugmentedGeneration/Embeddings/*` | Added generic embedding models (OpenAIEmbeddingModel<T>, HuggingFaceEmbeddingModel<T>, ONNXSentenceTransformer<T>, CohereEmbeddingModel<T>, GooglePalmEmbeddingModel<T>, LocalTransformerEmbedding<T>, MultiModalEmbeddingModel<T>, VoyageAIEmbeddingModel<T>, Cohere/Google/Voyage/VoyageAI etc.) with deterministic fallbacks. |\n| **Query expansion & processors** <br> `src/RetrievalAugmentedGeneration/QueryExpansion/*`, `.../QueryProcessors/*` | Added QueryExpansionBase and expansions (HyDE, LLMQueryExpansion, MultiQueryExpansion, SubQueryExpansion, LearnedSparseEncoderExpansion) and many query processors (Identity, KeywordExtraction, Lemmatization, QueryExpansionProcessor, QueryRewritingProcessor, SpellCheck, StopWordRemoval, etc.). |\n| **Context compression & generators** <br> `src/RetrievalAugmentedGeneration/ContextCompression/*`, `src/RetrievalAugmentedGeneration/Generators/*` | Added `ContextCompressorBase<T>` and compressors (AutoCompressor, SelectiveContextCompressor, LLMContextCompressor, DocumentSummarizer), plus generator base/implementations (`GeneratorBase<T>`, `StubGenerator<T>`, `NeuralGenerator<T>`). |\n| **Evaluation** <br> `src/RetrievalAugmentedGeneration/Evaluation/*` | Converted metrics and evaluator to generics (`RAGMetricBase<T>`, `RAGEvaluator<T>`) and added metrics (Faithfulness, ContextCoverage, AnswerSimilarity, AnswerCorrectness, ContextRelevance, NoiseRobustness) using `NumOps`. |\n| **Configuration & integration** <br> `src/RetrievalAugmentedGeneration/Configuration/*`, `src/PredictionModelBuilder.cs`, `src/Models/Results/PredictionModelResult.cs` | Added RAG configuration classes and builder (`RAGConfiguration<T>`, `RAGConfigurationBuilder<T>`); integrated RAG components into PredictionModelBuilder and PredictionModelResult (RagRetriever/RagReranker/RagGenerator/QueryProcessors plus GenerateAnswer/RetrieveDocuments). |\n| **Project & docs** <br> `src/AiDotNet.csproj`, `.github/PROJECT_RULES.md` | Added package references (Azure.Search.Documents, Elastic.Clients.Elasticsearch, Pinecone.Client, StackExchange.Redis, conditional Npgsql for net8.0) and new project rules documentation. |\n\n## Sequence Diagram(s)\n\n```mermaid\n%%{init: {\"themeVariables\":{\"actorBkg\":\"#F6FFFA\",\"actorBorder\":\"#BEEFCF\",\"noteBkg\":\"#FFF8F0\",\"noteBorder\":\"#FFD8A6\"}}}%%\nsequenceDiagram\n    participant User\n    participant PM as PredictionModelResult<T>\n    participant QP as QueryProcessors\n    participant RET as IRetriever<T>\n    participant DS as IDocumentStore<T>\n    participant RR as IReranker<T>\n    participant GEN as IGenerator<T>\n\n    User->>PM: GenerateAnswer(query)\n    alt QueryProcessors configured\n        PM->>QP: ProcessQuery(query)\n        QP-->>PM: processedQuery\n    end\n    PM->>RET: Retrieve(processedQuery, topK)\n    RET->>DS: GetSimilar / GetAll / filters\n    DS-->>RET: documents (Document<T>[])\n    RET-->>PM: documents\n    alt Reranker configured\n        PM->>RR: Rerank(processedQuery, documents)\n        RR-->>PM: rerankedDocuments\n    end\n    PM->>GEN: GenerateGrounded(processedQuery, contextDocuments)\n    GEN-->>PM: GroundedAnswer<T>\n    PM-->>User: GroundedAnswer<T>\n```\n\n## Estimated code review effort\n\n≡ƒÄ» 5 (Critical) | ΓÅ▒∩╕Å ~120+ minutes\n\n- Areas needing extra attention:\n  - Consistency and correctness of INumericOperations<T> (NumOps) usage across metrics, rerankers, retrievers, and stores.\n  - Public API breaking changes (namespace moves to AiDotNet.Interfaces and pervasive genericization).\n  - Document store lifecycle (vector dimension handling), embedding conversions, metadata-filter correctness, network/HTTP call error handling.\n  - Score aggregation, normalization, deduplication, and HasRelevanceScore propagation across components.\n  - PredictionModelBuilder / PredictionModelResult wiring: deep-copy, serialization, and nullability of new RAG fields.\n\n## Possibly related PRs\n\n- ooples/AiDotNet#301 ΓÇö Large RAG refactor and generics migration; directly overlaps interface and model signature changes present here.  \n- ooples/AiDotNet#302 ΓÇö Removal of restrictive generic constraints; closely related to this PR's generic conversions.  \n- ooples/AiDotNet#254 ΓÇö Changes to PredictionModelBuilder/PredictionModelResult; related to integrating RAG components into the builder/result API.\n\n## Poem\n\n> ≡ƒÉ░ I hopped through vectors, scores, and queues,  \n> > I made Documents generic with shiny new views,  \n> > I split text, ranked docs, and compressed with delight ΓÇö  \n> > Retrievers and rerankers now dance in the night,  \n> > A rabbit cheers: the RAG worldΓÇÖs more bright!\n\n<!-- walkthrough_end -->\n\n\n<!-- pre_merge_checks_walkthrough_start -->\n\n## Pre-merge checks and finishing touches\n<details>\n<summary>Γ¥î Failed checks (1 warning)</summary>\n\n|         Check name         | Status     | Explanation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Resolution                                                                                                                                                                                                                                                                                                                                                   |\n| :------------------------: | :--------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Out of Scope Changes check | ΓÜá∩╕Å Warning | The PR introduces numerous out-of-scope changes beyond the core implementations: additional chunking strategies (AgenticChunker, TableAwareTextSplitter, HeaderBasedTextSplitter, MultiModalTextSplitter, RecursiveCharacterChunkingStrategy, SentenceChunkingStrategy), context compression variants (AutoCompressor, SelectiveContextCompressor), advanced retrieval patterns (ChainOfThoughtRetriever, FLARERetriever, GraphRAG, SelfCorrectingRetriever), multiple rerankers not specified (DiversityReranker, MaximalMarginalRelevanceReranker, CohereReranker, LostInTheMiddleReranker), embedding models (CohereEmbeddingModel, GooglePalmEmbeddingModel, MultiModalEmbeddingModel, SentenceTransformersFineTuner, VoyageAIEmbeddingModel), retrieval variants (BM25Retriever, ColBERTRetriever, GraphRetriever, MultiVectorRetriever, ParentDocumentRetriever), additional document stores (AzureSearchDocumentStore, ChromaDBDocumentStore, ElasticsearchDocumentStore, RedisVLDocumentStore, SQLiteVSSDocumentStore), query processors, graph structures, NER, and metrics beyond those required in issue #303. | Consider splitting this PR into focused deliverables: (1) Core implementations from issue #303 only; (2) Advanced patterns (FLARE, GraphRAG, ChainOfThought) as separate PR; (3) Additional storage backends as separate PR; (4) Auxiliary utilities (NER, query processors) as separate PR. This improves reviewability, testability, and change isolation. |\n\n</details>\n<details>\n<summary>Γ£à Passed checks (3 passed)</summary>\n\n|      Check name     | Status   | Explanation                                                                                                                                                                                                                                                                                                                                                                                   |\n| :-----------------: | :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n|     Title check     | Γ£à Passed | The PR title 'Feature: Complete RAG Framework Concrete Implementations (#303)' clearly and concisely describes the main objectiveΓÇöimplementing comprehensive concrete classes for the RAG framework as outlined in issue #303.                                                                                                                                                                |\n|  Description check  | Γ£à Passed | The PR description is detailed and comprehensive, explaining the overall objective, listing all completed implementations across multiple categories, and detailing architecture improvements and technical standards followed.                                                                                                                                                               |\n| Linked Issues check | Γ£à Passed | The PR fully addresses the requirements specified in linked issue #303. All 28 concrete implementations across 8 categories (Document Stores, Chunking Strategies, Embedding Models, Retrieval Strategies, Reranking Strategies, Query Expansion, Context Compression, and Configuration) are completed with proper architecture (generics, base classes, null checks, XML docs) as mandated. |\n\n</details>\n\n<!-- pre_merge_checks_walkthrough_end -->\n\n<!-- finishing_touch_checkbox_start -->\n\n<details>\n<summary>Γ£¿ Finishing touches</summary>\n\n- [ ] <!-- {\"checkboxId\": \"7962f53c-55bc-4827-bfbf-6a18da830691\"} --> ≡ƒô¥ Generate docstrings\n<details>\n<summary>≡ƒº¬ Generate unit tests (beta)</summary>\n\n- [ ] <!-- {\"checkboxId\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\", \"radioGroupId\": \"utg-output-choice-group-unknown_comment_id\"} -->   Create PR with unit tests\n- [ ] <!-- {\"checkboxId\": \"07f1e7d6-8a8e-4e23-9900-8731c2c87f58\", \"radioGroupId\": \"utg-output-choice-group-unknown_comment_id\"} -->   Post copyable unit tests in a comment\n- [ ] <!-- {\"checkboxId\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\", \"radioGroupId\": \"utg-output-choice-group-unknown_comment_id\"} -->   Commit unit tests in branch `feature/rag-concrete-implementations`\n\n</details>\n\n</details>\n\n<!-- finishing_touch_checkbox_end -->\n\n<!-- tips_start -->\n\n---\n\n\n\n<sub>Comment `@coderabbitai help` to get the list of available commands and usage tips.</sub>\n\n<!-- tips_end -->\n\n<!-- internal state start -->\n\n\n<!-- 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gdY6GBL1UJGkJVn+A1a41l74Dsgi3ALlhFRleoHWIXZt0gywEIg6vifTubQogCn3PNVStXIkp+mecLgiJo1YjVcNQ3IPDUngCk1D9WCNQ2YXZl9FWMVHDXiNdF5kjVU4FcVZjXbQEfBSrDyNaB2d9X8Nco1pTUNyEhIJqDFwDpunrZZNa+I2jWIAL/VojUANS5xLcIVNcA1JjV2AHuFELhwwOxMovGELqxI27jbxeGFgoD6IJ5IZiDegKCV6OVM1bYhwvCGnt+gDGU0HNom/GkVIJnEaARzlTGIRfgpgYAchfrueqKoFvjfQhc13VXyABaEjUy9aFkEQI6Sjv5YAdA0Sh41FomK9JRYBcgjoGE1VZ7o1fg0OsWGgDvZ3Rr89LcA7cJQzrcgLjBsNT01nDXCQNw16KaZNTC1AjXaXrk1wjWtFfo1EjVP1Q01r4jPFTyV0gD/GR6AewCVNYLYojW1NZ/V9TVsAFcVO1CIULvE6uAIMIRQGjVItZ01aLX9Ffo1hjUDNa+IIDV2AOcFCPRlwCXGF9TLGqG+0TmrpVpMIIVINZfGzKXF0DWYSnzXgI4KbfJgsM6JhQrcSj6o5UAYhkQGYsj7keIAPoYatcQmNyiIJk/oIEBnJk/ob85wRnxkufbicSVKoqT5QOgqm8ikIUxx/hr/OazVA4Yhmu2aI5oKeg7ajHryuoa1lHrZ+kKALZrL4CbZe8LJIhZI11j40R/CXCI0pXHsTGLfIvhirGJDOVkZtUCSWWxZ0llaggnIpxErHNloshnGofUC6+HZtaNR41GKYYa1CXHlcVlxkbGA3CDxIfHGoQnIoMmTptHujlUQoPbA+JbXloil1tYKemfWiyA70i12w4D+tdaBB3xgPrK1x06G+NDOAM5tLhXW+Wj/bi7uQ7VO/jb+vU4gQJ/+NAAFARXWCcgSuc+FiJIQSe3ueP5/qRdKacwitY3gy1bw1ZwulJVegBYg0LX6NcmA9sAxBVcV/WCb4LEo25W1HOKA3LV1nGK5+eQDoEUgOgRcAPjCbQDyFBHVqJHMNYiAMrCqYNSANQBYIuK6TrUNwAhaIcJu1vEAUZgutXuaUM55yGVhNgBAda0ATii6Lq/J8a5vslloCHVdAEB1RmGc4MkgyEChcCUSrED8aVu15cVmGvB1P0aIdSLJkoCRNXForzA8Ja8giiCMddAkHKxIAPbAtjjtNeE2cLXpNQi1QoBcdTk1Ech5NaMVf9WFNZi1v8AqNeI10ga0tbcoiDAEtafy7ADEtSKOSrCESKcVBA62AGo1RjUNyO1uFeUgYZ1l8+WWoJ8ADAAz5b4ViRWL5SLlCeV+ZUDlwIACZWgAt2UmZcQOgmVnZe8AkeU6ZQ9ltuVc5f/pjQB8NS2Z6nUEloiVVxWfAKFlbOWN5Qll0uXOgEFlM2VTAKxlDWU2Zf9ljQBQ5Z1lJGVE5allbBUpgPMSYBVU5fPlHGWzZRrlBWWNZaFl2JAijukVBRVJUsUV/PT2GHkVYOBAAA=== -->\n\n<!-- internal state end -->",
      "createdAt": "2025-11-03T22:54:27Z",
      "includesCreatedEdit": true,
      "isMinimized": false,
      "minimizedReason": "",
      "reactionGroups": [],
      "url": "https://github.com/ooples/AiDotNet/pull/304#issuecomment-3482933860",
      "viewerDidAuthor": false
    }
  ],
  "reviews": [
    {
      "id": "PRR_kwDOKSXUF87Lcmvp",
      "author": {
        "login": "copilot-pull-request-reviewer"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "## Pull Request Overview\n\nThis PR adds comprehensive generic type support to the RAG (Retrieval-Augmented Generation) system, transforming the codebase from using fixed numeric types to supporting parameterized types (e.g., `float`, `double`) throughout the entire pipeline. The changes enable flexible numeric precision while maintaining consistent mathematical operations via `INumericOperations<T>`.\n\nKey changes:\n- Generic type parameters added to core models (`Document<T>`, `GroundedAnswer<T>`, `VectorDocument<T>`)\n- All interfaces and base classes updated to support type parameters (`IRetriever<T>`, `IReranker<T>`, `IGenerator<T>`, etc.)\n- New retrieval strategies added (BM25, TF-IDF, Dense, Hybrid, MultiQuery)\n- New reranking implementations (MMR, Diversity, CrossEncoder)\n- RAG configuration system introduced\n- Multiple document store implementations added (FAISS, Pinecone, Milvus, Weaviate, PostgresVector)\n\n### Reviewed Changes\n\nCopilot reviewed 68 out of 70 changed files in this pull request and generated 53 comments.\n\n<details>\n<summary>Show a summary per file</summary>\n\n| File | Description |\r\n| ---- | ----------- |\r\n| Document.cs | Added generic type parameter with `INumericOperations<T>` field and `HasRelevanceScore` flag |\r\n| GroundedAnswer.cs | Updated to support generic document types |\r\n| VectorDocument.cs | Updated to use `Document<T>` |\r\n| RetrieverBase.cs | Added generic type parameter and `NumOps` helper |\r\n| RerankerBase.cs | Added generic type parameter and updated score normalization |\r\n| RagPipeline.cs | Updated all interfaces to use generic types |\r\n| InMemoryDocumentStore.cs | Updated to return `Document<T>` with proper score handling |\r\n| Multiple new retrievers | BM25, TF-IDF, Dense, Hybrid, MultiQuery implementations |\r\n| Multiple new rerankers | MMR, Diversity, CrossEncoder, Identity implementations |\r\n| Configuration classes | New RAG configuration system with builder pattern |\r\n| Embedding models | OpenAI, HuggingFace, ONNX, LocalTransformer implementations |\r\n| Document stores | FAISS, Pinecone, Milvus, Weaviate, PostgresVector, Hybrid implementations |\n</details>\n\n\n\n\n\n\n---\n\n≡ƒÆí <a href=\"/ooples/AiDotNet/new/master/.github/instructions?filename=*.instructions.md\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href=\"https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot\" class=\"Link--inTextBlock\" target=\"_blank\" rel=\"noopener noreferrer\">Learn how to get started</a>.",
      "submittedAt": "2025-11-03T23:02:15Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "COMMENTED",
      "commit": {
        "oid": "a7f60f0d884a1052b3400d2facec8358332db4b8"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LcoiJ",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 25**\n\n> [!CAUTION]\n> Some comments are outside the diff and canΓÇÖt be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>ΓÜá∩╕Å Outside diff range comments (1)</summary><blockquote>\n> \n> <details>\n> <summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (1)</summary><blockquote>\n> \n> `138-146`: **Sorting by generic scores breaks for non-comparable `T`**\n> \n> `OrderByDescending(x => x.Score)` relies on `Comparer<T>.Default`. For supported types such as `Complex<T>` (see the `MathHelper.GetNumericOperations<T>()` branch for `ComplexOperations<T>`), there is no natural ordering, so this throws at runtime. Please sort on a comparable projection (e.g., convert the similarity to `double` via `INumericOperations<T>`) while still storing the original `T` value on the document.\n> \n> \n> ```diff\n> -        var scoredDocuments = new List<(Document<T> Document, T Score)>();\n> +        var numericOps = MathHelper.GetNumericOperations<T>();\n> +        var scoredDocuments = new List<(Document<T> Document, T Score, double SortKey)>();\n> ...\n> -            var similarity = StatisticsHelper<T>.CosineSimilarity(queryVector, vectorDoc.Embedding);\n> -            scoredDocuments.Add((vectorDoc.Document, similarity));\n> +            var similarity = StatisticsHelper<T>.CosineSimilarity(queryVector, vectorDoc.Embedding);\n> +            var sortKey = numericOps.ConvertToDouble(similarity);\n> +            scoredDocuments.Add((vectorDoc.Document, similarity, sortKey));\n> ...\n> -        var results = scoredDocuments\n> -            .OrderByDescending(x => x.Score)\n> +        var results = scoredDocuments\n> +            .OrderByDescending(x => x.SortKey)\n>              .Take(topK)\n>              .Select(x =>\n>              {\n>                  x.Document.RelevanceScore = x.Score;\n>                  x.Document.HasRelevanceScore = true;\n>                  return x.Document;\n>              })\n> ```\n> \n> </blockquote></details>\n> \n> </blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (5)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IGenerator.cs (1)</summary><blockquote>\n\n`37-40`: **Trim leftover XML `<typeparam>` tags**\n\nThe interface now only exposes `T`, but the XML still documents `TInput`, `TOutput`, and `TMetadata`. Please drop the unused `<typeparam>` lines to keep the docs accurate.\n\n\n```diff\n /// <typeparam name=\"T\">The numeric data type used for relevance scoring.</typeparam>\n-/// <typeparam name=\"TInput\">The input data type for the model.</typeparam>\n-/// <typeparam name=\"TOutput\">The output data type for the model.</typeparam>\n-/// <typeparam name=\"TMetadata\">The metadata type for model information.</typeparam>\n public interface IGenerator<T>\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/ContextCompressionConfig.cs (1)</summary><blockquote>\n\n`20-23`: **Consider documenting valid range for CompressionRatio.**\n\nThe `CompressionRatio` should logically be bounded between 0.0 and 1.0, but there's no validation or documentation indicating this constraint. Consider adding a remark clarifying the expected range to guide consumers.\n\n\n\nExample:\n\n```diff\n /// <summary>\n /// Gets or sets the compression ratio.\n /// </summary>\n+/// <remarks>\n+/// Valid range is 0.0 to 1.0, where 0.5 means compress to 50% of original length.\n+/// </remarks>\n public double CompressionRatio { get; set; } = 0.5;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs (1)</summary><blockquote>\n\n`35-41`: **Treat whitespace-only queries as invalid**\n\n`string.IsNullOrEmpty` lets whitespace-only inputs through, which then produce meaningless ΓÇ£expansionsΓÇ¥. Guarding with `IsNullOrWhiteSpace` keeps the strategy from emitting junk requests.\n\n\n\nApply this diff:\n\n```diff\n-            if (string.IsNullOrEmpty(query)) throw new ArgumentNullException(nameof(query));\n+            if (string.IsNullOrWhiteSpace(query)) throw new ArgumentNullException(nameof(query));\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs (1)</summary><blockquote>\n\n`49-49`: **Give `NumericOperations` a safe default**\n\nLeaving this at `null!` means anyone who new-ups `RAGConfiguration<T>` without the builder trips a `NullReferenceException` the moment they access numeric ops. We already know the correct implementation, so we can wire it immediately.\n\n```diff\n-        public INumericOperations<T> NumericOperations { get; set; } = null!;\n+        public INumericOperations<T> NumericOperations { get; set; } = MathHelper.GetNumericOperations<T>();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LLMQueryExpansion.cs (1)</summary><blockquote>\n\n`21-26`: **Either wire the LLM endpoint/API key or remove them**\n\nWe accept `llmEndpoint` and `apiKey`, store them, and never touch them again, which makes the class look LLM-backed when it just returns canned phrases. Please integrate these fields into the expansion flow (or remove them) so the API surface matches the behavior.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 32bde0b941a822886f4b11213fdca63a54d879e9 and a7f60f0d884a1052b3400d2facec8358332db4b8.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (68)</summary>\n\n* `.github/AI_PROJECT_RULES.md` (1 hunks)\n* `src/Interfaces/IDocumentStore.cs` (3 hunks)\n* `src/Interfaces/IGenerator.cs` (2 hunks)\n* `src/Interfaces/IQueryProcessor.cs` (1 hunks)\n* `src/Interfaces/IRAGMetric.cs` (3 hunks)\n* `src/Interfaces/IReranker.cs` (4 hunks)\n* `src/Interfaces/IRetriever.cs` (5 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/SlidingWindowChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/ChunkingConfig.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/ContextCompressionConfig.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/DocumentStoreConfig.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/EmbeddingConfig.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/QueryExpansionConfig.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/RAGConfigurationBuilder.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/RerankingConfig.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/RetrievalConfig.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs` (8 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs` (5 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/PineconeDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/PostgresVectorDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs` (4 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs` (4 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs` (4 hunks)\n* `src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs.bak` (5 hunks)\n* `src/RetrievalAugmentedGeneration/Models/Document.cs` (4 hunks)\n* `src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs` (5 hunks)\n* `src/RetrievalAugmentedGeneration/Models/VectorDocument.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/LLMQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/IdentityQueryProcessor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RagPipeline.cs` (6 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/CrossEncoderReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/IdentityReranker.cs` (3 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs` (8 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/DenseRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs` (8 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs` (2 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (57)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (5)</summary>\n\n* `IEnumerable` (83-86)\n* `IEnumerable` (95-102)\n* `IEnumerable` (198-198)\n* `Document` (109-113)\n* `Document` (210-210)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IEmbeddingModel.cs (1)</summary>\n\n* `Vector` (70-70)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (7)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n* `IEnumerable` (57-60)\n* `IEnumerable` (68-71)\n* `IEnumerable` (80-89)\n* `IEnumerable` (110-110)\n* `IEnumerable` (178-181)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (6)</summary>\n\n* `AddCore` (35-45)\n* `AddBatchCore` (47-65)\n* `IEnumerable` (67-92)\n* `Document` (94-97)\n* `RemoveCore` (99-109)\n* `Clear` (111-117)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (31-43)\n* `List` (62-108)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (27-39)\n* `List` (41-87)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (1)</summary>\n\n* `List` (32-32)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IGenerator.cs (1)</summary>\n\n* `GroundedAnswer` (99-99)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (2)</summary>\n\n* `T` (82-95)\n* `IEnumerable` (37-80)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/DenseRetriever.cs (1)</summary>\n\n* `IEnumerable` (32-36)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/IdentityQueryProcessor.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (2)</summary>\n\n* `QueryProcessorBase` (26-56)\n* `ProcessQueryCore` (55-55)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `RAGMetricBase` (28-130)\n* `EvaluateCore` (73-73)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (35-46)\n* `List` (48-104)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (3)</summary>\n\n* `Document` (165-165)\n* `IEnumerable` (123-123)\n* `IEnumerable` (152-152)\n\n</details>\n<details>\n<summary>src/Interfaces/IRetriever.cs (3)</summary>\n\n* `IEnumerable` (61-61)\n* `IEnumerable` (85-85)\n* `IEnumerable` (110-110)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs (5)</summary>\n\n* `AddCore` (35-43)\n* `Document` (72-75)\n* `IEnumerable` (45-70)\n* `RemoveCore` (77-85)\n* `Clear` (87-91)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LLMQueryExpansion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs (1)</summary>\n\n* `List` (34-49)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs (1)</summary>\n\n* `List` (71-81)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/DenseRetriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (67-92)\n* `Document` (94-97)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (54-104)\n* `Document` (106-109)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SlidingWindowChunkingStrategy.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (35-46)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (31-43)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (27-39)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (1)</summary>\n\n* `IEnumerable` (39-68)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (3)</summary>\n\n* `RerankingStrategyBase` (12-33)\n* `RerankingStrategyBase` (20-23)\n* `List` (32-32)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IGenerator.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (3)</summary>\n\n* `IEnumerable` (123-123)\n* `IEnumerable` (152-152)\n* `Document` (165-165)\n\n</details>\n<details>\n<summary>src/Interfaces/IReranker.cs (2)</summary>\n\n* `IEnumerable` (61-61)\n* `IEnumerable` (87-87)\n\n</details>\n<details>\n<summary>src/Interfaces/IRetriever.cs (3)</summary>\n\n* `IEnumerable` (61-61)\n* `IEnumerable` (85-85)\n* `IEnumerable` (110-110)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (2)</summary>\n\n* `T` (190-219)\n* `IEnumerable` (104-182)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (26-193)\n* `IList` (153-192)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (35-46)\n* `List` (48-104)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (27-39)\n* `List` (41-87)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/IdentityQueryProcessor.cs (1)</summary>\n\n* `ProcessQueryCore` (34-37)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `RAGMetricBase` (28-130)\n* `EvaluateCore` (73-73)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (4)</summary>\n\n* `IEnumerable` (122-150)\n* `IEnumerable` (192-195)\n* `IEnumerable` (206-209)\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IRetriever.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (1)</summary>\n\n* `Document` (165-165)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (2)</summary>\n\n* `IEnumerable` (30-79)\n* `List` (81-89)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/DenseRetriever.cs (1)</summary>\n\n* `IEnumerable` (32-36)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (2)</summary>\n\n* `List` (36-73)\n* `List` (81-120)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LLMQueryExpansion.cs (1)</summary>\n\n* `List` (33-46)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs (9)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfigurationBuilder.cs (1)</summary>\n\n* `RAGConfiguration` (147-151)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/DocumentStoreConfig.cs (1)</summary>\n\n* `DocumentStoreConfig` (8-19)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/ChunkingConfig.cs (1)</summary>\n\n* `ChunkingConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/EmbeddingConfig.cs (1)</summary>\n\n* `EmbeddingConfig` (8-34)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RetrievalConfig.cs (1)</summary>\n\n* `RetrievalConfig` (8-24)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RerankingConfig.cs (1)</summary>\n\n* `RerankingConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/QueryExpansionConfig.cs (1)</summary>\n\n* `QueryExpansionConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/ContextCompressionConfig.cs (1)</summary>\n\n* `ContextCompressionConfig` (8-34)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (6)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RagPipeline.cs (1)</summary>\n\n* `GroundedAnswer` (114-156)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (1)</summary>\n\n* `EvaluateCore` (75-88)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs (1)</summary>\n\n* `EvaluateCore` (64-68)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (1)</summary>\n\n* `EvaluateCore` (59-78)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RagPipeline.cs (1)</summary>\n\n* `GroundedAnswer` (114-156)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (1)</summary>\n\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (2)</summary>\n\n* `Document` (109-113)\n* `Document` (210-210)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (4)</summary>\n\n* `List` (46-66)\n* `List` (98-112)\n* `List` (128-155)\n* `List` (157-164)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (3)</summary>\n\n* `List` (47-68)\n* `List` (110-137)\n* `List` (139-146)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (3)</summary>\n\n* `T` (63-77)\n* `List` (36-61)\n* `List` (79-86)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (3)</summary>\n\n* `T` (66-79)\n* `List` (39-64)\n* `List` (115-122)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (2)</summary>\n\n* `List` (36-73)\n* `List` (81-120)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfigurationBuilder.cs (9)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs (1)</summary>\n\n* `RAGConfiguration` (9-50)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/DocumentStoreConfig.cs (1)</summary>\n\n* `DocumentStoreConfig` (8-19)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/ChunkingConfig.cs (1)</summary>\n\n* `ChunkingConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/EmbeddingConfig.cs (1)</summary>\n\n* `EmbeddingConfig` (8-34)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RetrievalConfig.cs (1)</summary>\n\n* `RetrievalConfig` (8-24)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RerankingConfig.cs (1)</summary>\n\n* `RerankingConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/QueryExpansionConfig.cs (1)</summary>\n\n* `QueryExpansionConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/ContextCompressionConfig.cs (1)</summary>\n\n* `ContextCompressionConfig` (8-34)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PineconeDocumentStore.cs (5)</summary>\n\n* `AddCore` (35-43)\n* `Document` (72-75)\n* `IEnumerable` (45-70)\n* `RemoveCore` (77-85)\n* `Clear` (87-91)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RagPipeline.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (5)</summary>\n\n* `Document` (109-113)\n* `Document` (210-210)\n* `IEnumerable` (83-86)\n* `IEnumerable` (95-102)\n* `IEnumerable` (198-198)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (3)</summary>\n\n* `IEnumerable` (44-54)\n* `IEnumerable` (63-69)\n* `IEnumerable` (90-90)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (5)</summary>\n\n* `IEnumerable` (57-60)\n* `IEnumerable` (68-71)\n* `IEnumerable` (80-89)\n* `IEnumerable` (110-110)\n* `IEnumerable` (178-181)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/VectorDocument.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (1)</summary>\n\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (2)</summary>\n\n* `Document` (109-113)\n* `Document` (210-210)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/CrossEncoderReranker.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (26-193)\n* `IList` (153-192)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (3)</summary>\n\n* `T` (66-79)\n* `List` (39-64)\n* `List` (115-122)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (3)</summary>\n\n* `RerankingStrategyBase` (12-33)\n* `RerankingStrategyBase` (20-23)\n* `List` (32-32)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (3)</summary>\n\n* `EmbeddingModelBase` (25-175)\n* `Vector` (47-51)\n* `Vector` (96-96)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `Vector` (51-71)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (35-46)\n* `List` (48-104)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (4)</summary>\n\n* `IEnumerable` (122-150)\n* `IEnumerable` (192-195)\n* `IEnumerable` (206-209)\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/IdentityReranker.cs (1)</summary>\n\n* `IEnumerable` (55-59)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (3)</summary>\n\n* `RerankingStrategyBase` (12-33)\n* `RerankingStrategyBase` (20-23)\n* `List` (32-32)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PineconeDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (5)</summary>\n\n* `AddCore` (35-45)\n* `Document` (94-97)\n* `IEnumerable` (67-92)\n* `RemoveCore` (99-109)\n* `Clear` (111-117)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PostgresVectorDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs (5)</summary>\n\n* `AddCore` (35-43)\n* `Document` (72-75)\n* `IEnumerable` (45-70)\n* `RemoveCore` (77-85)\n* `Clear` (87-91)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (3)</summary>\n\n* `T` (66-79)\n* `List` (39-64)\n* `List` (115-122)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LLMQueryExpansion.cs (1)</summary>\n\n* `List` (33-46)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (26-193)\n* `IList` (153-192)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs (1)</summary>\n\n* `IEnumerable` (126-214)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (1)</summary>\n\n* `HashSet` (120-129)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary>\n\n* `IEnumerable` (30-79)\n* `MatchesFilters` (91-106)\n* `List` (81-89)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (2)</summary>\n\n* `Vector` (35-47)\n* `Vector` (49-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary>\n\n* `Vector` (35-47)\n* `Vector` (49-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary>\n\n* `Vector` (39-51)\n* `Vector` (53-73)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (8)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (3)</summary>\n\n* `IEnumerable` (44-54)\n* `IEnumerable` (63-69)\n* `IEnumerable` (90-90)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (4)</summary>\n\n* `IEnumerable` (122-150)\n* `IEnumerable` (192-195)\n* `IEnumerable` (206-209)\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (5)</summary>\n\n* `IEnumerable` (83-86)\n* `IEnumerable` (95-102)\n* `IEnumerable` (198-198)\n* `Document` (109-113)\n* `Document` (210-210)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/IdentityReranker.cs (1)</summary>\n\n* `IEnumerable` (55-59)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RagPipeline.cs (1)</summary>\n\n* `IEnumerable` (200-219)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (4)</summary>\n\n* `T` (82-95)\n* `IEnumerable` (37-80)\n* `MatchesFilters` (107-122)\n* `List` (97-105)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (67-92)\n* `Document` (94-97)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/IdentityReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (5)</summary>\n\n* `RerankerBase` (26-193)\n* `IEnumerable` (44-54)\n* `IEnumerable` (63-69)\n* `IEnumerable` (90-90)\n* `IList` (153-192)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-148)\n* `Document` (121-125)\n* `Document` (132-136)\n* `Document` (144-147)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `RAGMetricBase` (28-130)\n* `EvaluateCore` (73-73)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (1)</summary>\n\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (2)</summary>\n\n* `Document` (109-113)\n* `Document` (210-210)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (1)</summary>\n\n* `FaithfulnessMetric` (35-79)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (1)</summary>\n\n* `ContextCoverageMetric` (47-143)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (1)</summary>\n\n* `Evaluate` (51-60)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n\n</details><details>\n<summary>≡ƒ¬¢ LanguageTool</summary>\n\n<details>\n<summary>.github/AI_PROJECT_RULES.md</summary>\n\n[grammar] ~8-~8: Use a hyphen to join words.\nContext: ...Ops.Zero for zero values    - NumOps.One for one values    - NumOps.FromDouble(va...\n\n(QB_NEW_EN_HYPHEN)\n\n---\n\n[grammar] ~8-~8: Use a hyphen to join words.\nContext: ...Zero for zero values    - NumOps.One for one values    - NumOps.FromDouble(value)...\n\n(QB_NEW_EN_HYPHEN)\n\n</details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (2)</summary>\n\n* GitHub Check: CodeQL analysis (csharp)\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (16)</summary><blockquote>\n\n<details>\n<summary>.github/AI_PROJECT_RULES.md (1)</summary><blockquote>\n\n`1-72`: **Overall: Documentation is clear and well-aligned with PR objectives.**\n\nThe project rules effectively codify the architectural expectations for the RAG framework, including proper generic type usage, INumericOperations patterns, inheritance structure, and SOLID principles. The static analysis hints flagging hyphenation (lines 8ΓÇô9) appear to be false positives and can be safely ignored.\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IQueryProcessor.cs (1)</summary><blockquote>\n\n`1-32`: **LGTM! Clean and well-documented interface.**\n\nThe `IQueryProcessor` interface is well-designed with a clear single responsibility. The extensive documentation with practical examples (librarian analogy, expansion/reformulation examples) effectively communicates the purpose and usage patterns to developers of varying experience levels.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/IdentityQueryProcessor.cs (1)</summary><blockquote>\n\n`27-38`: **LGTM! Correct implementation of identity/pass-through processor.**\n\nThe implementation correctly overrides `ProcessQueryCore` to return the query unchanged. This serves as a useful default processor or baseline for testing, and leverages the base class for input validation. The documentation clearly explains when this processor is appropriate.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (2)</summary><blockquote>\n\n`35-48`: **LGTM! Robust validation with appropriate exception handling.**\n\nThe validation logic correctly distinguishes between null inputs (`ArgumentNullException`) and empty/whitespace inputs (`ArgumentException`), providing clear error semantics. The template method pattern properly delegates to `ProcessQueryCore` only after validation passes, ensuring derived classes receive validated input.\n\n---\n\n`50-55`: **LGTM! Clean abstraction for derived implementations.**\n\nThe abstract `ProcessQueryCore` method provides a clear contract for derived classes. The `protected` visibility appropriately restricts access within the inheritance hierarchy, and the documentation clearly indicates that implementers will receive validated input.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary><blockquote>\n\n`35-69`: **LGTM! Genericization implemented correctly.**\n\nThe changes to make `VectorRetriever` generic are consistent with the base class and interface updates. The retrieval logic correctly embeds the query and delegates to the document store's similarity search.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RetrievalConfig.cs (1)</summary><blockquote>\n\n`1-25`: **LGTM! Configuration structure is clean.**\n\nThe configuration class follows a consistent pattern with other config classes in the PR. The default `TopK` of 10 is reasonable for most retrieval scenarios.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs (1)</summary><blockquote>\n\n`40-69`: **LGTM! Metric implementation is appropriate.**\n\nThe genericization changes align with the base class updates, and the use of Jaccard similarity for simple word overlap is appropriate. The documentation correctly notes that production systems should consider semantic similarity approaches.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/QueryExpansionConfig.cs (1)</summary><blockquote>\n\n`1-30`: **LGTM! Configuration structure is consistent.**\n\nThe configuration class follows the established pattern with reasonable defaults. A `NumExpansions` of 3 provides a good balance between query coverage and computational overhead.\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IRetriever.cs (1)</summary><blockquote>\n\n`8-110`: **LGTM! Interface genericization is well-documented.**\n\nThe changes to make `IRetriever` generic over type `T` are consistent with the broader framework genericization. The comprehensive XML documentation, including beginner-friendly remarks, makes the interface easy to understand and use.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/IdentityReranker.cs (1)</summary><blockquote>\n\n`37-60`: **LGTM! Identity reranker correctly implements pass-through behavior.**\n\nThe genericization changes are consistent with the base class, and the implementation correctly returns documents unchanged. The `ModifiesScores` property appropriately returns `false`, and the documentation clearly explains the purpose of this no-op reranker as a pipeline placeholder.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs (1)</summary><blockquote>\n\n`57-68`: **Good merge of per-query scores**\n\nThe dedupe plus additive scoring keeps the best signal from each variation while reusing the underlying documentsΓÇölooks solid.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (1)</summary><blockquote>\n\n`77-88`: **Weighted fusion looks correct**\n\nUsing `NumOps` for the weighted sum and only surfacing documents with combined scores keeps this retriever consistent with the rest of the stack. Nicely done.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/CrossEncoderReranker.cs (1)</summary><blockquote>\n\n`130-159`: **Reranking flow looks solid**\n\nThe capped scoring loop, score propagation, and descending order all look correct given the cross-encoder contract.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (1)</summary><blockquote>\n\n`116-147`: **Constructors behave correctly**\n\nNumeric operations initialization and default score setup look consistent with the generic design.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RagPipeline.cs (1)</summary><blockquote>\n\n`114-219`: **Pipeline orchestration looks correct**\n\nThe retrievalΓåÆrerankΓåÆgeneration flow, empty-result handling, and async wrapper all align with the new generic pipeline design.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-03T23:05:43Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "a7f60f0d884a1052b3400d2facec8358332db4b8"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LdNCO",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 7**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (14)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (3)</summary><blockquote>\n\n`21-33`: **Placeholder implementation masquerading as ONNX integration.**\n\nThe class name and `modelPath` parameter imply this loads and runs an ONNX sentence transformer model, but `EmbedCore` (lines 35-47) generates synthetic vectors instead. This will break any code expecting real ONNX model embeddings.\n\n\n\n\nImplement actual ONNX model loading and inference using the stored `_modelPath`, or rename the class to reflect its synthetic nature and remove the misleading parameter. Same issue as `OpenAIEmbeddingModel`.\n\n---\n\n`35-47`: **Integer overflow in embedding calculation.**\n\nLine 42 has the same `hash * (i + 1)` overflow risk as OpenAIEmbeddingModel.\n\n\n\n\nApply the same fix:\n\n```diff\n-                var val = NumOps.FromDouble(Math.Cos(hash * (i + 1) * 0.002));\n+                var val = NumOps.FromDouble(Math.Cos((double)hash * (i + 1) * 0.002));\n```\n\n---\n\n`49-85`: **Code duplication: extract to base class.**\n\nThese methods are duplicated across all embedding model implementations. See the refactoring suggestion in OpenAIEmbeddingModel.cs (lines 53-89).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (3)</summary><blockquote>\n\n`22-35`: **Placeholder implementation misleads about HuggingFace integration.**\n\nLike `OpenAIEmbeddingModel`, this class name and parameters suggest real HuggingFace API integration, but it generates synthetic embeddings. This breaks developer expectations and retrieval quality.\n\n\n\n\nImplement actual HuggingFace API calls or rename to reflect synthetic behavior. Same issue as the other embedding models.\n\n---\n\n`37-49`: **Integer overflow in embedding calculation.**\n\nLine 44 has the same `hash * (i + 1)` overflow risk.\n\n\n\n\n```diff\n-                var val = NumOps.FromDouble(Math.Cos(hash * (i + 1) * 0.002));\n+                var val = NumOps.FromDouble(Math.Cos((double)hash * (i + 1) * 0.002));\n```\n\n---\n\n`51-87`: **Code duplication: extract to base class.**\n\nThese methods are duplicated across all embedding model implementations. See the refactoring suggestion in OpenAIEmbeddingModel.cs (lines 53-89).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (3)</summary><blockquote>\n\n`21-33`: **Placeholder implementation misleads about local model loading.**\n\nThe class name and `modelPath` parameter suggest this loads a local transformer model file, but it generates synthetic embeddings instead. This will fail when developers expect real model-based embeddings.\n\n\n\n\nImplement actual model loading and inference using the stored `_modelPath`, or rename to reflect synthetic behavior. Same issue as the other embedding models.\n\n---\n\n`35-47`: **Integer overflow in embedding calculation.**\n\nLine 42 has the same `hash * (i + 1)` overflow risk.\n\n\n\n\n```diff\n-                var val = NumOps.FromDouble(Math.Sin(hash * (i + 1) * 0.003));\n+                var val = NumOps.FromDouble(Math.Sin((double)hash * (i + 1) * 0.003));\n```\n\n---\n\n`49-85`: **Code duplication: extract to base class.**\n\nThese methods are duplicated across all embedding model implementations. See the refactoring suggestion in OpenAIEmbeddingModel.cs (lines 53-89).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (1)</summary><blockquote>\n\n`39-51`: **Potential integer overflow in embedding calculation.**\n\nLine 46 computes `hash * (i + 1) * 0.001` where both `hash` and `(i + 1)` are integers. For large hash values and dimensions, `hash * (i + 1)` can overflow before the cast to double, producing incorrect embedding values.\n\n\n\nCast one operand to double before multiplication:\n\n```diff\n-                var val = NumOps.FromDouble(Math.Cos(hash * (i + 1) * 0.001));\n+                var val = NumOps.FromDouble(Math.Cos((double)hash * (i + 1) * 0.001));\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs (1)</summary><blockquote>\n\n`154-186`: **Eliminate nullable generic sentinel to restore compilation**\n\nThe `T? bestScore = null` pattern is invalid for non-nullable value types, yielding CS0403 in the current build. Mirror the greedy fix from DiversityReranker: keep a boolean flag and initialize `bestScore` with `default` instead of `null`.  \n\n\nApply this diff:\n\n```diff\n-            var bestIdx = -1;\n-            T? bestScore = null;\n+            var bestIdx = -1;\n+            var hasBestScore = false;\n+            T bestScore = default!;\n@@\n-                if (bestScore == null || NumOps.GreaterThan(mmrScore, bestScore))\n+                if (!hasBestScore || NumOps.GreaterThan(mmrScore, bestScore))\n                 {\n                     bestScore = mmrScore;\n                     bestIdx = i;\n+                    hasBestScore = true;\n                 }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (1)</summary><blockquote>\n\n`127-153`: **Remove nullable sentinel to fix generic compile error**\n\n`T` is unconstrained, so declaring `T? bestScore = null` is illegal when `T` is a non-nullable value type, producing CS0412/CS0403 and stopping the build. Track initialization with a boolean flag instead of assigning `null` to `T`.  \n\n\nApply this diff:\n\n```diff\n-            Document<T>? bestDoc = null;\n-            T? bestScore = null;\n+            Document<T>? bestDoc = null;\n+            var hasBestScore = false;\n+            T bestScore = default!;\n@@\n-                if (bestScore == null || NumOps.GreaterThan(score, bestScore))\n+                if (!hasBestScore || NumOps.GreaterThan(score, bestScore))\n                 {\n                     bestDoc = doc;\n                     bestScore = score;\n+                    hasBestScore = true;\n                 }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (2)</summary><blockquote>\n\n`98-106`: **Replace ContainsKey + indexer with TryGetValue.**\n\nSame inefficiency as in the `Rerank` method. Use `TryGetValue` for a single lookup.\n\n\n\n```diff\n-                    if (scores.ContainsKey(doc.Id))\n-                    {\n-                        scores[doc.Id] = _numOps.Add(scores[doc.Id], rrfScore);\n-                    }\n-                    else\n-                    {\n-                        scores[doc.Id] = rrfScore;\n-                        allDocs[doc.Id] = doc;\n-                    }\n+                    if (scores.TryGetValue(doc.Id, out var existingScore))\n+                    {\n+                        scores[doc.Id] = _numOps.Add(existingScore, rrfScore);\n+                    }\n+                    else\n+                    {\n+                        scores[doc.Id] = rrfScore;\n+                        allDocs[doc.Id] = doc;\n+                    }\n```\n\n---\n\n`115-118`: **Set HasRelevanceScore flag.**\n\nMissing `doc.HasRelevanceScore = true` assignment. Downstream code that checks this flag (e.g., coverage heuristics, other rerankers) will treat these documents as unscored, leading to incorrect behavior.\n\n\n\n```diff\n             foreach (var doc in reranked)\n             {\n                 doc.RelevanceScore = scores[doc.Id];\n+                doc.HasRelevanceScore = true;\n             }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (6)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs (1)</summary><blockquote>\n\n`1-1`: **Remove unused import.**\n\nThe `AiDotNet.Helpers` namespace is imported but not used in this file.\n\nApply this diff to remove the unused import:\n\n```diff\n-using AiDotNet.Helpers;\n-\n namespace AiDotNet.RetrievalAugmentedGeneration.Configuration\n```\n\n</blockquote></details>\n<details>\n<summary>.github/COPILOT_INSTRUCTIONS.md (1)</summary><blockquote>\n\n`27-27`: **Fix compound adjective hyphenation.**\n\nLine 27 should use a hyphenated compound adjective: `model-building` instead of `model building`.\n\n\n\n```diff\n- New features must work within existing model building process\n+ New features must work within existing model-building process\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (4)</summary><blockquote>\n\n`23-27`: **Remove redundant null check.**\n\nThe base constructor already validates `numericOperations`, so the null check at line 25 is unreachable and should be removed.\n\n\n```diff\n         public ReciprocalRankFusion(INumericOperations<T> numericOperations, int k = 60) : base(numericOperations)\n         {\n-            _numOps = numericOperations ?? throw new ArgumentNullException(nameof(numericOperations));\n             _k = k > 0 ? k : throw new ArgumentOutOfRangeException(nameof(k));\n         }\n```\n\n---\n\n`49-56`: **Replace ContainsKey + indexer with TryGetValue.**\n\nThe pattern of checking `ContainsKey` followed by indexer access is inefficient. Use `TryGetValue` to perform a single dictionary lookup.\n\n\n```diff\n-                if (scores.ContainsKey(doc.Id))\n-                {\n-                    scores[doc.Id] = _numOps.Add(scores[doc.Id], rrfScore);\n-                }\n-                else\n-                {\n-                    scores[doc.Id] = rrfScore;\n-                }\n+                if (scores.TryGetValue(doc.Id, out var existingScore))\n+                {\n+                    scores[doc.Id] = _numOps.Add(existingScore, rrfScore);\n+                }\n+                else\n+                {\n+                    scores[doc.Id] = rrfScore;\n+                }\n```\n\n---\n\n`59-62`: **Remove unnecessary ContainsKey check in OrderByDescending.**\n\nEvery document in the input list has a score assigned in the loop above (lines 44-57), so the `ContainsKey` check and ternary operator are unnecessary. Simplify the ordering logic.\n\n\n```diff\n             var reranked = documents\n-                .OrderByDescending(d => Convert.ToDouble(scores.ContainsKey(d.Id) ? scores[d.Id] : _numOps.Zero))\n+                .OrderByDescending(d => Convert.ToDouble(scores[d.Id]))\n                 .Take(topK)\n                 .ToList();\n```\n\n---\n\n`64-71`: **Simplify score assignment loop.**\n\nSince every document in `reranked` is guaranteed to have a score in the dictionary (from lines 44-57), the `ContainsKey` check is redundant.\n\n\n```diff\n             foreach (var doc in reranked)\n             {\n-                if (scores.ContainsKey(doc.Id))\n-                {\n-                    doc.RelevanceScore = scores[doc.Id];\n-                    doc.HasRelevanceScore = true;\n-                }\n+                doc.RelevanceScore = scores[doc.Id];\n+                doc.HasRelevanceScore = true;\n             }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between a7f60f0d884a1052b3400d2facec8358332db4b8 and 77a1bbb5864b8564f484f102b991a8e5ef80d32f.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (18)</summary>\n\n* `.github/COPILOT_INSTRUCTIONS.md` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Models/Document.cs` (4 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs` (7 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (3)</summary>\n\n* src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs\n* src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (14)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (3)</summary>\n\n* `Vector` (35-47)\n* `Vector` (65-85)\n* `GetDeterministicHash` (49-63)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary>\n\n* `IEnumerable` (30-82)\n* `MatchesFilters` (153-168)\n* `List` (84-92)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (3)</summary>\n\n* `RerankingStrategyBase` (12-33)\n* `RerankingStrategyBase` (20-23)\n* `List` (32-32)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (1)</summary>\n\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (2)</summary>\n\n* `Document` (109-113)\n* `Document` (210-210)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `MathHelper` (16-987)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (2)</summary>\n\n* `T` (189-218)\n* `IEnumerable` (103-181)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (27-203)\n* `IList` (154-202)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (3)</summary>\n\n* `Vector` (37-49)\n* `Vector` (67-87)\n* `GetDeterministicHash` (51-65)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (2)</summary>\n\n* `T` (189-218)\n* `IEnumerable` (103-181)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (1)</summary>\n\n* `T` (189-218)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (3)</summary>\n\n* `T` (64-78)\n* `List` (36-62)\n* `List` (80-87)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (3)</summary>\n\n* `T` (73-86)\n* `List` (39-71)\n* `List` (122-129)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (1)</summary>\n\n* `List` (67-94)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (4)</summary>\n\n* `List` (46-66)\n* `List` (98-112)\n* `List` (128-155)\n* `List` (157-164)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (5)</summary>\n\n* `RerankerBase` (27-203)\n* `IEnumerable` (45-55)\n* `IEnumerable` (64-70)\n* `IEnumerable` (91-91)\n* `IList` (154-202)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs (1)</summary>\n\n* `IEnumerable` (126-214)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs (8)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfigurationBuilder.cs (1)</summary>\n\n* `RAGConfiguration` (147-151)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/DocumentStoreConfig.cs (1)</summary>\n\n* `DocumentStoreConfig` (8-19)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/ChunkingConfig.cs (1)</summary>\n\n* `ChunkingConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/EmbeddingConfig.cs (1)</summary>\n\n* `EmbeddingConfig` (8-34)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RetrievalConfig.cs (1)</summary>\n\n* `RetrievalConfig` (8-24)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RerankingConfig.cs (1)</summary>\n\n* `RerankingConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/QueryExpansionConfig.cs (1)</summary>\n\n* `QueryExpansionConfig` (8-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/ContextCompressionConfig.cs (1)</summary>\n\n* `ContextCompressionConfig` (8-34)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (1)</summary>\n\n* `T` (189-218)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (3)</summary>\n\n* `T` (64-78)\n* `List` (36-62)\n* `List` (80-87)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (3)</summary>\n\n* `RerankingStrategyBase` (12-33)\n* `RerankingStrategyBase` (20-23)\n* `List` (32-32)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (5)</summary>\n\n* `T` (89-106)\n* `T` (108-122)\n* `IEnumerable` (41-87)\n* `MatchesFilters` (183-198)\n* `List` (173-181)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (67-92)\n* `Document` (94-97)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (3)</summary>\n\n* `EmbeddingModelBase` (25-175)\n* `Vector` (47-51)\n* `Vector` (96-96)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (3)</summary>\n\n* `Vector` (37-49)\n* `Vector` (67-87)\n* `GetDeterministicHash` (51-65)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (3)</summary>\n\n* `Vector` (37-49)\n* `Vector` (67-87)\n* `GetDeterministicHash` (51-65)\n\n</details>\n\n</blockquote></details>\n\n</details><details>\n<summary>≡ƒ¬¢ GitHub Actions: Build</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs</summary>\n\n[error] 121-121: dotnet build --no-restore --configuration Debug failed: CS0305: Using the generic type 'StatisticsHelper<T>' requires 1 type argument.\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Check: Build All Frameworks</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs</summary>\n\n[failure] 169-169: \n'INumericOperations<T>' does not contain a definition for 'Compare' and no accessible extension method 'Compare' accepting a first argument of type 'INumericOperations<T>' could be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 121-121: \nUsing the generic type 'StatisticsHelper<T>' requires 1 type arguments\n\n---\n\n[failure] 169-169: \n'INumericOperations<T>' does not contain a definition for 'Compare' and no accessible extension method 'Compare' accepting a first argument of type 'INumericOperations<T>' could be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 121-121: \nUsing the generic type 'StatisticsHelper<T>' requires 1 type arguments\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs</summary>\n\n[failure] 155-155: \nCannot convert null to type parameter 'T' because it could be a non-nullable value type. Consider using 'default(T)' instead.\n\n---\n\n[failure] 155-155: \nCannot convert null to type parameter 'T' because it could be a non-nullable value type. Consider using 'default(T)' instead.\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs</summary>\n\n[failure] 128-128: \nCannot convert null to type parameter 'T' because it could be a non-nullable value type. Consider using 'default(T)' instead.\n\n---\n\n[failure] 128-128: \nCannot convert null to type parameter 'T' because it could be a non-nullable value type. Consider using 'default(T)' instead.\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Check: Publish Size Analysis</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs</summary>\n\n[failure] 169-169: \n'INumericOperations<T>' does not contain a definition for 'Compare' and no accessible extension method 'Compare' accepting a first argument of type 'INumericOperations<T>' could be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 121-121: \nUsing the generic type 'StatisticsHelper<T>' requires 1 type arguments\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs</summary>\n\n[failure] 155-155: \nCannot convert null to type parameter 'T' because it could be a non-nullable value type. Consider using 'default(T)' instead.\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs</summary>\n\n[failure] 128-128: \nCannot convert null to type parameter 'T' because it could be a non-nullable value type. Consider using 'default(T)' instead.\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ LanguageTool</summary>\n\n<details>\n<summary>.github/COPILOT_INSTRUCTIONS.md</summary>\n\n[grammar] ~27-~27: Use a hyphen to join words.\nContext: ...features must work within existing model building process  ### 5. Code Quality - ...\n\n(QB_NEW_EN_HYPHEN)\n\n</details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs (2)</summary><blockquote>\n\n`8-10`: **Verify the unused generic type parameter.**\n\nThe type parameter `T` is declared but never used within this class. While this may be intentional for type propagation through the configuration chain, please confirm:\n- Is the type parameter required for integration with the RAG pipeline components?\n- Should any configuration properties (e.g., embedding dimension, similarity thresholds) be typed with `T` or constrained by `INumericOperations<T>`?\n\n\nIf the type parameter is intentionally unused and serves only as a pass-through for the builder pattern, consider adding a comment in the class documentation to clarify this design decision for future maintainers.\n\n---\n\n`14-44`: **LGTM! Well-structured configuration model.**\n\nThe configuration properties are well-organized, covering all RAG pipeline components with appropriate defaults. The initialization of all properties to new instances prevents null reference issues, and the comprehensive XML documentation makes the API clear. The use of separate configuration classes for each component follows good separation of concerns.\n\n</blockquote></details>\n<details>\n<summary>.github/COPILOT_INSTRUCTIONS.md (2)</summary><blockquote>\n\n`1-103`: **Comprehensive governance document well-aligned with PR objectives.**\n\nThe COPILOT_INSTRUCTIONS document provides clear architectural guidance that directly supports the PR's refactoring toward generic, type-safe APIs and concrete implementations. The rules on generics, inheritance patterns, and integration with PredictionModelBuilder align well with the PR's scope, and the file management and development process guidelines add structure to collaborative work.\n\n**Strengths:**\n- Clear distinction between mandatory architectural rules and recommended processes\n- Strong emphasis on DRY, SOLID, and consistency through generics\n- Practical guidance on git workflow and authentication\n- Comprehensive coverage of class organization and inheritance patterns\n\n**Recommended considerations for future refinement:**\n- Consider adding inline code examples (right/wrong patterns) as the codebase evolves\n- Document any exceptions to the strict \"NEVER\" rules (edge cases where deviations are acceptable)\n\n---\n\n`10-10`: **No changes requiredΓÇöcustom data types are properly defined and accessible.**\n\nVerification confirms that `Vector<T>`, `Matrix<T>`, and `Tensor<T>` are all defined as public classes in the `src/LinearAlgebra` namespace and are accessible for general use. The guidance in `.github/COPILOT_INSTRUCTIONS.md` is accurate and applicable.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (1)</summary><blockquote>\n\n`164-182`: **LGTM! Past critical issue resolved.**\n\nThe normalization logic now correctly computes min/max using a manual loop with `NumOps` comparisons (avoiding LINQ Min/Max that requires `IComparable`), and explicitly handles zero/near-zero range before division. This addresses the previous critical feedback and prevents crashes for types like `Complex<T>` or integral types.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T00:13:39Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "77a1bbb5864b8564f484f102b991a8e5ef80d32f"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LdZQa",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 58**\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (15)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (1)</summary><blockquote>\n\n`30-42`: **Validate aggregationMethod against allowed values.**\n\nThe XML documentation specifies that `aggregationMethod` should be one of \"max\", \"mean\", or \"weighted\", but the constructor only validates that it's non-null. Consider adding validation to fail fast with a clear error message if an invalid value is provided.\n\n\n\nApply this diff to add validation:\n\n```diff\n     public MultiVectorRetriever(\n         IDocumentStore<T> documentStore,\n         int vectorsPerDocument,\n         string aggregationMethod,\n         INumericOperations<T> numericOperations)\n         : base(documentStore, numericOperations)\n     {\n         if (vectorsPerDocument <= 0)\n             throw new ArgumentOutOfRangeException(nameof(vectorsPerDocument), \"Vectors per document must be positive\");\n-            \n+\n+        if (string.IsNullOrWhiteSpace(aggregationMethod))\n+            throw new ArgumentException(\"Aggregation method cannot be null or whitespace\", nameof(aggregationMethod));\n+\n+        var validMethods = new[] { \"max\", \"mean\", \"weighted\" };\n+        if (!validMethods.Contains(aggregationMethod, StringComparer.OrdinalIgnoreCase))\n+            throw new ArgumentException($\"Invalid aggregation method. Must be one of: {string.Join(\", \", validMethods)}\", nameof(aggregationMethod));\n+\n         _vectorsPerDocument = vectorsPerDocument;\n-        _aggregationMethod = aggregationMethod ?? throw new ArgumentNullException(nameof(aggregationMethod));\n+        _aggregationMethod = aggregationMethod.ToLowerInvariant();\n     }\n```\n\nOptionally, consider using an enum instead of a string for better type safety:\n\n```csharp\npublic enum AggregationMethod\n{\n    Max,\n    Mean,\n    Weighted\n}\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (1)</summary><blockquote>\n\n`46-56`: **Implementation pending for multi-query expansion.**\n\nThe method is currently scaffolded with `NotImplementedException`. The TODO outlines the implementation steps clearly.\n\n\nDo you want me to help implement the LLM integration for generating query variations, or would you prefer to open a tracking issue for this work?\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (2)</summary><blockquote>\n\n`1-6`: **Remove unused LinearAlgebra import.**\n\nThe `AiDotNet.LinearAlgebra` namespace import on line 3 does not appear to be used in this file. Consider removing it to keep imports clean.\n\n\n\n```diff\n using AiDotNet.Helpers;\n using AiDotNet.Interfaces;\n-using AiDotNet.LinearAlgebra;\n using AiDotNet.RetrievalAugmentedGeneration.DocumentStores;\n using AiDotNet.RetrievalAugmentedGeneration.Models;\n```\n\n---\n\n`56-74`: **Skeleton implementation follows established pattern.**\n\nThe method structure and validation logic are consistent with other advanced retrievers in the codebase (GraphRetriever, ColBERTRetriever, MultiVectorRetriever). The TODO comment provides a clear implementation roadmap:\n1. Chunk documents\n2. Retrieve similar chunks\n3. Fetch parent documents\n4. Include neighboring chunks if configured\n5. Return unique parents\n\nThis placeholder is appropriate for the current PR stage.\n\n\n\n\nWould you like me to open a separate issue to track the implementation of the parent document retrieval logic, or help draft the implementation code?\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary><blockquote>\n\n`51-69`: **Verify stub implementation is acceptable for this PR scope.**\n\nThis method currently throws `NotImplementedException`, making the retriever non-functional. While the validation logic and TODO are clear, GraphRetriever was not listed in the original PR objectives (which specified 5 retrievers: Dense, BM25, TFIDF, Hybrid, MultiQuery).\n\nThe pattern matches other stub retrievers in the codebase (ColBERTRetriever, MultiVectorRetriever, ParentDocumentRetriever), suggesting this is intentional scaffolding. However, please confirm:\n\n1. Is it acceptable to include this stub implementation in the PR?\n2. Should the PR description clarify which implementations are complete vs. scaffolded for future work?\n\n\n\n\nDo you want me to open a tracking issue for completing the GraphRetriever implementation, including the knowledge graph integration, sub-graph traversal, and scoring logic outlined in the TODO?\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (1)</summary><blockquote>\n\n`29-44`: **Stub implementation with clear TODO.**\n\nThe method provides a clear implementation plan via TODO comments. The signature is consistent with other metric implementations in the codebase (AnswerCorrectnessMetric, ContextRelevanceMetric).\n\n\n\n\nNote: The _noiseRatio field is stored but not yet used in the current stub. Ensure it's utilized in the final implementation as outlined in the TODO steps.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (3)</summary><blockquote>\n\n`2-2`: **Remove redundant namespace import.**\n\nLine 2 imports the same namespace that this file declares on line 4. Types within the same namespace are already accessible without an import.\n\n\n\nApply this diff:\n\n```diff\n using AiDotNet.Interfaces;\n-using AiDotNet.RetrievalAugmentedGeneration.QueryExpansion;\n \n namespace AiDotNet.RetrievalAugmentedGeneration.QueryExpansion;\n```\n\n---\n\n`18-40`: **Consider validating `_minTermWeight` parameter.**\n\nThe `_minTermWeight` parameter is stored without validation. Depending on the SPLADE model's semantics, negative or invalid weight thresholds could cause unexpected behavior during term filtering. Consider adding validation to ensure the threshold is within an acceptable range.\n\n\n\nExample validation:\n\n```diff\n     _maxExpansionTerms = maxExpansionTerms;\n+    \n+    // Validate minTermWeight is non-negative (adjust based on model requirements)\n+    if (NumericOperations.Compare(minTermWeight, NumericOperations.Zero) < 0)\n+        throw new ArgumentOutOfRangeException(nameof(minTermWeight), \"Minimum term weight must be non-negative\");\n+        \n     _minTermWeight = minTermWeight;\n```\n\n---\n\n`51-57`: **Placeholder implementation is acceptable but should be tracked.**\n\nThe `NotImplementedException` is consistent with other query expansion implementations (MultiQueryExpansion, SubQueryExpansion). The TODO provides a clear implementation roadmap. However, since the PR summary states \"implementations ready for integration testing,\" please confirm whether this placeholder is acceptable for the current scope or if there's a tracking issue for completing this implementation.\n\n\n\n\nWould you like me to open a new issue to track the SPLADE/learned sparse encoder implementation?\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (1)</summary><blockquote>\n\n`29-39`: **Consider validating non-empty strings for configuration parameters.**\n\nWhile null checks are present, `graphEndpoint` and `graphQueryLanguage` should also be validated against empty or whitespace-only strings to ensure valid configuration.\n\n\n\nApply this diff to add empty string validation:\n\n```diff\n     public GraphRAG(\n         string graphEndpoint,\n         string graphQueryLanguage,\n         RetrieverBase<T> vectorRetriever,\n         INumericOperations<T> numericOperations)\n     {\n-        _graphEndpoint = graphEndpoint ?? throw new ArgumentNullException(nameof(graphEndpoint));\n-        _graphQueryLanguage = graphQueryLanguage ?? throw new ArgumentNullException(nameof(graphQueryLanguage));\n+        if (string.IsNullOrWhiteSpace(graphEndpoint))\n+            throw new ArgumentException(\"Graph endpoint cannot be null or whitespace\", nameof(graphEndpoint));\n+        if (string.IsNullOrWhiteSpace(graphQueryLanguage))\n+            throw new ArgumentException(\"Graph query language cannot be null or whitespace\", nameof(graphQueryLanguage));\n+        \n+        _graphEndpoint = graphEndpoint;\n+        _graphQueryLanguage = graphQueryLanguage;\n         _vectorRetriever = vectorRetriever ?? throw new ArgumentNullException(nameof(vectorRetriever));\n         _numericOperations = numericOperations ?? throw new ArgumentNullException(nameof(numericOperations));\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (1)</summary><blockquote>\n\n`87-95`: **Optional: Sentence splitting may miss the last sentence.**\n\nThe current implementation splits on `\". \"`, `\"! \"`, and `\"? \"` (with trailing spaces), which means the last sentence in a document won't be split if it doesn't end with a delimiter followed by a space. For example, `\"First sentence. Last sentence\"` will only yield `\"First sentence\"`.\n\nConsider updating the split logic to handle the last sentence:\n\n```diff\n private List<string> SplitIntoSentences(string text)\n {\n     // Simple sentence splitting - in production would use NLP library\n-    return text\n-        .Split(new[] { \". \", \"! \", \"? \" }, StringSplitOptions.RemoveEmptyEntries)\n-        .Select(s => s.Trim())\n-        .Where(s => !string.IsNullOrWhiteSpace(s))\n-        .ToList();\n+    var sentences = text\n+        .Split(new[] { '.', '!', '?' }, StringSplitOptions.RemoveEmptyEntries)\n+        .Select(s => s.Trim())\n+        .Where(s => !string.IsNullOrWhiteSpace(s))\n+        .ToList();\n+    \n+    return sentences;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (1)</summary><blockquote>\n\n`27-36`: **Add validation for empty strings and vector dimension.**\n\nThe constructor validates null values but not empty strings for `endpoint` and `collectionName`, and doesn't validate that `vectorDimension` is positive.\n\n\n\nApply this diff to strengthen validation:\n\n```diff\n     public ChromaDBDocumentStore(\n         string endpoint,\n         string collectionName,\n         int vectorDimension,\n         INumericOperations<T> numericOperations)\n         : base(vectorDimension, numericOperations)\n     {\n-        _endpoint = endpoint ?? throw new ArgumentNullException(nameof(endpoint));\n-        _collectionName = collectionName ?? throw new ArgumentNullException(nameof(collectionName));\n+        if (string.IsNullOrWhiteSpace(endpoint))\n+            throw new ArgumentException(\"Endpoint cannot be null or empty\", nameof(endpoint));\n+        if (string.IsNullOrWhiteSpace(collectionName))\n+            throw new ArgumentException(\"Collection name cannot be null or empty\", nameof(collectionName));\n+        if (vectorDimension <= 0)\n+            throw new ArgumentOutOfRangeException(nameof(vectorDimension), \"Vector dimension must be positive\");\n+\n+        _endpoint = endpoint;\n+        _collectionName = collectionName;\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (2)</summary><blockquote>\n\n`127-145`: **Strengthen HTML header validation to match HTML5 spec.**\n\nThe current HTML header detection accepts invalid headers (h7-h9) and doesn't verify proper tag syntax. While this may not cause failures, it can create unexpected chunk boundaries on malformed input.\n\n\n\nApply this diff to restrict detection to valid h1-h6 tags:\n\n```diff\n     // HTML headers (<h1> <h2> etc.)\n     if (trimmed.StartsWith(\"<h\", StringComparison.OrdinalIgnoreCase) &&\n         trimmed.Length > 2 &&\n-        char.IsDigit(trimmed[2]))\n+        char.IsDigit(trimmed[2]) &&\n+        trimmed[2] >= '1' && trimmed[2] <= '6')\n         return true;\n```\n\n---\n\n`88-92`: **Consider tracking chunk size incrementally for better performance.**\n\nCurrently, `string.Join()` is called on every line to check if `maxChunkSize` is exceeded (line 91). For documents with long sections between headers, this creates O(n┬▓) behavior.\n\n\n\nTrack the cumulative size incrementally:\n\n```diff\n         else\n         {\n+            var lineLength = line.Length + Environment.NewLine.Length;\n             currentChunk.Add(line);\n\n             // Split if chunk gets too large\n-            var currentSize = string.Join(Environment.NewLine, currentChunk).Length;\n+            currentSize += lineLength;\n             if (currentSize >= _maxChunkSize)\n             {\n```\n\nNote: Declare `var currentSize = 0;` at line 56 alongside other loop variables, and reset it when clearing `currentChunk`.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/SentenceTransformersFineTuner.cs (1)</summary><blockquote>\n\n`31-47`: **Suggest validating learning rate parameter.**\n\nThe `epochs` parameter is validated to ensure it's positive, but the `learningRate` parameter is stored without validation. Learning rates should typically be positive values. Consider adding a validation check using the numeric operations.\n\n\n\nApply this diff to add learning rate validation:\n\n```diff\n         if (epochs <= 0)\n             throw new ArgumentOutOfRangeException(nameof(epochs), \"Epochs must be positive\");\n+        \n+        var zero = numericOperations.Zero;\n+        if (numericOperations.Compare(learningRate, zero) <= 0)\n+            throw new ArgumentOutOfRangeException(nameof(learningRate), \"Learning rate must be positive\");\n             \n         _epochs = epochs;\n         _learningRate = learningRate;\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 77a1bbb5864b8564f484f102b991a8e5ef80d32f and 4d459a5baaeed2f7174d07d29893c445365ef894.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (34)</summary>\n\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/MultiModalEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/SentenceTransformersFineTuner.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/CohereReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/DiversityReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (34)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (1)</summary>\n\n* `T` (39-57)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs (1)</summary>\n\n* `T` (29-55)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (1)</summary>\n\n* `RAGMetricBase` (28-130)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs (2)</summary>\n\n* `Vector` (45-52)\n* `IEnumerable` (57-64)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CohereReranker.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (1)</summary>\n\n* `RerankerBase` (27-203)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/DiversityReranker.cs (1)</summary>\n\n* `IEnumerable` (40-104)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs (1)</summary>\n\n* `IEnumerable` (34-74)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (1)</summary>\n\n* `IEnumerable` (46-56)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (1)</summary>\n\n* `IEnumerable` (46-57)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (1)</summary>\n\n* `IEnumerable` (46-58)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (1)</summary>\n\n* `IEnumerable` (46-56)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary>\n\n* `IEnumerable` (44-59)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (48-125)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (48-148)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (41-76)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (1)</summary>\n\n* `IEnumerable` (44-59)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/DiversityReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (1)</summary>\n\n* `RerankerBase` (27-203)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (1)</summary>\n\n* `JaccardSimilarity` (104-113)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (48-148)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (41-76)\n* `List` (100-170)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (1)</summary>\n\n* `IEnumerable` (47-63)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (1)</summary>\n\n* `IEnumerable` (46-58)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (1)</summary>\n\n* `IEnumerable` (46-57)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (2)</summary>\n\n* `T` (97-107)\n* `IEnumerable` (42-85)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/SentenceTransformersFineTuner.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (1)</summary>\n\n* `IEnumerable` (55-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (47-66)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (1)</summary>\n\n* `IEnumerable` (56-74)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs (2)</summary>\n\n* `Vector` (45-52)\n* `IEnumerable` (57-64)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (48-125)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (48-148)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/MultiModalEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (1)</summary>\n\n* `T` (39-57)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `RAGMetricBase` (28-130)\n* `JaccardSimilarity` (104-113)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary>\n\n* `IEnumerable` (51-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (1)</summary>\n\n* `IEnumerable` (55-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (1)</summary>\n\n* `IEnumerable` (56-74)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary>\n\n* `IEnumerable` (51-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (1)</summary>\n\n* `IEnumerable` (55-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (47-66)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (48-125)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (41-76)\n* `List` (100-170)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary>\n\n* `IEnumerable` (51-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (47-66)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (1)</summary>\n\n* `IEnumerable` (56-74)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs (1)</summary>\n\n* `T` (29-55)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (1)</summary>\n\n* `T` (32-44)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `RAGMetricBase` (28-130)\n* `JaccardSimilarity` (104-113)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (1)</summary>\n\n* `RerankerBase` (27-203)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CohereReranker.cs (1)</summary>\n\n* `IEnumerable` (40-57)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/DiversityReranker.cs (1)</summary>\n\n* `IEnumerable` (40-104)\n\n</details>\n\n</blockquote></details>\n\n</details><details>\n<summary>≡ƒ¬¢ GitHub Actions: Build</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs</summary>\n\n[error] 39-39: CS0115: 'AnswerCorrectnessMetric<T>.EvaluateCore(string, string, IEnumerable<Document<T>>, string)': no suitable method found to override\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Actions: Quality Gates (.NET)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs</summary>\n\n[error] 39-39: CS0115: 'AnswerCorrectnessMetric<T>.EvaluateCore(string, string, IEnumerable<Document<T>>, string)' overrides no suitable method to override. (dotnet publish step: dotnet publish src/AiDotNet.csproj -c Release -f net8.0 -o publish)\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Check: Build All Frameworks</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs</summary>\n\n[failure] 15-15: \n'ContextRelevanceMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.EvaluateCore(GroundedAnswer<T>, string?)'\n\n---\n\n[failure] 15-15: \n'ContextRelevanceMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.Description.get'\n\n---\n\n[failure] 15-15: \n'ContextRelevanceMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.Name.get'\n\n---\n\n[failure] 15-15: \n'ContextRelevanceMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.RequiresGroundTruth.get'\n\n---\n\n[failure] 29-29: \n'ContextRelevanceMetric<T>.EvaluateCore(string, string, IEnumerable<Document<T>>, string)': no suitable method found to override\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs</summary>\n\n[failure] 15-15: \n'AnswerCorrectnessMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.EvaluateCore(GroundedAnswer<T>, string?)'\n\n---\n\n[failure] 15-15: \n'AnswerCorrectnessMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.Description.get'\n\n---\n\n[failure] 15-15: \n'AnswerCorrectnessMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.Name.get'\n\n---\n\n[failure] 15-15: \n'AnswerCorrectnessMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.RequiresGroundTruth.get'\n\n---\n\n[failure] 39-39: \n'AnswerCorrectnessMetric<T>.EvaluateCore(string, string, IEnumerable<Document<T>>, string)': no suitable method found to override\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Check: Publish Size Analysis</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs</summary>\n\n[failure] 15-15: \n'ContextRelevanceMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.Name.get'\n\n---\n\n[failure] 15-15: \n'ContextRelevanceMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.EvaluateCore(GroundedAnswer<T>, string?)'\n\n---\n\n[failure] 15-15: \n'ContextRelevanceMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.Description.get'\n\n---\n\n[failure] 15-15: \n'ContextRelevanceMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.RequiresGroundTruth.get'\n\n---\n\n[failure] 29-29: \n'ContextRelevanceMetric<T>.EvaluateCore(string, string, IEnumerable<Document<T>>, string)': no suitable method found to override\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs</summary>\n\n[failure] 15-15: \n'AnswerCorrectnessMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.Name.get'\n\n---\n\n[failure] 15-15: \n'AnswerCorrectnessMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.EvaluateCore(GroundedAnswer<T>, string?)'\n\n---\n\n[failure] 15-15: \n'AnswerCorrectnessMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.Description.get'\n\n---\n\n[failure] 15-15: \n'AnswerCorrectnessMetric<T>' does not implement inherited abstract member 'RAGMetricBase<T>.RequiresGroundTruth.get'\n\n---\n\n[failure] 39-39: \n'AnswerCorrectnessMetric<T>.EvaluateCore(string, string, IEnumerable<Document<T>>, string)': no suitable method found to override\n\n</details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (23)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (1)</summary><blockquote>\n\n`46-56`: **Incomplete implementation conflicts with PR readiness claims.**\n\nThe `Chunk` method throws `NotImplementedException`, which contradicts the PR summary stating \"Implementations ready for integration testing.\" Additionally, `AgenticChunker` is not listed among the five chunking strategies specified in Issue #303 objectives (RecursiveCharacterTextSplitter, SemanticChunkingStrategy, SlidingWindowChunkingStrategy, MarkdownTextSplitter, CodeAwareTextSplitter), suggesting this is extra functionality added beyond scope.\n\nIf this class is intentionally incomplete for future implementation, consider:\n1. Marking the class as `internal` or moving it to a separate experimental namespace\n2. Adding `[Obsolete(\"Not yet implemented\")]` attribute to the class\n3. Documenting in the PR that this is scaffolding for future work\n\n\n\n\nVerify whether this incomplete implementation should be included in this PR, or if the implementation should be completed or deferred to a future PR.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (5)</summary><blockquote>\n\n`1-5`: **LGTM!**\n\nThe using statements include all necessary namespaces for the retriever implementation.\n\n---\n\n`9-18`: **LGTM!**\n\nThe class declaration follows the established retriever pattern, and the XML documentation clearly explains the ColBERT approach and its advantages over single-vector methods.\n\n---\n\n`20-22`: **LGTM!**\n\nThe fields are appropriately scoped as private readonly and will be used once the ColBERT model integration is implemented.\n\n---\n\n`32-50`: **LGTM!**\n\nThe constructor validation is thorough and appropriate:\n- Validates `modelPath` is not null\n- Ensures `maxDocLength` and `maxQueryLength` are positive\n- Properly delegates to the base class\n- Uses appropriate exception types with descriptive messages\n\nThe implementation follows the established pattern for retrievers in the codebase.\n\n---\n\n`55-75`: **Well-structured scaffold with detailed implementation guidance.**\n\nThe input validation is correct, and the TODO comment provides a clear roadmap for the ColBERT retrieval implementation. The scaffold follows the established pattern for retriever stubs in the codebase.\n\nFor the future implementation, ensure that:\n- The `metadataFilters` parameter is used to filter documents (when provided)\n- The stored configuration fields (`_modelPath`, `_maxDocLength`, `_maxQueryLength`) are utilized during model loading and inference\n- The MaxSim computation aligns with the standard ColBERT scoring approach\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (1)</summary><blockquote>\n\n`47-66`: **LGTM! Validation and placeholder implementation are consistent with codebase patterns.**\n\nThe input validation for `query` and `topK` is correct and follows the same pattern as other retrievers in the codebase (GraphRetriever, ColBERTRetriever, ParentDocumentRetriever). The TODO comments provide a clear roadmap for the implementation.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (1)</summary><blockquote>\n\n`27-41`: **LGTM!**\n\nConstructor validation is thorough with proper null checks and range validation for all parameters.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (1)</summary><blockquote>\n\n`31-51`: **Constructor validation is well-implemented.**\n\nThe parameter validation logic is comprehensive and correct:\n- Both sizes must be positive\n- Parent size must be at least as large as chunk size\n\nThe exception messages clearly communicate the requirements.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (2)</summary><blockquote>\n\n`27-41`: **LGTM: Constructor validation is robust.**\n\nThe constructor properly validates all parameters with appropriate null checks and range validation for `maxSubQueries`.\n\n---\n\n`46-57`: **Verify placeholder implementation aligns with project timeline.**\n\nThis method throws `NotImplementedException` with a TODO comment. While this pattern is consistent with other query expansion strategies in the codebase (e.g., `LearnedSparseEncoderExpansion`, `MultiQueryExpansion`), the PR objectives indicate that Query Expansion implementations are \"completed (2/2).\" Since `SubQueryExpansion` is not listed among the completed implementations (LLMQueryExpansion, HyDEQueryExpansion), please confirm whether this placeholder is intentional for future work or if it should be implemented in this PR.\n\n\n\nAdditionally, the constructor fields `_llmEndpoint`, `_llmApiKey`, and `_maxSubQueries` are currently unused due to this placeholder implementation. They will be utilized once the LLM integration is completed.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary><blockquote>\n\n`31-46`: **LGTM! Strong validation in constructor.**\n\nThe constructor properly validates all inputs with null checks for string parameters and range validation for `maxHops`. The validation logic is clear and follows best practices.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (3)</summary><blockquote>\n\n`18-19`: **Verify secure handling of API credentials.**\n\nThe API key is stored as a plain string field, which exposes it to memory dumps and debugging tools. While this may be acceptable depending on your credential management strategy (e.g., short-lived tokens, environment variables, or Azure Key Vault integration), ensure that:\n\n- API keys are not logged or exposed in exception messages\n- The application uses secure credential storage at runtime\n- Keys are rotated regularly and not hard-coded\n\n---\n\n`49-71`: **Implementation incomplete despite PR claims.**\n\nThe method throws `NotImplementedException` with comprehensive TODO comments outlining the planned implementation. However, the PR summary states \"implementations ready for integration testing\" and claims all components are completed. This inconsistency suggests either:\n\n1. This placeholder should not be included in this PR\n2. The PR summary should clarify which components are complete vs. placeholders\n3. This requires actual implementation before merging\n\nThe TODO comments provide a solid roadmap (lines 60-69), but the current state makes this class non-functional for integration testing.\n\n\nShould this placeholder implementation be deferred to a future PR, or does it need to be completed before merging?\n\n---\n\n`15-47`: **Well-structured class design.**\n\nThe architectural decisions are solid:\n- Generic design with `INumericOperations<T>` aligns with the broader RAG framework pattern\n- Composition using `RetrieverBase<T>` dependency promotes flexibility and testability\n- The `maxIterations` safeguard prevents infinite loops in the self-correction process\n- Private readonly fields ensure proper encapsulation\n- Comprehensive XML documentation clearly describes the intended behavior\n\nOnce the implementation is completed, this will integrate well with the rest of the RAG framework.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs (1)</summary><blockquote>\n\n`53-73`: **The alternating start/end reordering logic is well-implemented.**\n\nThe algorithm correctly implements the \"lost in the middle\" mitigation strategy by alternating document placement between the start and end of the result list. The use of pre-allocated array with indices is efficient and produces the intended ordering.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (2)</summary><blockquote>\n\n`44-59`: **Input validation looks good.**\n\nThe validation logic correctly checks for null/whitespace queries and positive `topK` values, consistent with other retriever implementations like `ChainOfThoughtRetriever`. The `NotImplementedException` with TODO outline is appropriate for this stub implementation phase.\n\n---\n\n`15-20`: ****\n\nThe review incorrectly singles out GraphRAG for not following the inheritance pattern while implying ChainOfThoughtRetriever does. In reality, `ChainOfThoughtRetriever`, `FLARERetriever`, and `SelfCorrectingRetriever` all have identical architectureΓÇönone implement `IRetriever<T>` or extend `RetrieverBase<T>`. All four AdvancedPatterns classes follow the same design pattern of composing a `RetrieverBase<T>` dependency rather than inheriting from it. This appears to be an intentional architectural choice for this pattern category, not an inconsistency unique to GraphRAG.\n\n> Likely an incorrect or invalid review comment.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (2)</summary><blockquote>\n\n`26-37`: **Constructor validation looks good.**\n\nThe constructor properly validates `maxSentences` and performs null checks on required dependencies.\n\n---\n\n`97-107`: **Major: Potential division by zero in relevance calculation.**\n\nIf the query contains only delimiter characters (e.g., `\"...\"`, `\"!!!\"`, `\"., \"`), the `queryWords` array will be empty after splitting, causing `queryWords.Length` to be 0 and resulting in a division by zero exception on Line 104.\n\nAdd validation before the division:\n\n```diff\n private T CalculateRelevance(string query, string sentence)\n {\n     // Simple relevance using word overlap - in production would use embeddings\n     var queryWords = query.ToLowerInvariant().Split(new[] { ' ', ',', '.', '!', '?' }, StringSplitOptions.RemoveEmptyEntries);\n     var sentenceWords = sentence.ToLowerInvariant().Split(new[] { ' ', ',', '.', '!', '?' }, StringSplitOptions.RemoveEmptyEntries);\n     \n+    if (queryWords.Length == 0)\n+        return _numericOperations.Zero;\n+    \n     var overlap = queryWords.Intersect(sentenceWords).Count();\n     var score = overlap > 0 ? (double)overlap / queryWords.Length : 0.0;\n     \n     return _numericOperations.FromDouble(score);\n }\n```\n\n\n\n> Likely an incorrect or invalid review comment.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (2)</summary><blockquote>\n\n`47-63`: **Placeholder implementation is appropriate.**\n\nThe `Compress` method appropriately validates inputs and provides clear TODO comments outlining the implementation steps. This is acceptable scaffolding for the RAG framework expansion.\n\n---\n\n`69-80`: **Placeholder implementation with clear guidance.**\n\nThe `FineTune` method validates inputs and provides detailed TODO comments. The placeholder is well-structured for future implementation.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (1)</summary><blockquote>\n\n`74-77`: **DocumentCount property structure is correct.**\n\nThe property correctly overrides the abstract `DocumentCount` from the base class. The placeholder return value of `0` is acceptable for this skeleton implementation pending REST API integration.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T00:34:05Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "4d459a5baaeed2f7174d07d29893c445365ef894"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LdaIK",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Review continued from previous batch...**",
      "submittedAt": "2025-11-04T00:35:17Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "4d459a5baaeed2f7174d07d29893c445365ef894"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LeHAH",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (1)</summary><blockquote>\n\n`16-49`: **Drop unused LLM configuration until itΓÇÖs wired up.**\n\n`_llmEndpoint` and `_llmApiKey` are required ctor params yet nothing in `EvaluateCore` consumes them, so callers must hand over secrets just to satisfy the signature. Either implement the fact-checking path or remove these fields/parameters for now to avoid misleading usage.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs (1)</summary><blockquote>\n\n`19-45`: **Cache query tokens once per evaluation.**\n\nWe call `GetWords(answer.Query)` inside the loop, duplicating the split/hash work for every document. Hoisting it to a local before the loop keeps behavior identical and avoids repeated allocations.  \n\n```diff\n-        foreach (var doc in answer.SourceDocuments)\n-        {\n-            var words1 = GetWords(answer.Query);\n+        var queryWords = GetWords(answer.Query);\n+        foreach (var doc in answer.SourceDocuments)\n+        {\n+            var words1 = queryWords;\n             var words2 = GetWords(doc.Content);\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 4d459a5baaeed2f7174d07d29893c445365ef894 and 7fbd5910239204f8852637c980b53b76349cc626.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (8)</summary>\n\n* `src/Interfaces/IRAGMetric.cs` (3 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs` (4 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (7)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (1)</summary>\n\n* `T` (34-49)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (3)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n* `RAGMetricBase` (28-103)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (1)</summary>\n\n* `T` (34-49)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs (1)</summary>\n\n* `T` (19-46)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (4)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n* `RAGMetricBase` (28-103)\n* `HashSet` (93-102)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (3)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n* `RAGMetricBase` (28-103)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (1)</summary>\n\n* `T` (34-49)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (3)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n* `RAGMetricBase` (28-103)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (7)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (1)</summary>\n\n* `T` (34-49)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (3)</summary>\n\n* `T` (75-86)\n* `T` (91-103)\n* `T` (108-146)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs (1)</summary>\n\n* `T` (19-46)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (1)</summary>\n\n* `T` (59-74)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (1)</summary>\n\n* `T` (30-33)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n\n</details>\n<details>\n<summary>src/Interfaces/IGenerator.cs (1)</summary>\n\n* `GroundedAnswer` (99-99)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs (1)</summary>\n\n* `T` (64-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (3)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n* `RAGMetricBase` (28-103)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (11)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary><blockquote>\n\n`34-53`: **Generic interface update looks solid.**\n\nThe shift to `IRAGMetric<T>` cleanly matches the generic metric base and preserves the expected contract.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs (1)</summary><blockquote>\n\n`40-76`: **Nice generic port.**\n\nThe Jaccard computation now flows through `NumOps` without regressionsΓÇölooks good.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (1)</summary><blockquote>\n\n`35-74`: **Faithfulness metric migration looks good.**\n\nGuards and the overlap ratio now cooperate with `NumOps`, so the generic conversion is clean.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (4)</summary><blockquote>\n\n`1-2`: **LGTM! Clean generic migration.**\n\nThe addition of required imports and the generic class signature are correct. The `NumOps` field provides a consistent way for derived metrics to perform type-safe numeric operations across all supported numeric types.\n\n\n\n\nAlso applies to: 28-33\n\n---\n\n`51-60`: **LGTM! Type-safe evaluation flow.**\n\nThe `Evaluate` method correctly returns `T` and uses `MathHelper.Clamp` with generic bounds (`NumOps.Zero`, `NumOps.One`) to ensure scores remain in the valid [0,1] range.\n\n---\n\n`73-86`: **LGTM! Abstract method signatures correctly updated.**\n\nThe abstract method signatures for `EvaluateCore` and `ValidateAnswer` properly accept `GroundedAnswer<T>` and return `T`, enabling derived metrics to implement type-safe evaluation logic.\n\n---\n\n`93-102`: **LGTM! Helper method preserved for word-based metrics.**\n\nThe `GetWords` method continues to support token extraction for metrics that perform word-level overlap calculations (e.g., Jaccard similarity). This is correctly retained in the generic base class.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (4)</summary><blockquote>\n\n`47-47`: **LGTM! Generic class signature correct.**\n\nThe class correctly inherits from `RAGMetricBase<T>`, enabling type-safe numeric operations for all supported numeric types.\n\n---\n\n`75-86`: **LGTM! Evaluation dispatch logic correct.**\n\nThe method correctly returns `NumOps.Zero` for empty document sets and properly dispatches to ground-truth or heuristic evaluation paths based on availability.\n\n---\n\n`91-103`: **LGTM! Ground-truth coverage calculation is correct.**\n\nThe word-overlap coverage ratio is correctly computed using `NumOps.Divide` with proper integer-to-T conversion via `FromDouble`. Division by zero is prevented by the early-return guard on line 94-95.\n\n---\n\n`108-146`: **LGTM! Heuristic coverage calculation is well-implemented.**\n\nThe heuristic approach correctly:\n- Accumulates relevance scores using `NumOps` (lines 115-122)\n- Computes average relevance with division-by-zero protection (line 124)\n- Calculates diversity as unique-word ratio with zero-guard (lines 138-140)\n- Applies weighted combination (70% relevance + 30% diversity) using type-safe operations (lines 142-145)\n\nAll numeric operations properly use `NumOps`, and edge cases are handled.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T02:01:50Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "COMMENTED",
      "commit": {
        "oid": "7fbd5910239204f8852637c980b53b76349cc626"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LeVkg",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 8**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (6)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (1)</summary><blockquote>\n\n`67-70`: **Critical: OrderByDescending requires IComparable<T> constraint (see previous review).**\n\nThis issue was already flagged in a previous review. The `OrderByDescending(s => s.score)` call will fail at runtime if `T` does not implement `IComparable<T>`. Please apply one of the solutions from the previous review:\n- Add an `IComparable<T>` constraint to the class (recommended), or\n- Use `INumericOperations<T>` to manually compare and sort\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (1)</summary><blockquote>\n\n`16-17`: **Security posture gap: API key stored as plain string.**\n\nThe API key continues to be stored as a plain string without secure cleanup, as previously flagged. Consider implementing the `IDisposable` pattern to allow sensitive fields to be cleared, or use a credential management approach that avoids storing secrets directly.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (2)</summary><blockquote>\n\n`93-154`: **Fix infinite loop when processing HTML tables.**\n\nWhen `IsTableStart` identifies a line starting with `<table>`, but `IsTableRow` does not recognize it (line 161 only checks for `<tr>`, not `<table>`), the while loop at line 101 executes zero iterations. Because `index` is never advanced, `ChunkCore` will call `IsTableStart` with the same line indefinitely, causing an infinite loop.\n\n\n\n\nConsume the opening `<table>` tag (and any scaffold like `<thead>`, `<tbody>`) before entering the row-processing loop:\n\n```diff\n     private List<(string Chunk, int StartPosition, int EndPosition)> ProcessTable(string[] lines, ref int index, ref int position)\n     {\n         var chunks = new List<(string Chunk, int StartPosition, int EndPosition)>();\n         var startPosition = position;\n         var headerRows = new List<string>();\n         var dataRows = new List<string>();\n+\n+        var trimmed = lines[index].Trim();\n+        if (trimmed.StartsWith(\"<table\", StringComparison.OrdinalIgnoreCase))\n+        {\n+            headerRows.Add(lines[index]);\n+            position += lines[index].Length + Environment.NewLine.Length;\n+            index++;\n+\n+            while (index < lines.Length &&\n+                   !IsTableRow(lines[index]) &&\n+                   !lines[index].Trim().StartsWith(\"</table\", StringComparison.OrdinalIgnoreCase))\n+            {\n+                headerRows.Add(lines[index]);\n+                position += lines[index].Length + Environment.NewLine.Length;\n+                index++;\n+            }\n+        }\n\n         // Extract table header\n         while (index < lines.Length && IsTableRow(lines[index]))\n```\n\nAlso ensure you advance past the closing `</table>` tag after the main loop completes.\n\n---\n\n`115-151`: **Preserve headers on the first chunk even when not duplicating them.**\n\nWhen `_includeHeadersInEachChunk` is `false`, headers are omitted from all chunks (lines 119, 140), causing consumers to lose column names entirely. This contradicts the class documentation (line 12) which states the splitter preserves column headers.\n\n\n\n\nAlways include headers on the first chunk, and optionally on later chunks:\n\n```diff\n             // Create chunk when we hit max rows\n             if (dataRows.Count >= _maxRowsPerChunk)\n             {\n                 var chunkContent = new List<string>();\n-                if (_includeHeadersInEachChunk)\n+                if (_includeHeadersInEachChunk || chunks.Count == 0)\n                 {\n                     chunkContent.AddRange(headerRows);\n                 }\n                 chunkContent.AddRange(dataRows);\n```\n\nApply the same condition at line 140 for the trailing chunk:\n\n```diff\n         if (dataRows.Count > 0 || headerRows.Count > 0)\n         {\n             var chunkContent = new List<string>();\n-            if (_includeHeadersInEachChunk && headerRows.Count > 0)\n+            if ((_includeHeadersInEachChunk || chunks.Count == 0) && headerRows.Count > 0)\n             {\n                 chunkContent.AddRange(headerRows);\n             }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (1)</summary><blockquote>\n\n`124-165`: **Same overflow bug as before in diversity loop.**\n\n`NumOps.FromDouble(double.MinValue)` still overflows for decimal/int `T`, so this reranker will throw immediately. Use a ΓÇ£best score seenΓÇ¥ flag rather than converting a sentinel that many numeric types canΓÇÖt represent.\n\n```diff\n-            Document<T>? bestDoc = null;\n-            var bestScore = NumOps.FromDouble(double.MinValue);\n+            Document<T>? bestDoc = null;\n+            var bestScore = NumOps.Zero;\n+            var hasBestScore = false;\n@@\n-                if (bestScore == null || NumOps.GreaterThan(score, bestScore))\n+                if (!hasBestScore || NumOps.GreaterThan(score, bestScore))\n                 {\n                     bestDoc = doc;\n                     bestScore = score;\n+                    hasBestScore = true;\n                 }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs (1)</summary><blockquote>\n\n`154-196`: **Stop converting `double.MinValue` into `T`.**\n\nRouting `double.MinValue` through `NumOps.FromDouble(...)` overflows for narrower numeric types (decimal, int, etc.), so this reranker dies before selecting a document. Track whether youΓÇÖve seen a candidate instead of relying on an out-of-range sentinel.\n\n```diff\n-            var bestIdx = -1;\n-            var bestScore = NumOps.FromDouble(double.MinValue);\n+            var bestIdx = -1;\n+            var bestScore = NumOps.Zero;\n+            var hasCandidate = false;\n@@\n-                if (bestScore == null || NumOps.GreaterThan(mmrScore, bestScore))\n+                if (!hasCandidate || NumOps.GreaterThan(mmrScore, bestScore))\n                 {\n                     bestScore = mmrScore;\n                     bestIdx = i;\n+                    hasCandidate = true;\n                 }\n             }\n \n-            if (bestIdx >= 0)\n+            if (hasCandidate)\n             {\n                 selected.Add(bestIdx);\n                 unselected.Remove(bestIdx);\n             }\n             else\n             {\n                 break;\n             }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (12)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs (2)</summary><blockquote>\n\n`37-37`: **Document the generic type parameter T.**\n\nThe class declaration lacks XML documentation for the type parameter `T`. Based on the usage pattern with `INumericOperations<T>` throughout the codebase and the conversion to `double` at line 91, `T` is expected to be a numeric type that implements `IConvertible`.\n\n\n\nAdd XML documentation for the type parameter:\n\n```diff\n /// <summary>\n /// Evaluates RAG system performance using multiple metrics.\n /// </summary>\n+/// <typeparam name=\"T\">The numeric type used for calculations. Must be convertible to double.</typeparam>\n /// <remarks>\n```\n\n---\n\n`117-117`: **Use Count property instead of Count() method.**\n\nLine 117 calls `.Count()` on `IReadOnlyList<Document<T>>`, which has a `Count` property. Using the property directly avoids an unnecessary method call.\n\n\n\n```diff\n-            SourceDocumentCount = answer.SourceDocuments.Count(),\n+            SourceDocumentCount = answer.SourceDocuments.Count,\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs (2)</summary><blockquote>\n\n`60-62`: **Remove unreachable default case.**\n\nThe default case is unreachable since `GenerateHypotheticalDocument` is only called with the three specific style strings (\"detailed answer\", \"concise explanation\", \"technical description\") from lines 30-32.\n\n\n\nApply this diff:\n```diff\n-            default:\n-                return $\"{query} is an important concept that involves {string.Join(\", \", words)}. \" +\n-                       $\"Understanding this topic requires examination of its core principles.\";\n```\n\n---\n\n`15-17`: **Add dependency injection for LLM-based hypothetical document generation.**\n\nThe current implementation uses string templates instead of calling an LLM to generate hypothetical documents, which doesn't align with the HyDE algorithm. While the code satisfies the base class contract by returning `List<string>`, it lacks the necessary dependencies to generate realistic hypothetical documents.\n\nConsider injecting `IGenerator<T>` to enable LLM-based document generation:\n\n```diff\n+private readonly IGenerator<string> _generator;\n+\n-public HyDEQueryExpansion()\n+public HyDEQueryExpansion(IGenerator<string> generator)\n {\n+    _generator = generator ?? throw new ArgumentNullException(nameof(generator));\n }\n```\n\nThen use `_generator` in `GenerateHypotheticalDocument` to call the LLM instead of using string templates. Note: The base class returns `List<string>`, so embedding generation would occur at a separate layer after query expansion.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (5)</summary><blockquote>\n\n`46-49`: **Consider adding a GetAll method to IDocumentStore.**\n\nCreating a dummy vector to retrieve all documents is a workaround that obscures intent. BM25 is a corpus-based algorithm that needs access to all documents for statistics computation, not similarity-based retrieval.\n\n\n\nConsider adding a method like `GetAllDocuments()` to `IDocumentStore<T>` to make this pattern explicit:\n\n```csharp\n// In IDocumentStore<T>\nIEnumerable<Document<T>> GetAllDocuments();\n```\n\nThen update this code:\n\n```diff\n-            var candidates = _documentStore.GetSimilar(\n-                new AiDotNet.LinearAlgebra.Vector<T>(new T[Math.Max(1, _documentStore.VectorDimension)]),\n-                _documentStore.DocumentCount\n-            );\n+            var candidates = _documentStore.GetAllDocuments();\n```\n\n---\n\n`91-95`: **Use TryGetValue to avoid redundant dictionary lookups.**\n\nThe code uses `ContainsKey` followed by indexer access, which performs two dictionary lookups. The `TryGetValue` pattern is more efficient.\n\n\n\nApply this diff:\n\n```diff\n-            if (!_termFrequencies.ContainsKey(docId) || !_termFrequencies[docId].ContainsKey(term))\n-                return NumOps.Zero;\n-\n-            var tf = _termFrequencies[docId][term];\n-            var docLength = _documentLengths.ContainsKey(docId) ? _documentLengths[docId] : NumOps.Zero;\n+            if (!_termFrequencies.TryGetValue(docId, out var docTermFreqs) || \n+                !docTermFreqs.TryGetValue(term, out var tf))\n+                return NumOps.Zero;\n+\n+            var docLength = _documentLengths.TryGetValue(docId, out var length) ? length : NumOps.Zero;\n```\n\n---\n\n`147-159`: **Optimize dictionary operations in term frequency computation.**\n\nSeveral micro-optimizations are available:\n\n1. Line 156: `.Distinct()` on dictionary keys is redundant since dictionary keys are already unique.\n2. Lines 147-150: Consider using `TryGetValue` or C# 10+ `TryAdd` for cleaner code.\n3. Lines 152-154: Consider using `TryAdd` to avoid repeated `ContainsKey` checks.\n\n\n\nApply these optimizations:\n\n```diff\n                 foreach (var term in terms)\n                 {\n-                    if (termCounts.ContainsKey(term))\n-                        termCounts[term] = NumOps.Add(termCounts[term], NumOps.One);\n-                    else\n+                    if (termCounts.TryGetValue(term, out var currentCount))\n+                        termCounts[term] = NumOps.Add(currentCount, NumOps.One);\n+                    else\n                         termCounts[term] = NumOps.One;\n\n-                    if (!_documentFrequencies.ContainsKey(term))\n-                        _documentFrequencies[term] = 0;\n+                    _documentFrequencies.TryAdd(term, 0);\n                 }\n\n-                foreach (var term in termCounts.Keys.Distinct())\n+                foreach (var term in termCounts.Keys)\n                 {\n                     _documentFrequencies[term]++;\n                 }\n```\n\n---\n\n`124-171`: **Consider caching corpus statistics for static document collections.**\n\n`BuildCorpusStatistics` is invoked on every query (line 52 in `RetrieveCore`), recomputing term frequencies, document frequencies, and average document length from scratch. For static or slowly-changing corpora, this is inefficient and adds significant overhead to each retrieval operation.\n\n\n\nConsider one of these approaches:\n\n1. **Precompute once**: Build statistics once when the retriever is created or when the corpus changes, storing them in the instance fields.\n2. **Lazy initialization**: Build statistics on first query and cache them, invalidating only when the corpus changes.\n3. **External indexing**: For production use, consider building an index offline and loading precomputed statistics.\n\nFor dynamic corpora where documents are frequently added/removed, the current approach is appropriate but should be documented as such.\n\n---\n\n`183-198`: **Consider extracting shared filter matching logic.**\n\nThe `MatchesFilters` method is duplicated across multiple retrievers (identical implementation in `TFIDFRetriever.cs`). Consider extracting this to a shared utility method in `RetrieverBase<T>` or a helper class to follow DRY principles.\n\n\n\nExample in `RetrieverBase<T>`:\n\n```csharp\nprotected bool MatchesFilters(Document<T> document, Dictionary<string, object> filters)\n{\n    if (filters.Count == 0)\n        return true;\n\n    foreach (var filter in filters)\n    {\n        if (!document.Metadata.TryGetValue(filter.Key, out var value))\n            return false;\n\n        if (!filter.Value.Equals(value))\n            return false;\n    }\n\n    return true;\n}\n```\n\nThen remove the duplicate implementations in `BM25Retriever` and `TFIDFRetriever`.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (1)</summary><blockquote>\n\n`18-18`: **Remove redundant field storage.**\n\nThe `_maxChunkSize` field is redundant since the value is passed to the base constructor (line 30) and the base class should expose it via the `ChunkSize` property. The local field is never referenced in `ChunkCore`.\n\n\n\nApply this diff to remove the redundant field:\n\n```diff\n {\n     private readonly string _llmEndpoint;\n     private readonly string _llmApiKey;\n-    private readonly int _maxChunkSize;\n \n     /// <summary>\n     /// Initializes a new instance of the <see cref=\"AgenticChunker\"/> class.\n```\n\nAnd remove the assignment:\n\n```diff\n         if (maxChunkSize <= 0)\n             throw new ArgumentOutOfRangeException(nameof(maxChunkSize), \"Max chunk size must be positive\");\n-            \n-        _maxChunkSize = maxChunkSize;\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfigurationBuilder.cs (1)</summary><blockquote>\n\n`173-186`: **Consider validating enabled optional components.**\n\nThe validation checks required components (DocumentStore, Chunking, Embedding, Retrieval) but doesn't verify that optional components (Reranking, QueryExpansion, ContextCompression) have valid configurations when `Enabled = true`. While the individual `With*` methods validate their inputs, adding defensive checks here would catch any configuration inconsistencies.\n\n\n\nApply this diff to add validation for enabled optional components:\n\n```diff\n         if (string.IsNullOrEmpty(_config.Retrieval.Strategy))\n             throw new InvalidOperationException(\"Retrieval strategy must be configured\");\n+\n+        if (_config.Reranking.Enabled && string.IsNullOrEmpty(_config.Reranking.Strategy))\n+            throw new InvalidOperationException(\"Reranking strategy must be configured when reranking is enabled\");\n+\n+        if (_config.QueryExpansion.Enabled && string.IsNullOrEmpty(_config.QueryExpansion.Strategy))\n+            throw new InvalidOperationException(\"Query expansion strategy must be configured when query expansion is enabled\");\n+\n+        if (_config.ContextCompression.Enabled && string.IsNullOrEmpty(_config.ContextCompression.Strategy))\n+            throw new InvalidOperationException(\"Context compression strategy must be configured when compression is enabled\");\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (1)</summary><blockquote>\n\n`26-31`: **Document or implement ChunkOverlap for non-table content.**\n\nThe `chunkOverlap` parameter is passed to the base class but never used in the chunking logic. Table chunks have no overlap (line 116 chunks purely by row count), and non-table lines are currently not batched at all. This inconsistency with the base class contract may confuse users.\n\n\n\nConsider one of the following:\n\n1. **Document the behavior:** Add to the XML doc (line 23) that overlap applies only to non-table text, not table chunks, since tables must preserve row integrity.\n\n2. **Implement overlap:** Once non-table batching is fixed (see previous comment), apply `ChunkOverlap` when splitting non-table chunks, similar to `SemanticChunkingStrategy` line 40:\n   ```csharp\n   chunkStartPosition = position - ChunkOverlap;\n   ```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 7fbd5910239204f8852637c980b53b76349cc626 and fb037f7036c63184b2417768a5e0933c503d9233.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (13)</summary>\n\n* `src/PredictionModelBuilder.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/RAGConfigurationBuilder.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs` (5 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs` (0 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÆñ Files with no reviewable changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs\n\n</details>\n\n<details>\n<summary>Γ£à Files skipped from review due to trivial changes (1)</summary>\n\n* src/PredictionModelBuilder.cs\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (10)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (2)</summary>\n\n* `T` (59-74)\n* `FaithfulnessMetric` (35-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (4)</summary>\n\n* `T` (75-86)\n* `T` (91-103)\n* `T` (108-146)\n* `ContextCoverageMetric` (47-147)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/MaximalMarginalRelevanceReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (2)</summary>\n\n* `T` (189-218)\n* `IEnumerable` (103-181)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (27-203)\n* `IList` (154-202)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (5)</summary>\n\n* `RerankerBase` (27-203)\n* `IEnumerable` (45-55)\n* `IEnumerable` (64-70)\n* `IEnumerable` (91-91)\n* `IList` (154-202)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (1)</summary>\n\n* `HashSet` (93-102)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LLMQueryExpansion.cs (1)</summary>\n\n* `List` (33-46)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary>\n\n* `IEnumerable` (30-82)\n* `MatchesFilters` (153-168)\n* `List` (84-92)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfigurationBuilder.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (1)</summary>\n\n* `T` (64-78)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfiguration.cs (1)</summary>\n\n* `RAGConfiguration` (9-45)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (4)</summary>\n\n* `T` (89-106)\n* `T` (108-122)\n* `IEnumerable` (41-87)\n* `List` (173-181)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (1)</summary>\n\n* `IEnumerable` (47-63)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs (1)</summary>\n\n* `T` (64-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (3)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n* `RAGMetricBase` (28-103)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (2)</summary>\n\n* `IEnumerable` (30-59)\n* `List` (61-88)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (1)</summary>\n\n* `IEnumerable` (30-59)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (43-69)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (11)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs (3)</summary><blockquote>\n\n`86-92`: **Verify type safety of the conversion from T to double.**\n\nThe code converts the generic metric score of type `T` to `double` using `Convert.ToDouble(score)` without validation. This will throw an `InvalidCastException` at runtime if `T` is not a convertible numeric type. While the codebase architecture expects `T` to be numeric (compatible with `INumericOperations<T>`), there's no compile-time enforcement.\n\n\n\nConsider adding runtime validation or documenting this constraint more explicitly. If you'd like, I can generate a verification script to check how `T` is constrained across the RAG framework.\n\n---\n\n`128-152`: **LGTM!**\n\nThe batch evaluation method correctly handles the generic `GroundedAnswer<T>` type, validates inputs appropriately, and properly pairs answers with ground truths when provided.\n\n---\n\n`159-197`: **LGTM!**\n\nThe aggregate statistics method correctly computes mean, standard deviation, min, and max for each metric across multiple evaluation results. The use of `StatisticsHelper<double>` and `Vector<double>` is appropriate since `EvaluationResult` already contains normalized `double` scores.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (2)</summary><blockquote>\n\n`26-37`: **LGTM!**\n\nThe constructor properly validates inputs and ensures `maxSentences` is positive and `numericOperations` is not null before assignment.\n\n---\n\n`98-108`: **LGTM with noted limitations.**\n\nThe word overlap scoring is simple but functional for an MVP implementation. The comment appropriately acknowledges that production usage should employ embeddings. The logic correctly uses `INumericOperations.FromDouble` for type conversion.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (3)</summary><blockquote>\n\n`25-39`: **LGTM: Constructor properly validates and initializes.**\n\nThe constructor correctly validates the document store parameter and initializes BM25 parameters with appropriate defaults (k1=1.5, b=0.75). Corpus statistics dictionaries are properly initialized.\n\n---\n\n`121-121`: **Verify precision requirements for logarithm computation.**\n\nThe conversion chain `T ΓåÆ double ΓåÆ Math.Log ΓåÆ double ΓåÆ T` may lose precision for high-precision numeric types (e.g., decimal). This is necessary since `Math.Log` only operates on floating-point types, but ensure this precision loss is acceptable for your use case.\n\n\n\nIf high precision is required, consider documenting this limitation or providing an alternative implementation for high-precision types.\n\n---\n\n`173-181`: **LGTM: Basic tokenization is appropriate for initial implementation.**\n\nThe tokenization logic correctly handles null/whitespace input and performs case normalization and punctuation splitting. This is consistent with the `TFIDFRetriever` implementation and sufficient for a basic BM25 retriever.\n\nFor production use, consider enhancing with stemming, lemmatization, and stop-word removal to improve retrieval quality.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/RAGConfigurationBuilder.cs (3)</summary><blockquote>\n\n`16-38`: **LGTM!**\n\nThe constructor and `WithDocumentStore` method are well-implemented with appropriate validation and fluent chaining.\n\n---\n\n`47-100`: **LGTM with minor security consideration.**\n\nThe `WithChunking`, `WithEmbedding`, and `WithRetrieval` methods are well-implemented with comprehensive validation. The API key on line 79 is stored as a plain string; while this is configuration data, consider whether sensitive credentials should be handled through a secure credential provider instead.\n\n---\n\n`108-161`: **LGTM!**\n\nThe optional configuration methods (`WithReranking`, `WithQueryExpansion`, `WithContextCompression`) correctly set `Enabled = true` to make these features opt-in, and include appropriate validation for their parameters including the compression ratio range check.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T02:36:44Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "fb037f7036c63184b2417768a5e0933c503d9233"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87Lehk7",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 2**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (1)</summary><blockquote>\n\n`35-47`: **Fix potential integer overflow before cast to double.**\n\nAt line 42, `hash * (i + 1)` can overflow when `hash` is large and `i` approaches `_dimension`. Since `GetDeterministicHash` uses unchecked arithmetic, long input strings can produce large hash values. The overflow occurs before the result is converted to double, corrupting the embedding.\n\nCast to double first to ensure correct arithmetic:\n\n```diff\n-                var val = NumOps.FromDouble(Math.Cos(hash * (i + 1) * 0.002));\n+                var val = NumOps.FromDouble(Math.Cos((double)hash * (i + 1) * 0.002));\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (2)</summary><blockquote>\n\n`49-63`: **Consider extracting duplicated hash function.**\n\nThis `GetDeterministicHash` method is duplicated identically across multiple embedding model classes.\n\n\n\n\nAs mentioned in the HuggingFaceEmbeddingModel review, consider moving this to `EmbeddingModelBase<T>` as a protected static helper to eliminate duplication.\n\n---\n\n`35-47`: **Guard against integer overflow in hash-based embedding generation.**\n\nLine 42 computes `hash * (i + 1) * 0.003` where both `hash` and `i` are integers. With large dimensions (e.g., 384 or higher) and large hash values, `hash * (i + 1)` can overflow before conversion to double, leading to inconsistent embeddings.\n\n\n\nApply this diff:\n\n```diff\n protected override Vector<T> EmbedCore(string text)\n {\n     var values = new T[_dimension];\n     var hash = GetDeterministicHash(text);\n     \n     for (int i = 0; i < _dimension; i++)\n     {\n-        var val = NumOps.FromDouble(Math.Sin(hash * (i + 1) * 0.003));\n+        var val = NumOps.FromDouble(Math.Sin((double)hash * (i + 1) * 0.003));\n         values[i] = val;\n     }\n\n     return new Vector<T>(values).Normalize();\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (1)</summary><blockquote>\n\n`37-49`: **Guard against integer overflow in hash-based embedding generation.**\n\nLine 44 computes `hash * (i + 1) * 0.002` where both `hash` and `i` are integers. When `dimension` is large (e.g., 768) and `hash` has a large magnitude, the multiplication `hash * (i + 1)` can overflow, wrapping to a negative or incorrect value before conversion to double. This produces inconsistent embeddings.\n\n\n\nApply this diff to prevent overflow:\n\n```diff\n protected override Vector<T> EmbedCore(string text)\n {\n     var values = new T[_dimension];\n     var hash = GetDeterministicHash(text);\n     \n     for (int i = 0; i < _dimension; i++)\n     {\n-        var val = NumOps.FromDouble(Math.Cos(hash * (i + 1) * 0.002));\n+        var val = NumOps.FromDouble(Math.Cos((double)hash * (i + 1) * 0.002));\n         values[i] = val;\n     }\n\n     return new Vector<T>(values).Normalize();\n }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary><blockquote>\n\n`21-33`: **Document the stub implementation and clarify the unused modelPath parameter.**\n\nThe constructor accepts and validates `modelPath` but never uses it to load an actual ONNX model. The implementation uses a deterministic hash-based approach identical to the other embedding models, making this a placeholder rather than a true ONNX runtime integration.\n\nConsider either:\n1. Adding XML documentation to clarify this is a stub/placeholder implementation pending ONNX integration, or\n2. Removing the `modelPath` parameter if it won't be used until a future implementation.\n\n---\n\n`49-63`: **Extract duplicated GetDeterministicHash to a shared utility.**\n\nThis method is duplicated identically across all four embedding model implementations (HuggingFaceEmbeddingModel, LocalTransformerEmbedding, OpenAIEmbeddingModel, and ONNXSentenceTransformer). Consider extracting it to either:\n1. A protected method in `EmbeddingModelBase<T>`, or\n2. A static utility class (e.g., `StringHashHelper`).\n\nThis eliminates duplication and ensures consistent hashing behavior across all embedding models.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (1)</summary><blockquote>\n\n`51-65`: **Consider extracting duplicated hash function.**\n\nThe `GetDeterministicHash` method is duplicated across HuggingFaceEmbeddingModel, LocalTransformerEmbedding, ONNXSentenceTransformer, and OpenAIEmbeddingModel with identical implementations.\n\n\n\nConsider moving this to a shared utility class or to `EmbeddingModelBase<T>` as a protected helper:\n\n```csharp\n// In EmbeddingModelBase<T>\nprotected static int GetDeterministicHash(string text)\n{\n    if (string.IsNullOrEmpty(text))\n        return 0;\n\n    unchecked\n    {\n        int hash = 23;\n        foreach (char c in text)\n        {\n            hash = hash * 31 + c;\n        }\n        return hash;\n    }\n}\n```\n\nThen remove the duplicates from all four embedding model classes.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (2)</summary><blockquote>\n\n`48-48`: **Inconsistent tokenization between query and sentences.**\n\nLine 48 tokenizes the query using only whitespace delimiters `[' ', '\\t', '\\n', '\\r']`, but `ScoreSentence` (line 107) tokenizes sentences using both whitespace and punctuation `[' ', '\\t', '\\n', '\\r', '.', ',', '!', '?']`. This mismatch could reduce matching accuracy.\n\nFor consistency with `RAGMetricBase.GetWords()` and better results, include punctuation in the query tokenization.\n\n\n\nApply this diff:\n\n```diff\n-var queryTokens = new HashSet<string>(query.ToLowerInvariant().Split(new[] { ' ', '\\t', '\\n', '\\r' }, StringSplitOptions.RemoveEmptyEntries));\n+var queryTokens = new HashSet<string>(query.ToLowerInvariant().Split(new[] { ' ', '\\t', '\\n', '\\r', '.', ',', ';', ':', '!', '?' }, StringSplitOptions.RemoveEmptyEntries));\n```\n\n---\n\n`105-115`: **LGTM with optional suggestion for magic numbers.**\n\nThe scoring logic correctly combines match ratio with position bias. The hardcoded weights (0.7 for match ratio, 0.3 for position) are reasonable defaults.\n\n\n\n\nOptionally, consider making these weights configurable via constructor parameters for better flexibility:\n\n```diff\n+private readonly double _matchWeight;\n+private readonly double _positionWeight;\n\n-public AutoCompressor(int maxOutputLength = 500, double compressionRatio = 0.5)\n+public AutoCompressor(int maxOutputLength = 500, double compressionRatio = 0.5, \n+    double matchWeight = 0.7, double positionWeight = 0.3)\n {\n     // existing validation...\n+    _matchWeight = matchWeight;\n+    _positionWeight = positionWeight;\n }\n```\n\nThen update line 114:\n\n```diff\n-return (matchRatio * 0.7) + positionScore;\n+return (matchRatio * _matchWeight) + (positionScore * _positionWeight / 0.3);\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between fb037f7036c63184b2417768a5e0933c503d9233 and 0990756bfaebc406430e06b89f59a191b1f29d3a.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (5)</summary>\n\n* `src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (4)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary>\n\n* `Vector` (39-51)\n* `GetDeterministicHash` (53-67)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `GetDeterministicHash` (51-65)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary>\n\n* `Vector` (39-51)\n* `GetDeterministicHash` (53-67)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (3)</summary>\n\n* `T` (98-108)\n* `IEnumerable` (42-86)\n* `List` (88-96)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (1)</summary>\n\n* `HashSet` (93-102)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `GetDeterministicHash` (51-65)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary>\n\n* `Vector` (39-51)\n* `GetDeterministicHash` (53-67)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary><blockquote>\n\n`22-35`: **LGTM - Constructor validation is solid.**\n\nThe input validation correctly checks for empty model names, positive dimensions, and positive max tokens. The null-coalescing for `apiKey` prevents null reference issues.\n\n---\n\n`37-49`: **Verify stub implementation is intentional.**\n\nThe current implementation generates synthetic embeddings using a mathematical formula rather than calling the HuggingFace API. This makes it suitable for testing but not for production use where semantic similarity is required.\n\n\n\nIs this a temporary stub implementation? If production HuggingFace integration is needed, I can help generate a proper implementation using the HuggingFace Inference API.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (2)</summary><blockquote>\n\n`21-33`: **LGTM - Constructor validation is thorough.**\n\nThe validation properly checks for empty model paths, positive dimensions, and positive max tokens.\n\n---\n\n`35-47`: **Verify stub implementation is intentional.**\n\nThis implementation generates synthetic embeddings using a mathematical formula rather than loading and running a local transformer model. Suitable for testing but not for production semantic search.\n\n\n\nConfirm this is a temporary stub. If real local transformer integration is needed, I can help implement it using ONNX Runtime or similar libraries.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (1)</summary><blockquote>\n\n`117-151`: **LGTM!**\n\nThe sentence splitting implementation correctly handles edge cases including final incomplete sentences and filters out very short fragments (< 10 characters). The character-by-character approach is clear and efficient.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T02:58:04Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "0990756bfaebc406430e06b89f59a191b1f29d3a"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LokE5",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (1)</summary><blockquote>\n\n`111-114`: **Still need to flag fused documents as scored.**\n\n`FuseRankings` writes `doc.RelevanceScore` but never flips `HasRelevanceScore`, so anything consuming the fused list still treats the entries as unscoredΓÇöexactly the issue we flagged earlier. Please set the flag when you assign the score.\n\n```diff\n             foreach (var doc in reranked)\n             {\n                 doc.RelevanceScore = scores[doc.Id];\n+                doc.HasRelevanceScore = true;\n             }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (1)</summary><blockquote>\n\n`49-82`: **Reduce repeated tokenization to cut per-doc overhead.**\n\n`Tokenize(query)` (and even `Tokenize(document)`) runs multiple times per document through `AssessRelevance`, `ComputeSemanticSimilarity`, and `ComputeProximityScore`. That adds a lot of allocations and O(n┬▓) lookups under load. Cache the query tokens once in `Rerank`, pass them into the helpers, and thread the already tokenized document through the scoring pipeline to avoid the repeated work.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (1)</summary><blockquote>\n\n`40-73`: **Cache the query tokens before the per-document loop.**\n\nEach invocation of `ComputeCrossEncoderScore` re-tokenizes the query, so ranking N documents costs O(N┬▓) allocations. Tokenize once in `Rerank`, pass the token list into `ComputeCrossEncoderScore`, and avoid the repeated splits to keep this strategy competitive with the others.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 0990756bfaebc406430e06b89f59a191b1f29d3a and a13deec89ea146c47a5cb614497587d052d2a301.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (4)</summary>\n\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (4)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (2)</summary>\n\n* `RerankingStrategyBase` (13-28)\n* `List` (27-27)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (3)</summary>\n\n* `T` (60-74)\n* `List` (32-58)\n* `List` (76-83)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (3)</summary>\n\n* `T` (69-82)\n* `List` (35-67)\n* `List` (118-125)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LLMBasedReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CrossEncoderReranker.cs (3)</summary>\n\n* `T` (60-74)\n* `List` (32-58)\n* `List` (76-83)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (2)</summary>\n\n* `RerankingStrategyBase` (13-28)\n* `List` (27-27)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (2)</summary>\n\n* `RerankingStrategyBase` (13-28)\n* `List` (27-27)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-145)\n* `Document` (119-122)\n* `Document` (129-133)\n* `Document` (141-144)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T13:12:31Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "COMMENTED",
      "commit": {
        "oid": "a13deec89ea146c47a5cb614497587d052d2a301"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LpMIl",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 55**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (1)</summary><blockquote>\n\n`11-11`: **Critical: Missing generic type parameter causes compilation error.**\n\nThe base class `QueryExpansionBase<T>` is generic (as shown in the provided snippet), but this class inherits from the non-generic form. This will fail to compile.\n\n\n\nApply this diff to add the required generic type parameter:\n\n```diff\n-    public class LearnedSparseEncoderExpansion : QueryExpansionBase\n+    public class LearnedSparseEncoderExpansion<T> : QueryExpansionBase<T>\n+        where T : struct, IComparable, IConvertible, IFormattable\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/SentenceTransformersFineTuner.cs (1)</summary><blockquote>\n\n`13-25`: **Critical: Missing required abstract property implementations.**\n\nThe class extends `EmbeddingModelBase<T>` which declares abstract properties `EmbeddingDimension` and `MaxTokens` that must be implemented. Without these, the code will not compile.\n\nSince this class wraps a base model, delegate these properties to the wrapped model.\n\n\n\nAdd the missing property implementations:\n\n```diff\n     private readonly IEmbeddingModel<T> _baseModel;\n     private readonly Dictionary<string, Vector<T>> _finetuneCache;\n     private bool _isFineTuned;\n+\n+    /// <inheritdoc/>\n+    public override int EmbeddingDimension => _baseModel.EmbeddingDimension;\n+\n+    /// <inheritdoc/>\n+    public override int MaxTokens => _baseModel.MaxTokens;\n\n     public SentenceTransformersFineTuner(IEmbeddingModel<T> baseModel, INormalizer<T>? normalizer = null)\n         : base(normalizer)\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs (1)</summary><blockquote>\n\n`22-60`: **Runtime failure: PaLM embedding endpoint is decommissioned**\n\n`models/embedding-001` now resolves to the retired PaLM stackΓÇöGoogle shut that API down on August 15, 2024, and the `embedding-001` alias itself was deprecated in October 2025. Any call here will 403/404 the moment we hit production, so this class canΓÇÖt ship as-is. Please pivot the implementation (and default model id) to the Gemini embedding family (e.g. `models/gemini-embedding-001`) before exposing it.([ai.google.dev](https://ai.google.dev/palm_docs/deprecation?utm_source=openai))\n\nApply this diff to start the migration:\n\n```diff\n-    /// Embedding model using Google PaLM API for text embeddings\n+    /// Embedding model using the Gemini API for text embeddings\n@@\n-        private const string ApiBaseUrl = \"https://generativelanguage.googleapis.com/v1beta\";\n+        private const string ApiBaseUrl = \"https://generativelanguage.googleapis.com/v1beta\";\n@@\n-        public GooglePalmEmbeddingModel(string apiKey, string model = \"embedding-001\", INormalizer<T>? normalizer = null)\n+        public GooglePalmEmbeddingModel(string apiKey, string model = \"gemini-embedding-001\", INormalizer<T>? normalizer = null)\n```\n\nFollow up by renaming the type and wiring up Gemini-specific request/response handling (model ids, error handling, doc comments).\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (9)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (2)</summary><blockquote>\n\n`27-49`: **Use case-insensitive splitting for AND/OR operators.**\n\nThe current implementation only matches exact case patterns (\" and \", \" AND \", \" or \", \" OR \"). Mixed-case variations like \"And\", \"OR \", or \"aNd\" will not be recognized as operators, potentially missing valid query splits.\n\n\n\nConsider using case-insensitive matching. One approach is to use a Regex split:\n\n```diff\n-var andSplits = query.Split(new[] { \" and \", \" AND \" }, StringSplitOptions.RemoveEmptyEntries);\n+var andSplits = System.Text.RegularExpressions.Regex.Split(query, @\"\\s+and\\s+\", System.Text.RegularExpressions.RegexOptions.IgnoreCase);\n if (andSplits.Length > 1)\n {\n     foreach (var split in andSplits.Take(_maxSubQueries))\n     {\n         if (!string.IsNullOrWhiteSpace(split))\n         {\n             subQueries.Add(split.Trim());\n         }\n     }\n }\n\n-var orSplits = query.Split(new[] { \" or \", \" OR \" }, StringSplitOptions.RemoveEmptyEntries);\n+var orSplits = System.Text.RegularExpressions.Regex.Split(query, @\"\\s+or\\s+\", System.Text.RegularExpressions.RegexOptions.IgnoreCase);\n if (orSplits.Length > 1)\n {\n     foreach (var split in orSplits.Take(_maxSubQueries))\n     {\n         if (!string.IsNullOrWhiteSpace(split))\n         {\n             subQueries.Add(split.Trim());\n         }\n     }\n }\n```\n\n---\n\n`77-77`: **Clarify maxSubQueries behavior in documentation.**\n\nThe method returns up to `maxSubQueries + 1` items (the original query plus up to `maxSubQueries` expansions). This means if `maxSubQueries = 3`, the result contains 4 queries total. This behavior might be unexpected based on the parameter name.\n\n\n\nConsider updating the XML documentation to clarify this behavior:\n\n```diff\n /// <summary>\n-/// Sub-query expansion that breaks complex queries into simpler sub-queries\n+/// Sub-query expansion that breaks complex queries into simpler sub-queries.\n+/// Returns the original query plus up to maxSubQueries additional variations.\n /// </summary>\n```\n\nAlternatively, if the intent is to return a total of `maxSubQueries` (including the original), adjust line 77:\n\n```diff\n-return Task.FromResult(subQueries.Distinct().Take(_maxSubQueries + 1).ToList());\n+return Task.FromResult(subQueries.Distinct().Take(_maxSubQueries).ToList());\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (1)</summary><blockquote>\n\n`44-70`: **Remove unused variable `headerMatch`.**\n\nThe `headerMatch` variable is declared and assigned but never read. It has no effect on the program's behavior and can be safely removed.\n\n\n\nApply this diff:\n\n```diff\n     foreach (var line in lines)\n     {\n-        var headerMatch = false;\n         foreach (var (level, pattern) in _headerPatterns.OrderBy(x => x.Key))\n         {\n             var match = Regex.Match(line, pattern, RegexOptions.Multiline);\n             if (match.Success)\n             {\n                 if (currentSection.Count > 0)\n                 {\n                     chunks.AddRange(CreateChunksFromSection(\n                         string.Join(Environment.NewLine, currentSection),\n                         currentHeaders,\n                         metadata,\n                         ref chunkIndex));\n                     currentSection.Clear();\n                 }\n\n                 while (currentHeaders.Count > 0 && currentHeaders.Peek().level >= level)\n                 {\n                     currentHeaders.Pop();\n                 }\n                 currentHeaders.Push((level, match.Groups[1].Value));\n-                headerMatch = true;\n                 break;\n             }\n         }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (2)</summary><blockquote>\n\n`20-30`: **Add XML documentation for public method.**\n\nThis public method lacks XML documentation explaining its purpose, parameters, and exceptions.\n\n\n\n```diff\n+        /// <summary>\n+        /// Trains the sparse encoder with term-to-weight mappings\n+        /// </summary>\n+        /// <param name=\"termWeights\">Dictionary mapping terms to their learned weights</param>\n+        /// <exception cref=\"ArgumentNullException\">Thrown when termWeights is null</exception>\n         public void TrainWeights(Dictionary<string, double> termWeights)\n```\n\n---\n\n`49-49`: **Make magic numbers configurable.**\n\nThe weight threshold `0.1` (line 49) and max terms limit `20` (line 67) are hard-coded. These should be configurable to allow tuning for different use cases.\n\n\n\n```diff\n+        private readonly double _weightThreshold;\n+        private readonly int _maxExpandedTerms;\n+\n-        public LearnedSparseEncoderExpansion()\n+        public LearnedSparseEncoderExpansion(double weightThreshold = 0.1, int maxExpandedTerms = 20)\n         {\n+            _weightThreshold = weightThreshold;\n+            _maxExpandedTerms = maxExpandedTerms;\n             _termWeights = new Dictionary<string, double>();\n         }\n```\n\nThen use these fields in the expansion logic:\n\n```diff\n-                        if (relatedTerm != normalizedTerm && relatedWeight > 0.1)\n+                        if (relatedTerm != normalizedTerm && relatedWeight > _weightThreshold)\n```\n\n```diff\n             var sortedTerms = expandedTerms\n                 .OrderByDescending(x => x.Value)\n-                .Take(20)\n+                .Take(_maxExpandedTerms)\n```\n\n\nAlso applies to: 67-67\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (1)</summary><blockquote>\n\n`71-83`: **Consider limiting query expansion to prevent excessive length.**\n\nThe method adds up to 2 synonyms per term without an upper bound on the total query length. For queries with many terms, this could produce very long queries (e.g., 5 terms ├ù 3 words per term = 15-word query) that may dilute relevance.\n\nIf retrieval performance degrades with long queries in your use case, consider adding a maximum total length constraint.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs (1)</summary><blockquote>\n\n`45-46`: **Consider enhancing error handling for better diagnostics.**\n\n`EnsureSuccessStatusCode()` throws a generic `HttpRequestException`. Consider handling specific status codes (401 for invalid API key, 429 for rate limits, 5xx for retryable errors) to provide more actionable error messages.\n\n\n\nExample enhancement:\n\n```csharp\nvar response = await _httpClient.PostAsync($\"{ApiBaseUrl}/embeddings\", content);\n\nif (!response.IsSuccessStatusCode)\n{\n    var errorContent = await response.Content.ReadAsStringAsync();\n    throw response.StatusCode switch\n    {\n        System.Net.HttpStatusCode.Unauthorized => new InvalidOperationException(\"Invalid Voyage AI API key\"),\n        System.Net.HttpStatusCode.TooManyRequests => new InvalidOperationException(\"Voyage AI rate limit exceeded\"),\n        _ => new HttpRequestException($\"Voyage AI API error ({response.StatusCode}): {errorContent}\")\n    };\n}\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (2)</summary><blockquote>\n\n`20-24`: **Consider adding parameter validation.**\n\nThe constructor accepts `chunkSize` and `chunkOverlap` without validation. Consider validating:\n- `chunkSize > 0`\n- `chunkOverlap >= 0`\n- `chunkOverlap < chunkSize`\n\nThis would prevent invalid configurations and improve robustness.\n\n\n\n```diff\n public SentenceChunkingStrategy(int chunkSize = 1000, int chunkOverlap = 200)\n {\n+    if (chunkSize <= 0)\n+        throw new ArgumentOutOfRangeException(nameof(chunkSize), \"Chunk size must be greater than zero.\");\n+    if (chunkOverlap < 0)\n+        throw new ArgumentOutOfRangeException(nameof(chunkOverlap), \"Chunk overlap must be non-negative.\");\n+    if (chunkOverlap >= chunkSize)\n+        throw new ArgumentException(\"Chunk overlap must be less than chunk size.\");\n+\n     _chunkSize = chunkSize;\n     _chunkOverlap = chunkOverlap;\n }\n```\n\n---\n\n`9-11`: **Enhance XML documentation to meet PR objectives.**\n\nThe PR objectives mention \"comprehensive XML documentation\" as a requirement. Consider documenting:\n- Constructor parameters (`chunkSize`, `chunkOverlap`) with their purpose and defaults\n- How overlap between chunks works\n- Regex pattern used for sentence detection and its limitations\n- Behavior when individual sentences exceed the chunk size limit\n\n\n\nExample enhancement:\n\n```diff\n /// <summary>\n-/// Sentence-based chunking strategy that preserves sentence boundaries\n+/// Sentence-based chunking strategy that preserves sentence boundaries.\n+/// Uses regex-based sentence detection to split text while maintaining semantic coherence.\n+/// Note: Sentences exceeding the chunk size will be included in their own chunk without splitting.\n /// </summary>\n+/// <remarks>\n+/// <para>The sentence detection regex may not handle all edge cases, including:</para>\n+/// <list type=\"bullet\">\n+/// <item>Abbreviations (Dr., Mr., etc.)</item>\n+/// <item>Sentences not starting with capital letters</item>\n+/// <item>Text without sentence-ending punctuation</item>\n+/// </list>\n+/// </remarks>\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between a13deec89ea146c47a5cb614497587d052d2a301 and 602cbe2c5622c74ada0ae3dc576d5d45f9130d35.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (37)</summary>\n\n* `src/RAG/ContextCompression/ContextCompressorBase.cs` (1 hunks)\n* `src/RAG/ContextCompression/DocumentSummarizer.cs` (1 hunks)\n* `src/RAG/ContextCompression/LLMContextCompressor.cs` (1 hunks)\n* `src/RAG/QueryExpansion/HyDEQueryExpansion.cs` (1 hunks)\n* `src/RAG/QueryExpansion/LLMQueryExpansion.cs` (1 hunks)\n* `src/RAG/QueryExpansion/QueryExpansionBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/MultiModalEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/SentenceTransformersFineTuner.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Models/Document.cs` (4 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/CohereReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/DiversityReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (37)</summary>\n\n<details>\n<summary>src/RAG/QueryExpansion/QueryExpansionBase.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RAG/QueryExpansion/HyDEQueryExpansion.cs (1)</summary>\n\n* `List` (18-30)\n\n</details>\n<details>\n<summary>src/RAG/QueryExpansion/LLMQueryExpansion.cs (1)</summary>\n\n* `List` (17-33)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RAG/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (3-17)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (1)</summary>\n\n* `Task` (32-78)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (1)</summary>\n\n* `Task` (20-78)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (4)</summary>\n\n* `Task` (43-70)\n* `Task` (72-115)\n* `Task` (117-142)\n* `Task` (144-172)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (5)</summary>\n\n* `Task` (36-67)\n* `Task` (69-92)\n* `Task` (94-139)\n* `Task` (141-161)\n* `Task` (163-200)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (2)</summary>\n\n* `Task` (27-43)\n* `Task` (45-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `Task` (25-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (2)</summary>\n\n* `Task` (44-72)\n* `Task` (74-106)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RAG/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (3-17)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (1)</summary>\n\n* `Task` (32-78)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (1)</summary>\n\n* `Task` (32-63)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (2)</summary>\n\n* `List` (21-56)\n* `List` (58-82)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (1)</summary>\n\n* `List` (93-154)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs (1)</summary>\n\n* `Task` (34-62)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs (1)</summary>\n\n* `Task` (33-60)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RAG/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (3-17)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (1)</summary>\n\n* `Task` (32-63)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (4)</summary>\n\n* `Task` (43-70)\n* `Task` (72-115)\n* `Task` (117-142)\n* `Task` (144-172)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `Task` (25-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (1)</summary>\n\n* `T` (63-84)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary>\n\n* `List` (24-48)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (2)</summary>\n\n* `T` (63-84)\n* `Task` (25-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (4)</summary>\n\n* `Task` (43-70)\n* `Task` (72-115)\n* `Task` (117-142)\n* `Task` (144-172)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (4)</summary>\n\n* `Task` (36-67)\n* `Task` (69-92)\n* `Task` (94-139)\n* `Task` (141-161)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `Task` (25-29)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs (2)</summary>\n\n* `Task` (34-62)\n* `Dispose` (64-71)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs (2)</summary>\n\n* `Task` (34-61)\n* `Dispose` (63-70)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (3)</summary>\n\n* `List` (39-54)\n* `AddEdge` (26-37)\n* `TraverseGraph` (56-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (5)</summary>\n\n* `Task` (36-67)\n* `Task` (69-92)\n* `Task` (94-139)\n* `Task` (141-161)\n* `Task` (163-200)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (2)</summary>\n\n* `Task` (27-43)\n* `Task` (45-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `Task` (25-29)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (2)</summary>\n\n* `List` (33-85)\n* `List` (87-161)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/SentenceTransformersFineTuner.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/MultiModalEmbeddingModel.cs (3)</summary>\n\n* `Vector` (75-94)\n* `Task` (40-45)\n* `Task` (47-73)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RAG/ContextCompression/ContextCompressorBase.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RAG/ContextCompression/DocumentSummarizer.cs (1)</summary>\n\n* `List` (17-40)\n\n</details>\n<details>\n<summary>src/RAG/ContextCompression/LLMContextCompressor.cs (1)</summary>\n\n* `List` (17-46)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (6)</summary>\n\n* `Task` (35-65)\n* `Task` (67-90)\n* `Task` (92-147)\n* `Task` (149-156)\n* `Task` (158-182)\n* `ConvertVectorToDoubleArray` (184-192)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/DiversityReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (2)</summary>\n\n* `RerankingStrategyBase` (13-28)\n* `List` (27-27)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CohereReranker.cs (1)</summary>\n\n* `Task` (36-70)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs (1)</summary>\n\n* `Task` (16-50)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (2)</summary>\n\n* `RerankingStrategyBase` (13-28)\n* `List` (27-27)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CohereReranker.cs (1)</summary>\n\n* `Task` (36-70)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary>\n\n* `List` (24-48)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary>\n\n* `List` (24-49)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary>\n\n* `List` (24-49)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/MultiModalEmbeddingModel.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs (1)</summary>\n\n* `Task` (34-62)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/SentenceTransformersFineTuner.cs (3)</summary>\n\n* `Task` (27-42)\n* `Task` (44-73)\n* `Vector` (75-87)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RAG/ContextCompression/LLMContextCompressor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RAG/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (5-25)\n* `List` (8-19)\n* `List` (21-24)\n\n</details>\n<details>\n<summary>src/RAG/ContextCompression/DocumentSummarizer.cs (1)</summary>\n\n* `List` (17-40)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (1)</summary>\n\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (2)</summary>\n\n* `Document` (109-113)\n* `Document` (210-210)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (3)</summary>\n\n* `T` (75-86)\n* `T` (91-103)\n* `T` (108-146)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `MathHelper` (16-987)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (1)</summary>\n\n* `List` (17-84)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary>\n\n* `AddEdge` (32-42)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (2)</summary>\n\n* `List` (26-89)\n* `List` (91-111)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RAG/ContextCompression/DocumentSummarizer.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RAG/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (5-25)\n* `List` (8-19)\n* `List` (21-24)\n\n</details>\n<details>\n<summary>src/RAG/ContextCompression/LLMContextCompressor.cs (1)</summary>\n\n* `List` (17-46)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CohereReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (2)</summary>\n\n* `RerankingStrategyBase` (13-28)\n* `List` (27-27)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RAG/QueryExpansion/HyDEQueryExpansion.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RAG/QueryExpansion/QueryExpansionBase.cs (3)</summary>\n\n* `QueryExpansionBase` (3-17)\n* `List` (6-14)\n* `List` (16-16)\n\n</details>\n<details>\n<summary>src/RAG/QueryExpansion/LLMQueryExpansion.cs (1)</summary>\n\n* `List` (17-33)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (3)</summary>\n\n* `Task` (36-67)\n* `Task` (69-92)\n* `Task` (94-139)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (27-157)\n* `Document` (131-134)\n* `Document` (141-145)\n* `Document` (153-156)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RAG/QueryExpansion/LLMQueryExpansion.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RAG/QueryExpansion/QueryExpansionBase.cs (3)</summary>\n\n* `QueryExpansionBase` (3-17)\n* `List` (6-14)\n* `List` (16-16)\n\n</details>\n<details>\n<summary>src/RAG/QueryExpansion/HyDEQueryExpansion.cs (1)</summary>\n\n* `List` (18-30)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs (2)</summary>\n\n* `Task` (33-60)\n* `Dispose` (62-69)\n\n</details>\n\n</blockquote></details>\n\n</details><details>\n<summary>≡ƒ¬¢ GitHub Actions: Build</summary>\n\n<details>\n<summary>src/RAG/ContextCompression/ContextCompressorBase.cs</summary>\n\n[error] 9-9: dotnet build failed: CS0246: The type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Actions: Quality Gates (.NET)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs</summary>\n\n[error] 9-9: CS0246: The type or namespace name 'StackExchange' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Check: Build All Frameworks</summary>\n\n<details>\n<summary>src/RAG/ContextCompression/ContextCompressorBase.cs</summary>\n\n[failure] 21-21: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 22-22: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 8-8: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 9-9: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs</summary>\n\n[failure] 24-24: \n'ChainOfThoughtRetriever<T>.RetrieveCore(string, int)': no suitable method found to override\n\n---\n\n[failure] 15-15: \n'ChainOfThoughtRetriever<T>.NumOps': cannot override because 'RetrieverBase<T>.NumOps' is not a property\n\n</details>\n<details>\n<summary>src/RAG/ContextCompression/LLMContextCompressor.cs</summary>\n\n[failure] 17-17: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 18-18: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n<details>\n<summary>src/RAG/ContextCompression/DocumentSummarizer.cs</summary>\n\n[failure] 17-17: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 18-18: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Check: Publish Size Analysis</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs</summary>\n\n[failure] 6-6: \nThe type or namespace name 'SQLite' does not exist in the namespace 'System.Data' (are you missing an assembly reference?)\n\n</details>\n<details>\n<summary>src/RAG/ContextCompression/ContextCompressorBase.cs</summary>\n\n[failure] 21-21: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 22-22: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 8-8: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 9-9: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs</summary>\n\n[failure] 9-9: \nThe type or namespace name 'StackExchange' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n<details>\n<summary>src/RAG/ContextCompression/LLMContextCompressor.cs</summary>\n\n[failure] 17-17: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 18-18: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n<details>\n<summary>src/RAG/ContextCompression/DocumentSummarizer.cs</summary>\n\n[failure] 17-17: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n---\n\n[failure] 18-18: \nThe type or namespace name 'Document<>' could not be found (are you missing a using directive or an assembly reference?)\n\n</details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (11)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (1)</summary><blockquote>\n\n`21-56`: **AI summary is inconsistent with the implementation.**\n\nThe AI summary claims this method \"yields chunks with StartPosition and EndPosition, applying overlap logic,\" but the actual implementation does neither. There is no position tracking and no overlap logic (as flagged separately).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (1)</summary><blockquote>\n\n`65-69`: **Verify that term reversal produces useful query variations.**\n\nSimply reversing term order (e.g., \"How to cook pasta\" ΓåÆ \"pasta cook to How\") often produces grammatically nonsensical queries that may hurt retrieval performance rather than improve it. \n\nConsider whether this transformation actually benefits your use case, or if alternative reordering strategies (e.g., moving key nouns to the front while preserving some grammatical structure) would be more effective.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (2)</summary><blockquote>\n\n`125-133`: **LGTM: Vector conversion helper is well-implemented.**\n\nThe helper method correctly converts generic `Vector<T>` to `double[]` for Redis storage using `Convert.ToDouble`, which handles the generic numeric type conversion appropriately.\n\n---\n\n`135-142`: **LGTM: Dispose pattern correctly implemented.**\n\nThe method properly disposes the Redis connection and calls the base class disposal, following the standard Dispose pattern.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/SentenceTransformersFineTuner.cs (1)</summary><blockquote>\n\n`89-97`: **Cache management methods look good.**\n\nThe cache management methods (`ClearFineTuneCache`, `GetCacheSize`) and `IsFineTuned` property provide useful monitoring and debugging capabilities.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs (1)</summary><blockquote>\n\n`34-70`: **Implementation complete - past review concerns resolved.**\n\nThe Voyage AI API integration is now fully implemented with proper HTTP calls, JSON parsing, and vector conversion. The previous `NotImplementedException` issues mentioned in past reviews have been resolved.\n\nThe implementation follows the established pattern used in `CohereEmbeddingModel` and `GooglePalmEmbeddingModel`, maintaining consistency across the codebase.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (2)</summary><blockquote>\n\n`56-66`: **Well-implemented overlap logic that preserves sentence boundaries.**\n\nThe overlap calculation correctly collects complete sentences from the end of the previous chunk, maintaining semantic coherence. This is a strength of the sentence-based approach compared to word-based or character-based overlap.\n\n---\n\n`91-111`: **Good defensive coding with fallback handling.**\n\nThe `SplitIntoSentences` method correctly handles edge cases:\n- Trims whitespace from each sentence\n- Filters out empty results\n- Falls back to treating the entire text as one sentence if no boundaries are detected\n\nThis prevents errors when processing text without standard sentence punctuation.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (1)</summary><blockquote>\n\n`39-75`: **Traversal logic looks solid**\n\nDepth-limited expansion with deduping per document id keeps the graph walk bounded and avoids duplicatesΓÇönice, clean implementation.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (1)</summary><blockquote>\n\n`26-67`: **Adaptive loop reads well**\n\nThe corrective loop is easy to follow, keeps attempts bounded, and reuses the existing retriever cleanly. Looks good.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary><blockquote>\n\n`24-48`: **Multi-step retrieval is tidy**\n\nAppreciate the dedupe guard plus lightweight query expansionΓÇöbehavior aligns with FLARE expectations.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T13:49:55Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "602cbe2c5622c74ada0ae3dc576d5d45f9130d35"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LpN1b",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Review continued from previous batch...**",
      "submittedAt": "2025-11-04T13:51:10Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "602cbe2c5622c74ada0ae3dc576d5d45f9130d35"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LpeaU",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 4**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (1)</summary><blockquote>\n\n`133-138`: **Use `NumOps` when deriving confidence.**\n\nReintroducing `Convert.ToDouble` means confidence scoring still crashes for valid numeric types (e.g., `Complex<T>`). Route the conversion through `NumOps` just like the retrievers.\n\n```diff\n-        var avgScore = contextList\n-            .Where(d => d.HasRelevanceScore)\n-            .Select(d => Convert.ToDouble(d.RelevanceScore))\n+        var avgScore = contextList\n+            .Where(d => d.HasRelevanceScore)\n+            .Select(d => NumOps.ToDouble(d.RelevanceScore))\n             .DefaultIfEmpty(0.5)\n             .Average();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary><blockquote>\n\n`38-44`: **Use `NumOps.ToDouble` when ranking chain-of-thought results.**\n\n`Convert.ToDouble` explodes for supported T values like `Complex<T>`. Stick to the numeric operations provided by the base class.\n\n```diff\n-            return results.OrderByDescending(d => Convert.ToDouble(d.RelevanceScore)).Take(topK).ToList();\n+            return results\n+                .OrderByDescending(d => NumOps.ToDouble(d.RelevanceScore))\n+                .Take(topK)\n+                .ToList();\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 602cbe2c5622c74ada0ae3dc576d5d45f9130d35 and 33a79e89f3137dc80c940c48d7ab74f127dd4d91.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (6)</summary>\n\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs` (5 hunks)\n* `src/RetrievalAugmentedGeneration/Models/Document.cs` (4 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (6)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (1)</summary>\n\n* `T` (63-84)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary>\n\n* `IEnumerable` (21-45)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary>\n\n* `IEnumerable` (21-46)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary>\n\n* `IEnumerable` (21-45)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary>\n\n* `AddEdge` (32-42)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary>\n\n* `IEnumerable` (21-46)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (1)</summary>\n\n* `IEnumerable` (23-36)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (6)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (2)</summary>\n\n* `Document` (109-113)\n* `Document` (210-210)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (1)</summary>\n\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/DiversityReranker.cs (1)</summary>\n\n* `T` (189-218)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (3)</summary>\n\n* `T` (75-86)\n* `T` (91-103)\n* `T` (108-146)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `MathHelper` (16-987)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (1)</summary><blockquote>\n\n`117-128`: **LGTM on the document enhancements.**\n\nEmbedding support and the explicit relevance score flag integrate cleanly into the generic model.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T14:03:05Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "33a79e89f3137dc80c940c48d7ab74f127dd4d91"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87Lp3w7",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 32**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (41)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (2)</summary><blockquote>\n\n`1-4`: **Remove redundant using statement.**\n\nThe using directive on line 2 imports the same namespace declared on line 4, making it redundant.\n\n\nApply this diff:\n\n```diff\n using AiDotNet.Interfaces;\n-using AiDotNet.RetrievalAugmentedGeneration.QueryExpansion;\n \n namespace AiDotNet.RetrievalAugmentedGeneration.QueryExpansion;\n```\n\n---\n\n`14-41`: **Add missing generic type parameter to class declaration.**\n\nThe class is missing the generic type parameter `<T>` but references it throughout:\n- Line 21: XML documentation references `MultiQueryExpansion{T}`\n- Line 31: Constructor parameter uses `INumericOperations<T>` where `T` is undefined\n- Line 32: Attempts to pass to generic base class `QueryExpansionBase<T>`\n\nThis will cause compilation errors. The relevant code snippet shows that `QueryExpansionBase<T>` requires a generic type parameter with constraints.\n\n\nApply this diff:\n\n```diff\n /// <summary>\n /// Multi-query expansion that generates multiple query variations from different perspectives.\n /// </summary>\n /// <typeparam name=\"T\">The numeric data type used for calculations.</typeparam>\n /// <remarks>\n /// Creates multiple versions of the input query from different angles or perspectives,\n /// then retrieves documents for each variation and merges the results.\n /// </remarks>\n-public class MultiQueryExpansion : QueryExpansionBase\n+public class MultiQueryExpansion<T> : QueryExpansionBase<T>\n+    where T : struct, IComparable, IConvertible, IFormattable\n {\n     private readonly string _llmEndpoint;\n     private readonly string _llmApiKey;\n     private readonly int _numVariations;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (1)</summary><blockquote>\n\n`31-47`: **Use consistent string validation in constructor.**\n\nThe constructor validates `llmEndpoint` and `llmApiKey` with null checks only, but `RetrieveAndAnswer` uses `IsNullOrWhiteSpace` for the `query` parameter (line 54). Empty or whitespace-only strings would pass constructor validation but likely cause issues when used with the LLM API.\n\n\n\n\nApply this diff to use consistent validation:\n\n```diff\n-        _llmEndpoint = llmEndpoint ?? throw new ArgumentNullException(nameof(llmEndpoint));\n-        _llmApiKey = llmApiKey ?? throw new ArgumentNullException(nameof(llmApiKey));\n+        if (string.IsNullOrWhiteSpace(llmEndpoint))\n+            throw new ArgumentException(\"LLM endpoint cannot be null or whitespace\", nameof(llmEndpoint));\n+        if (string.IsNullOrWhiteSpace(llmApiKey))\n+            throw new ArgumentException(\"API key cannot be null or whitespace\", nameof(llmApiKey));\n+            \n+        _llmEndpoint = llmEndpoint;\n+        _llmApiKey = llmApiKey;\n         _baseRetriever = baseRetriever ?? throw new ArgumentNullException(nameof(baseRetriever));\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (6)</summary><blockquote>\n\n`27-36`: **Critical: Constructor calls non-existent base constructor and VectorDimension property is not implemented.**\n\nThe base class `DocumentStoreBase<T>` has no constructor accepting parametersΓÇöit only has an implicit parameterless constructor (DocumentStoreBase.cs lines 28-348). This code will not compile. Additionally, the `vectorDimension` parameter is not stored, and the required abstract `VectorDimension` property is not implemented.\n\n\n\n\nRemove the base constructor call and `numericOperations` parameter (use the static `NumOps` field from the base class instead), store `vectorDimension` in a private field, and implement the `VectorDimension` property:\n\n```diff\n+    private readonly int _vectorDimension;\n+\n     public RedisVLDocumentStore(\n         string connectionString,\n         string indexName,\n-        int vectorDimension,\n-        INumericOperations<T> numericOperations)\n-        : base(vectorDimension, numericOperations)\n+        int vectorDimension)\n     {\n         _connectionString = connectionString ?? throw new ArgumentNullException(nameof(connectionString));\n         _indexName = indexName ?? throw new ArgumentNullException(nameof(indexName));\n+        _vectorDimension = vectorDimension;\n     }\n+\n+    public override int VectorDimension => _vectorDimension;\n```\n\n---\n\n`41-48`: **Critical: AddDocument method doesn't exist in base class; implement AddCore instead.**\n\nThe base class `DocumentStoreBase<T>` does not have an `AddDocument` method to override. The correct pattern is to implement the abstract `AddCore(VectorDocument<T>)` method, which is called by the base class's non-virtual `Add` method after validation.\n\n\n\n\nReplace with the correct implementation:\n\n```diff\n-    /// <summary>\n-    /// Adds a document to the Redis index.\n-    /// </summary>\n-    public override void AddDocument(Document<T> document)\n+    protected override void AddCore(VectorDocument<T> vectorDocument)\n     {\n-        if (document == null)\n-            throw new ArgumentNullException(nameof(document));\n-\n         // TODO: Implement Redis vector indexing\n         throw new NotImplementedException(\"Redis integration requires StackExchange.Redis implementation\");\n     }\n```\n\n---\n\n`53-63`: **Critical: GetSimilar is non-virtual; implement GetSimilarCore instead.**\n\nThe base class's `GetSimilar` method is non-virtual and cannot be overridden. You must implement the abstract `GetSimilarCore(Vector<T> queryVector, int topK, Dictionary<string, object> metadataFilters)` method instead.\n\n\n\n\nReplace with the correct signature:\n\n```diff\n-    /// <summary>\n-    /// Retrieves documents similar to the query vector.\n-    /// </summary>\n-    public override IEnumerable<Document<T>> GetSimilar(Vector<T> queryVector, int topK)\n+    protected override IEnumerable<Document<T>> GetSimilarCore(Vector<T> queryVector, int topK, Dictionary<string, object> metadataFilters)\n     {\n-        if (queryVector == null)\n-            throw new ArgumentNullException(nameof(queryVector));\n-\n-        if (topK <= 0)\n-            throw new ArgumentOutOfRangeException(nameof(topK), \"topK must be positive\");\n-\n         // TODO: Implement Redis vector search\n         throw new NotImplementedException(\"Redis integration requires StackExchange.Redis implementation\");\n     }\n```\n\n---\n\n`68-72`: **Critical: GetAllDocuments is not part of the base class or interface.**\n\nThe `GetAllDocuments` method does not exist in `IDocumentStore<T>` or `DocumentStoreBase<T>`, so it cannot be overridden. Either remove the `override` keyword to make it a new public method specific to this implementation, or remove the method entirely if it's not needed.\n\n\n\n\nRemove the `override` keyword:\n\n```diff\n-    /// <summary>\n-    /// Gets all documents from the index.\n-    /// </summary>\n-    public override IEnumerable<Document<T>> GetAllDocuments()\n+    public IEnumerable<Document<T>> GetAllDocuments()\n     {\n         // TODO: Implement Redis scan operation\n         throw new NotImplementedException(\"Redis integration requires StackExchange.Redis implementation\");\n     }\n```\n\n---\n\n`77-77`: **DocumentCount placeholder breaks base class validation.**\n\nReturning `0` causes dimension validation to be skipped in `DocumentStoreBase<T>.ValidateVectorDocument`, which checks `DocumentCount > 0` before validating vector dimensions. When implementing Redis support, ensure this queries the actual document count.\n\n\n\n\nUpdate to a proper implementation or expand the TODO:\n\n```diff\n-    public override int DocumentCount => 0; // TODO: Implement via Redis\n+    public override int DocumentCount\n+    {\n+        get\n+        {\n+            // TODO: Query actual document count from Redis (e.g., FT.INFO command)\n+            // Returning 0 as placeholder - dimension validation will be skipped\n+            return 0;\n+        }\n+    }\n```\n\n---\n\n`15-78`: **Critical: Missing required abstract method implementations.**\n\nThe class does not implement three required abstract members from `DocumentStoreBase<T>`:\n\n- `GetByIdCore(string documentId)` - retrieve document by ID\n- `RemoveCore(string documentId)` - remove document and return success status  \n- `Clear()` - remove all documents\n\n\n\n\nAdd these implementations:\n\n```diff\n+    protected override Document<T>? GetByIdCore(string documentId)\n+    {\n+        // TODO: Implement Redis document lookup by key\n+        throw new NotImplementedException(\"Redis integration requires StackExchange.Redis implementation\");\n+    }\n+\n+    protected override bool RemoveCore(string documentId)\n+    {\n+        // TODO: Implement Redis document removal\n+        throw new NotImplementedException(\"Redis integration requires StackExchange.Redis implementation\");\n+    }\n+\n+    public override void Clear()\n+    {\n+        // TODO: Implement clearing all documents from Redis index\n+        throw new NotImplementedException(\"Redis integration requires StackExchange.Redis implementation\");\n+    }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary><blockquote>\n\n`44-59`: **NotImplementedException prevents usage.**\n\nThis method cannot be used in production as it always throws. The TODO outlines the required LLM integration steps, which remain unimplemented.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary><blockquote>\n\n`48-63`: **NotImplementedException persists despite prior \"addressed\" status.**\n\nThis method still throws `NotImplementedException`, yet past review comments indicate this was addressed in commits 71fdd3b to 0990756. Either the fix was reverted or a different approach was taken. The method remains unusable in production until the FLARE active-retrieval loop (confidence monitoring, dynamic retrieval, context augmentation) is implemented.\n\n\n\n\n\nRun the following to verify if FLARE was implemented in those commits and later changed:\n\n```shell\n#!/bin/bash\n# Check if FLARE implementation existed in the mentioned commits\ngit show 71fdd3b:src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs 2>/dev/null || echo \"Commit 71fdd3b not found or file didn't exist\"\ngit show 0990756:src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs 2>/dev/null || echo \"Commit 0990756 not found or file didn't exist\"\n\n# Check recent history of this file\ngit log --oneline --follow -10 -- src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs (3)</summary><blockquote>\n\n`41-48`: **Implement AddDocument before shipping.**\n\nLine 46 still throws `NotImplementedException`, so any call to `AddDocument` will crash. Please wire this up to insert into SQLite-VSS (or keep the store abstract until the insert path exists).\n\n---\n\n`53-63`: **GetSimilar must execute a real vector search.**\n\nLine 61 throws instead of querying SQLite-VSS, leaving similarity search unusable. Implement the vector search (or clearly disable this store) prior to release.\n\n---\n\n`68-77`: **Finish the read paths.**\n\n`GetAllDocuments` still throws and `DocumentCount` always returns 0, so enumeration and basic metrics break. Please back these with real SQLite queries (or remove the concrete store until ready).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (1)</summary><blockquote>\n\n`2-2`: **Remove redundant using statement.**\n\nLine 2 imports the same namespace declared on line 4. A file does not need to import its own namespace.\n\n\nApply this diff:\n\n```diff\n using AiDotNet.Interfaces;\n-using AiDotNet.RetrievalAugmentedGeneration.QueryExpansion;\n \n namespace AiDotNet.RetrievalAugmentedGeneration.QueryExpansion;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (4)</summary><blockquote>\n\n`46-53`: **Critical: Override `AddCore(VectorDocument<T>)` instead of `AddDocument(Document<T>)`.**\n\nThe base class `DocumentStoreBase<T>` implements a template method pattern where the public `Add(VectorDocument<T>)` method performs validation and then calls the protected abstract `AddCore(VectorDocument<T>)` method. By overriding a non-existent `AddDocument` method with the wrong parameter type, you:\n\n1. Break compilation (no such method exists to override)\n2. Bypass the base class's validation logic\n3. Use the wrong parameter type (`Document<T>` instead of `VectorDocument<T>`)\n\nSee `AzureSearchDocumentStore.cs` lines 69-74 for the correct pattern.\n\n\n\n\nReplace the current method with:\n\n```diff\n-    /// <summary>\n-    /// Adds a document to the Elasticsearch index.\n-    /// </summary>\n-    public override void AddDocument(Document<T> document)\n-    {\n-        if (document == null)\n-            throw new ArgumentNullException(nameof(document));\n-\n-        // TODO: Implement Elasticsearch indexing via REST API\n-        throw new NotImplementedException(\"Elasticsearch integration requires HTTP client implementation\");\n-    }\n+    /// <summary>\n+    /// Core logic for adding a single vector document.\n+    /// </summary>\n+    protected override void AddCore(VectorDocument<T> vectorDocument)\n+    {\n+        // TODO: Implement Elasticsearch indexing via REST API\n+        _documentCount++;\n+    }\n```\n\n---\n\n`58-68`: **Critical: Override `GetSimilarCore` with metadata filters instead of `GetSimilar`.**\n\nThe base class provides a public `GetSimilar(Vector<T>, int)` method that handles validation and delegates to `GetSimilarWithFilters`, which then calls the protected abstract `GetSimilarCore(Vector<T>, int, Dictionary<string, object>)`. By overriding `GetSimilar` directly, you:\n\n1. Bypass the base class's validation logic for query vectors and topK\n2. Lose metadata filtering support that the base class provides\n3. Duplicate validation that the base already performs\n\nSee `AzureSearchDocumentStore.cs` lines 79-84 and `DocumentStoreBase.cs` lines 179-194 for the correct pattern.\n\n\n\n\nReplace the current method with:\n\n```diff\n-    /// <summary>\n-    /// Retrieves documents similar to the query vector using k-NN search.\n-    /// </summary>\n-    public override IEnumerable<Document<T>> GetSimilar(Vector<T> queryVector, int topK)\n-    {\n-        if (queryVector == null)\n-            throw new ArgumentNullException(nameof(queryVector));\n-\n-        if (topK <= 0)\n-            throw new ArgumentOutOfRangeException(nameof(topK), \"topK must be positive\");\n-\n-        // TODO: Implement Elasticsearch k-NN search via REST API\n-        throw new NotImplementedException(\"Elasticsearch integration requires HTTP client implementation\");\n-    }\n+    /// <summary>\n+    /// Core logic for similarity search with optional filtering.\n+    /// </summary>\n+    protected override IEnumerable<Document<T>> GetSimilarCore(Vector<T> queryVector, int topK, Dictionary<string, object> metadataFilters)\n+    {\n+        // TODO: Implement Elasticsearch k-NN search via REST API with metadata filtering\n+        return Enumerable.Empty<Document<T>>();\n+    }\n```\n\n---\n\n`73-77`: **Critical: Remove `GetAllDocuments()` or make it non-override.**\n\nThe `GetAllDocuments()` method is not declared in `DocumentStoreBase<T>` or `IDocumentStore<T>`, making the `override` keyword invalid and causing a compilation error. Past review comments confirmed this method doesn't exist in the base class hierarchy.\n\nSee the previous review comments on `AzureSearchDocumentStore.cs` which identified this same issue.\n\n\n\n\nEither remove this method entirely or change it from `public override` to `public` (making it a new method specific to this class):\n\n```diff\n-    /// <summary>\n-    /// Gets all documents from the index.\n-    /// </summary>\n-    public override IEnumerable<Document<T>> GetAllDocuments()\n-    {\n-        // TODO: Implement Elasticsearch scroll API for retrieving all documents\n-        throw new NotImplementedException(\"Elasticsearch integration requires HTTP client implementation\");\n-    }\n```\n\nIf other stores need this functionality, consider adding it to the base class/interface first.\n\n---\n\n`82-82`: **Major: Track document count instead of returning hardcoded zero.**\n\nHard-coding `DocumentCount` to zero breaks dimension validation in `DocumentStoreBase<T>.ValidateVectorDocument` (which only validates dimensions when `DocumentCount > 0`) and misleads consumers that rely on this property for capacity checks or monitoring.\n\nSee `AzureSearchDocumentStore.cs` lines 50, 73, and 101-103 for the correct pattern: maintain a `_documentCount` field, increment it in `AddCore`, and decrement it in `RemoveCore`.\n\n\n\n\nUpdate the implementation:\n\n```diff\n+    private int _documentCount;\n+\n     /// <summary>\n     /// Gets the total number of documents in the index.\n     /// </summary>\n-    public override int DocumentCount => 0; // TODO: Implement via Elasticsearch count API\n+    public override int DocumentCount => _documentCount;\n```\n\nThen update `AddCore` to increment and `RemoveCore` to decrement this counter (as shown in earlier comments).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs (1)</summary><blockquote>\n\n`7-14`: **Deprecated API: Google PaLM was shut down; pivot to Gemini embeddings.**\n\nGoogle retired the PaLM API (August 2024) and Vertex AI deprecated the textembedding-gecko family (May 2025). This class will fail when attempting API calls. Previous review comments recommended pivoting to \"currently supported Gemini embedding stack.\"\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (1)</summary><blockquote>\n\n`25-28`: **Add validation for noiseRatio parameter (0-1 range).**\n\nThe constructor does not validate that `noiseRatio` is within the documented range of 0-1. This was previously flagged but remains unaddressed. Invalid values could lead to incorrect evaluation results once the core logic is implemented.\n\n\n\n\nApply this diff to add validation using the inherited `NumOps`:\n\n```diff\n     public NoiseRobustnessMetric(T noiseRatio)\n     {\n+        // Validate noise ratio is between 0 and 1\n+        if (NumOps.Compare(noiseRatio, NumOps.Zero) < 0 || NumOps.Compare(noiseRatio, NumOps.One) > 0)\n+        {\n+            throw new ArgumentOutOfRangeException(nameof(noiseRatio), \"Noise ratio must be between 0 and 1\");\n+        }\n+        \n         _noiseRatio = noiseRatio;\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (6)</summary><blockquote>\n\n`81-81`: **Hardcoded `DocumentCount` return value causes misleading behavior.**\n\nReturning a constant `0` makes the store appear perpetually empty, which:\n- Bypasses base class vector dimension validation (which checks `DocumentCount > 0`)\n- Misleads client code that checks whether the store contains documents\n- Silently fails rather than explicitly indicating the method is incomplete\n\nConsider throwing `NotImplementedException` to make the incomplete state explicit and consistent with other stub methods, or implement it to return the actual count via Qdrant's collection info API.\n\n\n\n```diff\n-    public override int DocumentCount => 0; // TODO: Implement via Qdrant API\n+    /// <summary>\n+    /// Gets the total number of documents in the collection.\n+    /// </summary>\n+    public override int DocumentCount => throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n```\n\n---\n\n`29-40`: **Critical: Invalid base constructor call will not compile.**\n\n`DocumentStoreBase<T>` has no constructor that accepts parametersΓÇöit has only an implicit parameterless constructor. The call to `base(vectorDimension, numericOperations)` on line 35 will cause a compilation error.\n\nAdditionally, the `numericOperations` parameter is unnecessary because `DocumentStoreBase<T>` uses a static `NumOps` field initialized via `MathHelper.GetNumericOperations<T>()`.\n\n\n\nApply this fix:\n\n```diff\n-    public QdrantDocumentStore(\n-        string endpoint,\n-        string collectionName,\n-        string apiKey,\n-        int vectorDimension,\n-        INumericOperations<T> numericOperations)\n-        : base(vectorDimension, numericOperations)\n+    private readonly int _vectorDimension;\n+\n+    public QdrantDocumentStore(\n+        string endpoint,\n+        string collectionName,\n+        string apiKey,\n+        int vectorDimension)\n     {\n         _endpoint = endpoint ?? throw new ArgumentNullException(nameof(endpoint));\n         _collectionName = collectionName ?? throw new ArgumentNullException(nameof(collectionName));\n         _apiKey = apiKey ?? throw new ArgumentNullException(nameof(apiKey));\n+        _vectorDimension = vectorDimension > 0 ? vectorDimension : throw new ArgumentOutOfRangeException(nameof(vectorDimension));\n     }\n+\n+    public override int VectorDimension => _vectorDimension;\n```\n\n---\n\n`72-76`: **Critical: Remove `GetAllDocuments` - not part of the interface.**\n\nNeither `IDocumentStore<T>` nor `DocumentStoreBase<T>` define a `GetAllDocuments` method. Attempting to override a non-existent method will cause a compilation error.\n\nIf you need to retrieve all documents for testing or debugging, implement it as a private helper method rather than a public override. However, retrieving all documents is generally not recommended for production vector stores due to scalability concerns.\n\n\n\n```diff\n-    /// <summary>\n-    /// Gets all documents from the collection.\n-    /// </summary>\n-    public override IEnumerable<Document<T>> GetAllDocuments()\n-    {\n-        // TODO: Implement Qdrant scroll API\n-        throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n-    }\n```\n\n---\n\n`57-67`: **Critical: Implement `GetSimilarCore`, not `GetSimilar`.**\n\n`GetSimilar` in `DocumentStoreBase<T>` is not virtual and cannot be overridden. The base class uses the Template Method pattern where `GetSimilar` delegates to `GetSimilarWithFilters`, which validates inputs and calls the protected abstract `GetSimilarCore(Vector<T>, int, Dictionary<string, object>)`.\n\nBy attempting to override `GetSimilar`, you:\n- Create a compilation error\n- Bypass base class validation\n- Lose metadata filtering support\n- Duplicate validation logic\n\n\n\nApply this fix:\n\n```diff\n-    /// <summary>\n-    /// Retrieves documents similar to the query vector with optional filtering.\n-    /// </summary>\n-    public override IEnumerable<Document<T>> GetSimilar(Vector<T> queryVector, int topK)\n-    {\n-        if (queryVector == null)\n-            throw new ArgumentNullException(nameof(queryVector));\n-\n-        if (topK <= 0)\n-            throw new ArgumentOutOfRangeException(nameof(topK), \"topK must be positive\");\n-\n-        // TODO: Implement Qdrant search via REST API\n-        throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n-    }\n+    /// <summary>\n+    /// Core implementation for similarity search with optional metadata filtering.\n+    /// </summary>\n+    protected override IEnumerable<Document<T>> GetSimilarCore(Vector<T> queryVector, int topK, Dictionary<string, object> metadataFilters)\n+    {\n+        // Validation is already done by base.GetSimilarWithFilters()\n+        // TODO: Implement Qdrant search via REST API with metadata filter support\n+        throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n+    }\n```\n\n---\n\n`15-82`: **Critical: Missing required abstract member implementations.**\n\nThe class is missing four additional abstract members required by `DocumentStoreBase<T>`:\n\n1. **`VectorDimension` property** - Return the stored `_vectorDimension` field (addressed in the constructor fix above)\n2. **`Clear()` method** - Remove all documents from the collection\n3. **`GetByIdCore(string documentId)` method** - Retrieve a document by its ID\n4. **`RemoveCore(string documentId)` method** - Remove a document by its ID\n\nWithout these implementations, the code will not compile.\n\n\n\nAdd these implementations:\n\n```diff\n+    /// <summary>\n+    /// Removes all documents from the Qdrant collection.\n+    /// </summary>\n+    public override void Clear()\n+    {\n+        // TODO: Implement Qdrant collection recreation or batch delete\n+        throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n+    }\n+\n+    /// <summary>\n+    /// Core implementation for retrieving a document by ID.\n+    /// </summary>\n+    protected override Document<T>? GetByIdCore(string documentId)\n+    {\n+        // Validation is already done by base.GetById()\n+        // TODO: Implement Qdrant point retrieval by ID\n+        throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n+    }\n+\n+    /// <summary>\n+    /// Core implementation for removing a document by ID.\n+    /// </summary>\n+    protected override bool RemoveCore(string documentId)\n+    {\n+        // Validation is already done by base.Remove()\n+        // TODO: Implement Qdrant point deletion by ID\n+        throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n+    }\n```\n\n---\n\n`45-52`: **Critical: Implement `AddCore`, not `AddDocument`.**\n\n`DocumentStoreBase<T>` does not have an `AddDocument` method to override. The base class uses the Template Method pattern:\n- Public `Add(VectorDocument<T>)` validates the input\n- Protected abstract `AddCore(VectorDocument<T>)` is implemented by derived classes\n\nAdditionally, the parameter should be `VectorDocument<T>` (which wraps both the document and its embedding), not `Document<T>`.\n\n\n\nApply this fix:\n\n```diff\n-    /// <summary>\n-    /// Adds a document to the Qdrant collection.\n-    /// </summary>\n-    public override void AddDocument(Document<T> document)\n-    {\n-        if (document == null)\n-            throw new ArgumentNullException(nameof(document));\n-\n-        // TODO: Implement Qdrant upsert via REST API\n-        throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n-    }\n+    /// <summary>\n+    /// Core implementation for adding a document to the Qdrant collection.\n+    /// </summary>\n+    protected override void AddCore(VectorDocument<T> vectorDocument)\n+    {\n+        // Validation is already done by base.Add()\n+        // TODO: Implement Qdrant upsert via REST API\n+        throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n+    }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs (1)</summary><blockquote>\n\n`50-51`: **Complete the Voyage AI API integration.**\n\nBoth `Embed` and `EmbedBatch` throw `NotImplementedException`, rendering this model unusable at runtime.\n\n\n\n\nThis issue was previously flagged with detailed implementation guidance. Please refer to past review comments for the complete HTTP client integration requirements.\n\n\nAlso applies to: 62-63\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/MultiModalEmbeddingModel.cs (2)</summary><blockquote>\n\n`41-48`: **Fix overrides to satisfy `EmbeddingModelBase<T>` contract.**\n\n`EmbeddingModelBase<T>` already implements `Embed(string)` and requires you to override `protected abstract Vector<T> EmbedCore(string text)`. Overriding `Embed` here won't compile and leaves the abstract `EmbedCore` unimplemented.\n\n\n\n\nApply this diff:\n\n```diff\n-    public override Vector<T> Embed(string text)\n+    protected override Vector<T> EmbedCore(string text)\n     {\n-        if (string.IsNullOrWhiteSpace(text))\n-            throw new ArgumentException(\"Text cannot be null or whitespace\", nameof(text));\n-\n         // TODO: Implement text embedding with CLIP or similar\n         throw new NotImplementedException(\"Multi-modal embedding requires CLIP/ONNX model integration\");\n     }\n```\n\nNote: Input validation is handled by the base class, so you can remove the duplicate check.\n\n---\n\n`70-77`: **Override `EmbedBatchCore` with the correct signature.**\n\n`EmbeddingModelBase<T>.EmbedBatch` returns a `Matrix<T>` and delegates to `protected virtual Matrix<T> EmbedBatchCore(IList<string> texts)`. Overriding `EmbedBatch` here (and changing the return type to `IEnumerable<Vector<T>>`) breaks the inheritance contract and prevents compilation.\n\n\n\n\nApply this diff:\n\n```diff\n-    public override IEnumerable<Vector<T>> EmbedBatch(IEnumerable<string> texts)\n+    protected override Matrix<T> EmbedBatchCore(IList<string> texts)\n     {\n-        if (texts == null)\n-            throw new ArgumentNullException(nameof(texts));\n-\n         // TODO: Implement batch text embedding\n         throw new NotImplementedException(\"Multi-modal embedding requires CLIP/ONNX model integration\");\n     }\n```\n\nNote: Input validation is handled by the base class.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (2)</summary><blockquote>\n\n`54-68`: **Critical: Small chunks are discarded, causing data loss.**\n\nWhen a header is encountered and `combineSmallChunks` is `true`, chunks smaller than `_minChunkSize` are cleared (line 64) without being saved. This permanently loses content rather than combining it with adjacent chunks as the parameter name suggests.\n\nFor example:\n```\n## Header A\nSmall content here\n## Header B\nMore content\n```\n\nIf `_minChunkSize = 100` and \"Small content here\" is only 50 characters, it will be discarded entirely.\n\n\n\nApply this diff to preserve all content by always saving chunks at header boundaries:\n\n```diff\n             // Check if line is a header (Markdown ## or HTML <h>)\n             if (IsHeader(line))\n             {\n                 // Save current chunk if not empty\n                 if (currentChunk.Count > 0)\n                 {\n                     var content = string.Join(Environment.NewLine, currentChunk);\n-                    if (content.Length >= _minChunkSize || !_combineSmallChunks)\n-                    {\n-                        chunks.Add((content, chunkStart, position));\n-                    }\n+                    // Always save at header boundaries to preserve all content\n+                    chunks.Add((content, chunkStart, position));\n                     currentChunk.Clear();\n                 }\n\n                 chunkStart = position;\n                 currentChunk.Add(line);\n```\n\nNote: If you need to combine small chunks, implement it as a post-processing step that merges adjacent chunks while preserving metadata.\n\n---\n\n`24-36`: **Add parameter validation to prevent invalid configurations.**\n\nThe constructor validates `minChunkSize` but doesn't validate `chunkSize`, `chunkOverlap`, or their relationships. Invalid values could cause runtime failures or illogical behavior.\n\n\n\nApply this diff to add validation:\n\n```diff\n public HeaderBasedTextSplitter(\n     int chunkSize,\n     int chunkOverlap = 0,\n     int minChunkSize = 100,\n     bool combineSmallChunks = true)\n     : base(chunkSize, chunkOverlap)\n {\n+    if (chunkSize <= 0)\n+        throw new ArgumentOutOfRangeException(nameof(chunkSize), \"Chunk size must be greater than zero\");\n+    if (chunkOverlap < 0)\n+        throw new ArgumentOutOfRangeException(nameof(chunkOverlap), \"Chunk overlap cannot be negative\");\n+    if (chunkOverlap >= chunkSize)\n+        throw new ArgumentException($\"Chunk overlap ({chunkOverlap}) must be less than chunk size ({chunkSize})\");\n     if (minChunkSize < 0)\n         throw new ArgumentOutOfRangeException(nameof(minChunkSize), \"Min chunk size cannot be negative\");\n+    if (minChunkSize > chunkSize)\n+        throw new ArgumentException($\"Min chunk size ({minChunkSize}) cannot exceed chunk size ({chunkSize})\");\n         \n     _minChunkSize = minChunkSize;\n     _combineSmallChunks = combineSmallChunks;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (1)</summary><blockquote>\n\n`94-105`: **Sentences exceeding maxChunkSize bypass size enforcement.**\n\nWhen `currentChunk.Count == 0` (line 94 condition fails), a sentence is added at line 104 regardless of its length. If a single sentence exceeds `_maxChunkSize`, it will create a chunk larger than the configured limit, potentially causing issues with downstream components (e.g., embedding model token limits).\n\n\n\n\nThis issue was previously flagged. Consider implementing one of these solutions:\n\n1. **Split long sentences** (preferred): Add a helper method to split sentences exceeding `_maxChunkSize` on word boundaries:\n\n```diff\n+    private List<string> SplitLongSentence(string sentence, int maxSize)\n+    {\n+        if (sentence.Length <= maxSize)\n+            return new List<string> { sentence };\n+        \n+        var parts = new List<string>();\n+        var words = sentence.Split(' ', StringSplitOptions.RemoveEmptyEntries);\n+        var currentPart = new System.Text.StringBuilder();\n+        \n+        foreach (var word in words)\n+        {\n+            if (currentPart.Length + word.Length + 1 > maxSize && currentPart.Length > 0)\n+            {\n+                parts.Add(currentPart.ToString().Trim());\n+                currentPart.Clear();\n+            }\n+            currentPart.Append(word).Append(' ');\n+        }\n+        \n+        if (currentPart.Length > 0)\n+            parts.Add(currentPart.ToString().Trim());\n+        \n+        return parts;\n+    }\n\n         for (int i = 0; i < sentences.Count; i++)\n         {\n             var sentence = sentences[i];\n             var sentenceLength = sentence.Length;\n+            \n+            // Split long sentences before processing\n+            var sentenceParts = sentenceLength > _maxChunkSize \n+                ? SplitLongSentence(sentence, _maxChunkSize) \n+                : new List<string> { sentence };\n+            \n+            foreach (var part in sentenceParts)\n+            {\n+                var partLength = part.Length;\n-            var sentenceLength = sentence.Length;\n\n             // If adding this sentence would exceed maxChunkSize and we have content, create a chunk\n-            if (currentLength + sentenceLength > _maxChunkSize && currentChunk.Count > 0)\n+            if (currentLength + partLength > _maxChunkSize && currentChunk.Count > 0)\n             {\n                 chunks.Add(string.Join(\" \", currentChunk));\n                 \n                 // Keep the last N sentences for overlap\n                 var overlapStart = Math.Max(0, currentChunk.Count - _overlapSentences);\n                 currentChunk = currentChunk.GetRange(overlapStart, currentChunk.Count - overlapStart);\n                 currentLength = currentChunk.Sum(s => s.Length + 1) - 1; // +1 for space, -1 to remove last space\n             }\n\n-            currentChunk.Add(sentence);\n-            currentLength += sentenceLength + (currentChunk.Count > 1 ? 1 : 0); // Add space if not first sentence\n+            currentChunk.Add(part);\n+            currentLength += partLength + (currentChunk.Count > 1 ? 1 : 0);\n+            }\n         }\n```\n\n2. **Document the limitation**: At minimum, add a warning in the XML comments that sentences exceeding `maxChunkSize` will be included whole.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (4)</summary><blockquote>\n\n`17-36`: **Implement required DocumentStoreBase<T> overrides.**\n\n`DocumentStoreBase<T>` still requires `VectorDimension`, `GetByIdCore`, `RemoveCore`, and `Clear`. Without them the build fails, and the store cannot participate in the base-class validation pipeline.\n\n\n\nApply this diff:\n\n```diff\n+using System.Collections.Generic;\n+using System;\n using AiDotNet.Interfaces;\n using AiDotNet.LinearAlgebra;\n using AiDotNet.RetrievalAugmentedGeneration.Models;\n \n namespace AiDotNet.RetrievalAugmentedGeneration.DocumentStores;\n \n public class ChromaDBDocumentStore<T> : DocumentStoreBase<T>\n {\n     private readonly string _endpoint;\n     private readonly string _collectionName;\n+    private readonly int _vectorDimension;\n \n     public ChromaDBDocumentStore(\n         string endpoint,\n         string collectionName,\n         int vectorDimension,\n         INumericOperations<T> numericOperations)\n         : base(vectorDimension, numericOperations)\n     {\n-        _endpoint = endpoint ?? throw new ArgumentNullException(nameof(endpoint));\n-        _collectionName = collectionName ?? throw new ArgumentNullException(nameof(collectionName));\n+        if (string.IsNullOrWhiteSpace(endpoint))\n+            throw new ArgumentException(\"Endpoint cannot be null or whitespace.\", nameof(endpoint));\n+        if (string.IsNullOrWhiteSpace(collectionName))\n+            throw new ArgumentException(\"Collection name cannot be null or whitespace.\", nameof(collectionName));\n+        if (vectorDimension <= 0)\n+            throw new ArgumentOutOfRangeException(nameof(vectorDimension), \"Vector dimension must be positive.\");\n+\n+        _endpoint = endpoint;\n+        _collectionName = collectionName;\n+        _vectorDimension = vectorDimension;\n     }\n \n+    public override int VectorDimension => _vectorDimension;\n+\n+    protected override Document<T>? GetByIdCore(string documentId)\n+    {\n+        throw new NotImplementedException(\"ChromaDB get-by-id integration pending.\");\n+    }\n+\n+    protected override bool RemoveCore(string documentId)\n+    {\n+        throw new NotImplementedException(\"ChromaDB delete integration pending.\");\n+    }\n+\n+    public override void Clear()\n+    {\n+        throw new NotImplementedException(\"ChromaDB clear collection integration pending.\");\n+    }\n```\n\n---\n\n`41-48`: **Remove invalid AddDocument override.**\n\n`DocumentStoreBase<T>` exposes `Add()` and expects you to implement `AddCore(VectorDocument<T>)`. Overriding `AddDocument` will not compile.\n\n\n\nApply this diff:\n\n```diff\n-    /// <summary>\n-    /// Adds a document to the ChromaDB collection.\n-    /// </summary>\n-    public override void AddDocument(Document<T> document)\n-    {\n-        if (document == null)\n-            throw new ArgumentNullException(nameof(document));\n-\n-        // TODO: Implement ChromaDB add via REST API\n-        throw new NotImplementedException(\"ChromaDB integration requires HTTP client implementation\");\n-    }\n+    /// <summary>\n+    /// Core logic for inserting a vectorized document.\n+    /// </summary>\n+    protected override void AddCore(VectorDocument<T> vectorDocument)\n+    {\n+        if (vectorDocument == null)\n+            throw new ArgumentNullException(nameof(vectorDocument));\n+\n+        throw new NotImplementedException(\"ChromaDB add via REST API still needs to be implemented.\");\n+    }\n```\n\n---\n\n`53-63`: **Replace GetSimilar override with GetSimilarCore.**\n\n`GetSimilar` is sealed in the base class; you must provide `GetSimilarCore(Vector<T>, int, Dictionary<string, object>)`. Keeping this override blocks compilation.\n\n\n\nApply this diff:\n\n```diff\n-    /// <summary>\n-    /// Retrieves documents similar to the query vector.\n-    /// </summary>\n-    public override IEnumerable<Document<T>> GetSimilar(Vector<T> queryVector, int topK)\n-    {\n-        if (queryVector == null)\n-            throw new ArgumentNullException(nameof(queryVector));\n-\n-        if (topK <= 0)\n-            throw new ArgumentOutOfRangeException(nameof(topK), \"topK must be positive\");\n-\n-        // TODO: Implement ChromaDB query via REST API\n-        throw new NotImplementedException(\"ChromaDB integration requires HTTP client implementation\");\n-    }\n+    /// <summary>\n+    /// Core similarity search implementation with optional metadata filters.\n+    /// </summary>\n+    protected override IEnumerable<Document<T>> GetSimilarCore(\n+        Vector<T> queryVector,\n+        int topK,\n+        Dictionary<string, object> metadataFilters)\n+    {\n+        throw new NotImplementedException(\"ChromaDB query via REST API still needs to be implemented.\");\n+    }\n```\n\n---\n\n`68-72`: **Drop non-existent GetAllDocuments override.**\n\n`DocumentStoreBase<T>` does not declare `GetAllDocuments`; overriding it causes a compiler error. The method must be removed (or introduced in the base type first).\n\n\n\nApply this diff:\n\n```diff\n-    /// <summary>\n-    /// Gets all documents from the collection.\n-    /// </summary>\n-    public override IEnumerable<Document<T>> GetAllDocuments()\n-    {\n-        // TODO: Implement ChromaDB get all documents\n-        throw new NotImplementedException(\"ChromaDB integration requires HTTP client implementation\");\n-    }\n-\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (1)</summary><blockquote>\n\n`24-36`: **Critical: Constructor validation insufficientΓÇöinfinite loop still possible.**\n\nThe validation only ensures `contextWindowSize >= 0`, but lines 61 and 76 perform integer division by 50. When `contextWindowSize < 50`, the division yields 0, which causes:\n\n1. **Line 76**: `contextEnd = i + 0 = i`, then `i = contextEnd - 1 = i - 1`. After the loop's `i++`, we return to the same index, creating an **infinite loop** (the critical issue flagged in past reviews).\n2. **Line 61**: `contextStart = i - 0 = i`, so no context lines are included before the image.\n\n\n\nApply this diff to enforce a minimum context window size:\n\n```diff\n         : base(chunkSize, chunkOverlap)\n     {\n-        if (contextWindowSize < 0)\n-            throw new ArgumentOutOfRangeException(nameof(contextWindowSize), \"Context window size cannot be negative\");\n+        if (contextWindowSize < 50)\n+            throw new ArgumentOutOfRangeException(nameof(contextWindowSize), \"Context window size must be at least 50 characters to prevent calculation errors\");\n             \n         _contextWindowSize = contextWindowSize;\n         _preserveImageContext = preserveImageContext;\n```\n\nAlternatively, fix the calculation to use a minimum advance:\n\n```diff\n-                    var contextStart = Math.Max(0, i - (_contextWindowSize / 50));\n+                    var contextLineBefore = Math.Max(1, _contextWindowSize / 50);\n+                    var contextStart = Math.Max(0, i - contextLineBefore);\n```\n\n```diff\n-                    var contextEnd = Math.Min(lines.Length, i + (_contextWindowSize / 50));\n+                    var contextLineAfter = Math.Max(1, _contextWindowSize / 50);\n+                    var contextEnd = Math.Min(lines.Length, i + contextLineAfter);\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (1)</summary><blockquote>\n\n`82-120`: **Set `HasRelevanceScore` on fused outputs.**\n\n`FuseRankings` updates `RelevanceScore` but never flips `HasRelevanceScore`. Any downstream reranker that respects that flag will treat these as unscored. Mirror the pattern from `Rerank` and set the flag when you assign the score.\n\n```diff\n         foreach (var doc in reranked)\n         {\n-            doc.RelevanceScore = scores[doc.Id];\n+            doc.RelevanceScore = scores[doc.Id];\n+            doc.HasRelevanceScore = true;\n         }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/CohereReranker.cs (1)</summary><blockquote>\n\n`16-57`: **Restore the required `RerankerBase<T>` overrides.**\n\n`RerankerBase<T>` still demands `public override bool ModifiesScores { get; }` and `protected override IEnumerable<Document<T>> RerankCore(...)`. This class implements neither, so the project fails to compile, and overriding the public `Rerank` overload sidesteps the base template method. Implement the property and move your logic into `RerankCore` (keeping the TODO throw until the API call exists).\n\n```diff\n+    public override bool ModifiesScores => true;\n+\n-    public override IEnumerable<Document<T>> Rerank(string query, IEnumerable<Document<T>> documents, int topK)\n+    protected override IEnumerable<Document<T>> RerankCore(string query, IList<Document<T>> documents)\n     {\n-        if (string.IsNullOrWhiteSpace(query))\n-            throw new ArgumentException(\"Query cannot be null or whitespace\", nameof(query));\n-\n-        if (documents == null)\n-            throw new ArgumentNullException(nameof(documents));\n-\n-        if (topK <= 0)\n-            throw new ArgumentOutOfRangeException(nameof(topK), \"topK must be positive\");\n-\n-        // TODO: Implement Cohere Rerank API call\n-        // 1. Send query and documents to Cohere Rerank API\n-        // 2. Receive relevance scores\n-        // 3. Update document scores\n-        // 4. Return top-K documents\n         throw new NotImplementedException(\"Cohere Rerank integration requires HTTP client implementation\");\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs (1)</summary><blockquote>\n\n`16-74`: **Implement the abstract members from `RerankerBase<T>`.**\n\n`RerankerBase<T>` requires `ModifiesScores` and `RerankCore`; this class provides neither and instead overrides the public `Rerank` overload, which is non-virtual. The result is a compile failure. Expose `ModifiesScores` (likely `false` because this strategy only reorders) and move the reordering logic into `RerankCore`.\n\n```diff\n+    public override bool ModifiesScores => false;\n+\n-    public override IEnumerable<Document<T>> Rerank(string query, IEnumerable<Document<T>> documents, int topK)\n+    protected override IEnumerable<Document<T>> RerankCore(string query, IList<Document<T>> documents)\n     {\n-        if (string.IsNullOrWhiteSpace(query))\n-            throw new ArgumentException(\"Query cannot be null or whitespace\", nameof(query));\n-\n-        if (documents == null)\n-            throw new ArgumentNullException(nameof(documents));\n-\n-        if (topK <= 0)\n-            throw new ArgumentOutOfRangeException(nameof(topK), \"topK must be positive\");\n-\n-        var docList = documents\n-            .OrderByDescending(d => d.HasRelevanceScore ? d.RelevanceScore : NumOps.Zero)\n-            .Take(topK)\n-            .ToList();\n+        var docList = documents\n+            .OrderByDescending(d => d.HasRelevanceScore ? d.RelevanceScore : NumOps.Zero)\n+            .ToList();\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (15)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (3)</summary><blockquote>\n\n`29-39`: **Consider accepting IRetriever<T> interface instead of concrete base class.**\n\nThe constructor accepts `RetrieverBase<T>` (concrete base class) rather than `IRetriever<T>` interface. This reduces flexibility for dependency injection, complicates unit testing with mocks, and couples the class to a specific implementation hierarchy.\n\n\n\nApply this diff to use the interface:\n\n```diff\n     public GraphRAG(\n         string graphEndpoint,\n         string graphQueryLanguage,\n-        RetrieverBase<T> vectorRetriever,\n+        IRetriever<T> vectorRetriever,\n         INumericOperations<T> numericOperations)\n```\n\nUpdate the field declaration:\n\n```diff\n-    private readonly RetrieverBase<T> _vectorRetriever;\n+    private readonly IRetriever<T> _vectorRetriever;\n```\n\n---\n\n`35-36`: **Validate string parameters for empty/whitespace.**\n\nThe `graphEndpoint` and `graphQueryLanguage` parameters are validated for null but not for empty or whitespace strings, which could lead to runtime issues when graph integration is implemented.\n\n\n\nApply this diff:\n\n```diff\n-        _graphEndpoint = graphEndpoint ?? throw new ArgumentNullException(nameof(graphEndpoint));\n-        _graphQueryLanguage = graphQueryLanguage ?? throw new ArgumentNullException(nameof(graphQueryLanguage));\n+        if (string.IsNullOrWhiteSpace(graphEndpoint))\n+            throw new ArgumentException(\"Graph endpoint cannot be null or whitespace\", nameof(graphEndpoint));\n+        if (string.IsNullOrWhiteSpace(graphQueryLanguage))\n+            throw new ArgumentException(\"Graph query language cannot be null or whitespace\", nameof(graphQueryLanguage));\n+        \n+        _graphEndpoint = graphEndpoint;\n+        _graphQueryLanguage = graphQueryLanguage;\n```\n\n---\n\n`15-15`: **Consider implementing IRetriever<T> for consistency.**\n\nThe class provides a `Retrieve` method matching the `IRetriever<T>` interface signature but doesn't formally implement the interface. Implementing it would improve consistency with other retrieval components in the framework and enable polymorphic usage.\n\n\n\nApply this diff:\n\n```diff\n-public class GraphRAG<T>\n+public class GraphRAG<T> : IRetriever<T>\n```\n\nEnsure `IRetriever<T>` is imported (likely already available via existing usings).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (1)</summary><blockquote>\n\n`30-42`: **Validate aggregationMethod against allowed values.**\n\nThe XML documentation specifies three valid aggregation methods (\"max\", \"mean\", \"weighted\"), but the constructor accepts any non-null string. Consider validating the parameter to prevent invalid values from being silently accepted.\n\n\n\nApply this diff to add validation:\n\n```diff\n public MultiVectorRetriever(\n     IDocumentStore<T> documentStore,\n     int vectorsPerDocument,\n     string aggregationMethod,\n     INumericOperations<T> numericOperations)\n     : base(documentStore, numericOperations)\n {\n     if (vectorsPerDocument <= 0)\n         throw new ArgumentOutOfRangeException(nameof(vectorsPerDocument), \"Vectors per document must be positive\");\n-        \n+\n+    var allowedMethods = new[] { \"max\", \"mean\", \"weighted\" };\n+    if (aggregationMethod == null || !allowedMethods.Contains(aggregationMethod, StringComparer.OrdinalIgnoreCase))\n+        throw new ArgumentException($\"Aggregation method must be one of: {string.Join(\", \", allowedMethods)}\", nameof(aggregationMethod));\n+\n     _vectorsPerDocument = vectorsPerDocument;\n-    _aggregationMethod = aggregationMethod ?? throw new ArgumentNullException(nameof(aggregationMethod));\n+    _aggregationMethod = aggregationMethod;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PineconeDocumentStore.cs (1)</summary><blockquote>\n\n`35-70`: **Consider extracting shared in-memory store logic.**\n\nThe implementations of `AddCore` and `GetSimilarCore` are nearly identical to `FAISSDocumentStore`. Both use the same pattern: in-memory dictionary storage, cosine similarity search, and metadata filtering. This duplication makes maintenance more difficult.\n\nConsider creating a shared base class (e.g., `InMemoryDocumentStoreBase<T>`) that both `FAISSDocumentStore` and `PineconeDocumentStore` can inherit from to reduce code duplication and simplify maintenance.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (1)</summary><blockquote>\n\n`17-17`: **Unused field: _className is never referenced.**\n\nThe `_className` field is initialized in the constructor but never used in any method. While the XML documentation mentions \"class-based schema organization,\" no schema functionality is implemented.\n\n\n\nConsider one of the following:\n- Remove the field and parameter if not needed for the MVP\n- Implement schema organization features if planned\n- Add a public property to expose it for future extensibility\n\nApply this diff if removing the unused field:\n\n```diff\n-        private readonly string _className;\n         private int _vectorDimension;\n \n         public override int DocumentCount => _documents.Count;\n         public override int VectorDimension => _vectorDimension;\n \n-        public WeaviateDocumentStore(string className, int initialCapacity = 1000)\n+        public WeaviateDocumentStore(int initialCapacity = 1000)\n         {\n-            if (string.IsNullOrWhiteSpace(className))\n-                throw new ArgumentException(\"Class name cannot be empty\", nameof(className));\n             if (initialCapacity <= 0)\n                 throw new ArgumentException(\"Initial capacity must be greater than zero\", nameof(initialCapacity));\n \n-            _className = className;\n             _documents = new Dictionary<string, VectorDocument<T>>(initialCapacity);\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (1)</summary><blockquote>\n\n`2-2`: **Remove redundant using directive.**\n\nLine 2 imports the same namespace declared on line 4. A namespace cannot use itself; this directive serves no purpose.\n\n\n\nApply this diff:\n\n```diff\n using AiDotNet.Interfaces;\n-using AiDotNet.RetrievalAugmentedGeneration.QueryExpansion;\n \n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary><blockquote>\n\n`15-15`: **Consider implementing IRetriever<T> for polymorphic usage.**\n\nThe class doesn't implement any retriever interface, which prevents it from being used interchangeably with other retrievers in the RAG pipeline. If an `IRetriever<T>` interface exists (as suggested by the generic patterns in other RAG components), implementing it would enable polymorphic composition.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary><blockquote>\n\n`15-15`: **Clarify the role and API contract of FLARERetriever.**\n\nUnlike typical retrievers that return documents, this class has a `GenerateWithActiveRetrieval` method returning a `string`. This suggests it's a generator+retriever hybrid rather than a pure retriever. Consider:\n- Implementing an appropriate interface (e.g., `IGenerator<T>` if one exists, or defining a new interface for active-retrieval generators)\n- Documenting why this pattern differs from other retrievers in the framework\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs (1)</summary><blockquote>\n\n`17-17`: **Remove unused field or document its intended purpose.**\n\nThe `_collectionName` field is assigned in the constructor but never used anywhere in the class. Either remove it to clean up dead code, or if it's intended for future use (e.g., logging, metrics, or external Milvus integration), document that purpose with a comment.\n\n\n\n```diff\n-        private readonly string _collectionName;\n```\n\n```diff\n-            _collectionName = collectionName;\n```\n\n\nAlso applies to: 30-30\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/MultiModalEmbeddingModel.cs (2)</summary><blockquote>\n\n`84-91`: **Consider adding file existence validation for consistency.**\n\nThe single `EmbedImage` method validates file existence (line 60-61), but `EmbedImageBatch` doesn't perform the same check. For consistency and fail-fast behavior, consider validating all paths before processing.\n\n\n\nExample:\n\n```csharp\npublic IEnumerable<Vector<T>> EmbedImageBatch(IEnumerable<string> imagePaths)\n{\n    if (imagePaths == null)\n        throw new ArgumentNullException(nameof(imagePaths));\n\n    var pathList = imagePaths.ToList();\n    foreach (var path in pathList)\n    {\n        if (string.IsNullOrWhiteSpace(path))\n            throw new ArgumentException(\"Image path cannot be null or whitespace\");\n        if (!File.Exists(path))\n            throw new FileNotFoundException($\"Image file not found: {path}\");\n    }\n\n    // TODO: Implement batch image embedding\n    throw new NotImplementedException(\"Multi-modal embedding requires CLIP/ONNX model integration\");\n}\n```\n\n---\n\n`17-18`: **Unused fields will be needed for CLIP/ONNX integration.**\n\nThe `_modelPath` and `_normalizeEmbeddings` fields are stored but not yet used. This is expected given the TODO stubs throughout the class. When implementing the actual embedding logic, ensure these fields are consumed appropriately.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (1)</summary><blockquote>\n\n`143-189`: **Sentence splitting does not handle abbreviations correctly.**\n\nThe character-by-character parsing approach checks for sentence-ending punctuation followed by whitespace, which is an improvement over naive regex patterns. However, it will still incorrectly split on common abbreviations like \"Dr.\", \"Mr.\", \"U.S.A.\", \"etc.\", \"Ph.D.\", and others.\n\n\n\n**Examples of incorrect splits:**\n```\n\"Dr. Smith went to the store.\" ΓåÆ [\"Dr\", \"Smith went to the store.\"]\n\"The U.S.A. is large.\" ΓåÆ [\"The U\", \"S\", \"A. is large.\"]\n```\n\nConsider one of these solutions:\n\n1. **Add abbreviation handling** (lightweight solution):\n\n```diff\n+    private static readonly HashSet<string> CommonAbbreviations = new(StringComparer.OrdinalIgnoreCase)\n+    {\n+        \"Dr\", \"Mr\", \"Mrs\", \"Ms\", \"Prof\", \"Sr\", \"Jr\",\n+        \"etc\", \"vs\", \"e.g\", \"i.e\", \"Ph.D\", \"M.D\",\n+        \"U.S\", \"U.K\", \"U.S.A\"\n+    };\n+\n+    private bool IsAbbreviation(string text, int position)\n+    {\n+        // Look backward to find word before the period\n+        var start = position - 1;\n+        while (start >= 0 && !char.IsWhiteSpace(text[start]) && text[start] != '.')\n+            start--;\n+        start++;\n+        \n+        var word = text.Substring(start, position - start);\n+        return CommonAbbreviations.Contains(word);\n+    }\n\n     private List<string> SplitIntoSentences(string text)\n     {\n         // ... existing code ...\n         \n             // Check if this is a sentence ender\n             if (Array.IndexOf(SentenceEnders, text[i]) >= 0)\n             {\n+                // Skip if this is likely an abbreviation\n+                if (text[i] == '.' && IsAbbreviation(text, i))\n+                    continue;\n+                \n                 // Look ahead to see if there's whitespace (actual sentence end)\n```\n\n2. **Use an NLP library** (robust solution): Consider integrating a library like SharpNLP or Catalyst for production-grade sentence tokenization.\n\n3. **Document the limitation**: At minimum, add a note in the XML documentation about abbreviation handling.\n\nBased on learnings from the previous review, this is a known limitation that should be addressed or clearly documented.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (2)</summary><blockquote>\n\n`20-23`: **Documentation mismatch: parameter semantics unclear.**\n\nThe XML documentation states `contextWindowSize` is the \"Number of characters before/after image to include,\" but the implementation (lines 61, 76) divides this value by 50 to approximate the number of lines. This assumes an average line length of 50 characters, which is arbitrary and undocumented.\n\nConsider either:\n1. Updating the documentation to clarify the conversion logic, or\n2. Changing the parameter to accept line count directly (e.g., `contextWindowLines`) for clarity.\n\n---\n\n`119-132`: **Image detection logic is reasonable but could be more robust.**\n\nThe current implementation correctly identifies common Markdown and HTML image syntax. The `StringComparison.OrdinalIgnoreCase` handles casing variations for HTML tags.\n\nMinor enhancement to consider: Handle self-closing tags by checking for both `<img` and `<img src` patterns, though the current implementation should catch most cases.\n\n\n\n\nOptionally, consider using Regex for more precise detection to reduce false positives:\n\n```csharp\nprivate static readonly Regex MarkdownImageRegex = new(@\"!\\[([^\\]]*)\\]\\(([^\\)]+)\\)\", RegexOptions.Compiled);\nprivate static readonly Regex HtmlImageRegex = new(@\"<img\\s\", RegexOptions.Compiled | RegexOptions.IgnoreCase);\n\nprivate bool IsImageReference(string line)\n{\n    var trimmed = line.Trim();\n    return MarkdownImageRegex.IsMatch(trimmed) || HtmlImageRegex.IsMatch(trimmed);\n}\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T14:21:48Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "5e2879cb116daba6f58fb4a68fc7f8d434e60eb4"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LrpoT",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 26**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (31)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (1)</summary><blockquote>\n\n`57-75`: **Missing embedding model dependency; past review issues resolved.**\n\nThe past review comments regarding metadata type casting and null embedding handling are no longer applicableΓÇöthe problematic code has been removed and replaced with this stub implementation.\n\nHowever, when implementing the actual retrieval logic, you'll need an `IEmbeddingModel<T>` dependency (similar to the pattern in `VectorRetriever.cs` lines 61-68) to embed the query and score parent documents. Consider adding this field and constructor parameter in the next iteration.\n\n\n\n\nRun this script to verify whether other retriever implementations follow a similar pattern:\n\n```shell\n#!/bin/bash\n# Check if other retrievers use IEmbeddingModel\nrg -n --type=cs -A 3 'class.*Retriever.*:.*RetrieverBase' src/RetrievalAugmentedGeneration/Retrievers/ | rg -C 2 'IEmbeddingModel'\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/GooglePalmEmbeddingModel.cs (2)</summary><blockquote>\n\n`7-14`: **The PaLM API referenced in the documentation was retired and is no longer available.**\n\nThe documentation still describes integration with Google's PaLM API and Vertex AI platform, but Google shut down the public PaLM API on August 15, 2024, and Vertex AI retired the textembedding-gecko family on May 24, 2025. This makes the described integration non-functional. Consider updating to reference the currently supported Gemini embedding models (e.g., `gemini-embedding-001`) or removing this class until it can be migrated to a supported endpoint.\n\n\n\n\nThis issue was flagged in a previous review as \"Addressed in commits 1d6eceb to 7ab7f09\" but remains unresolved in the current code.\n\n---\n\n`48-55`: **The EmbedCore method is non-functional and blocks all usage of this class.**\n\nThe method immediately throws `NotImplementedException`, making this embedding model completely unusable in any code path. This directly contradicts the PR summary's claim that \"Implementations completed\" and that the project \"builds with 0 errors\" and is \"marked ready for integration testing.\"\n\nPrevious reviews flagged this as a critical issue and it was marked \"Γ£à Addressed in commits 1d6eceb to 7ab7f09\", but the code remains unchanged. Either:\n1. Implement the actual Google API integration (though note the API is deprecated - see previous comment), or\n2. Mark this class as `internal` until a complete implementation is available, or  \n3. Remove this class from the PR and defer it to a future issue\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (1)</summary><blockquote>\n\n`41-41`: **Address the previously flagged modelPath validation issue.**\n\nThe validation for `modelPath` still only checks for null and would allow empty or whitespace strings to pass through, which will likely cause issues when the model is loaded.\n\n\n\n\nAs previously suggested, apply this diff:\n\n```diff\n-        _modelPath = modelPath ?? throw new ArgumentNullException(nameof(modelPath));\n+        if (string.IsNullOrWhiteSpace(modelPath))\n+            throw new ArgumentException(\"Model path cannot be null or whitespace\", nameof(modelPath));\n+        \n+        _modelPath = modelPath;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (3)</summary><blockquote>\n\n`24-29`: **Verify overlap logic implementation.**\n\nThe `chunkOverlap` parameter is accepted but past reviews indicate it's not used in the chunking logic. While it's passed to the base class constructor, ensure the base class or this implementation actually applies overlap between consecutive chunks.\n\n---\n\n`58-69`: **Position tracking and efficiency issues with context-before logic.**\n\nThis segment has two problems flagged in previous reviews:\n\n1. **Inefficient membership check (line 64)**: `currentChunk.Contains(lines[j])` performs O(n) string comparisons and yields false positives when identical text appears in multiple lines.\n\n2. **Position tracking inconsistency**: Lines from `contextStart` to `i-1` may have been processed in earlier iterations. Re-adding them without adjusting `chunkStart` creates a mismatch between the chunk content and its reported position range.\n\n---\n\n`73-107`: **Critical: Infinite loop and broken position tracking.**\n\nThis segment contains two severe issues from previous reviews:\n\n1. **Infinite loop when `_contextWindowSize < 50` (lines 76-81)**: The integer division `_contextWindowSize / 50` yields `0` when the context window is less than 50. This makes `contextEnd == i`, so `i = contextEnd - 1` becomes `i = i - 1`. After the loop's `i++`, the index returns to its original value, processing the same image line forever. Any document with a small context window will hang.\n\n2. **Position tracking completely broken (lines 77-90, 106)**: When context lines are added after the image (lines 77-80), only the image line's length (`lineLength`) is accounted for at line 86 and line 106. The lengths of the context lines added in the loop are never added to `position`. Additionally, line 81 skips ahead (`i = contextEnd - 1`), so those skipped lines are never processed at line 106 either. This causes all subsequent chunks to have incorrect `StartPosition` and `EndPosition` values.\n\n\n\n\n**Fix required**: Ensure `contextEnd > i` before rewinding, or use `Math.Max(1, _contextWindowSize / 50)` to guarantee progress. Additionally, accumulate the lengths of all context lines and skipped lines into `position` before creating the chunk.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PostgresVectorDocumentStore.cs (3)</summary><blockquote>\n\n`10-14`: **CRITICAL: Still no actual PostgreSQL integration - previous issue unresolved.**\n\nThis issue was already flagged in previous reviews: the class name and documentation claim PostgreSQL/pgvector integration, but the implementation remains purely in-memory with a `Dictionary`. All data is lost when the process ends.\n\nThe previous review recommended either implementing actual database integration or renaming/documenting this as an in-memory store.\n\n---\n\n`17-17`: **The `_tableName` field and parameter remain unused.**\n\nThis issue was already flagged in previous reviews: the constructor requires and validates a `tableName` parameter (lines 23-26) and stores it in the `_tableName` field (line 17, line 30), but neither is ever referenced elsewhere in the code. Since this is an in-memory store with no actual database table, this parameter serves no purpose.\n\nThe previous review provided a diff to remove both the field and parameter.\n\n\n\n\n\nAlso applies to: 23-33\n\n---\n\n`35-91`: **Essential refactor: Code duplication with FAISSDocumentStore still present.**\n\nThis issue was already flagged in previous reviews: the entire implementation (AddCore, GetSimilarCore, GetByIdCore, RemoveCore, Clear) is nearly identical to `FAISSDocumentStore<T>`. Both use the same Dictionary-based in-memory storage, identical similarity search logic, and the same metadata filtering.\n\nThe previous review suggested extracting shared logic into a common `InMemoryDocumentStore<T>` base class to eliminate the duplication and follow DRY principles.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (2)</summary><blockquote>\n\n`21-21`: **DocumentCount must not return a hard-coded zero.**\n\nReturning a constant zero disables dimension validation in the base class `ValidateVectorDocument` method, which relies on `DocumentCount > 0` to enforce consistent embedding dimensions. This allows documents with mismatched vector dimensions to be added after the first insert, breaking the store's contract.\n\n\n\n\nUntil the ChromaDB REST client is implemented, throw `NotImplementedException` instead of returning zero:\n\n```diff\n-public override int DocumentCount => 0; // TODO: Implement via ChromaDB API\n+public override int DocumentCount => throw new NotImplementedException(\"ChromaDB integration requires HTTP client implementation\");\n```\n\n---\n\n`30-38`: **Strengthen constructor validation.**\n\nThe constructor uses `?? throw` which only validates null values, not empty or whitespace strings. Additionally, `vectorDimension` is not validated to ensure it's positive.\n\n\n\nApply this diff to add proper validation:\n\n```diff\n public ChromaDBDocumentStore(\n     string endpoint,\n     string collectionName,\n     int vectorDimension)\n {\n-    _endpoint = endpoint ?? throw new ArgumentNullException(nameof(endpoint));\n-    _collectionName = collectionName ?? throw new ArgumentNullException(nameof(collectionName));\n+    if (string.IsNullOrWhiteSpace(endpoint))\n+        throw new ArgumentException(\"Endpoint cannot be null or empty\", nameof(endpoint));\n+    if (string.IsNullOrWhiteSpace(collectionName))\n+        throw new ArgumentException(\"Collection name cannot be null or empty\", nameof(collectionName));\n+    if (vectorDimension <= 0)\n+        throw new ArgumentOutOfRangeException(nameof(vectorDimension), \"Vector dimension must be positive\");\n+\n+    _endpoint = endpoint;\n+    _collectionName = collectionName;\n     _vectorDimension = vectorDimension;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (1)</summary><blockquote>\n\n`31-41`: **Validate the vectorDimension parameter.**\n\nThe constructor accepts `vectorDimension` but doesn't validate that it's positive. A zero or negative dimension will cause confusing errors later when vectors are added or queried. Add validation similar to the null checks for other parameters.\n\n\n\n```diff\n     public ElasticsearchDocumentStore(\n         string endpoint,\n         string indexName,\n         string apiKey,\n         int vectorDimension)\n     {\n         _endpoint = endpoint ?? throw new ArgumentNullException(nameof(endpoint));\n         _indexName = indexName ?? throw new ArgumentNullException(nameof(indexName));\n         _apiKey = apiKey ?? throw new ArgumentNullException(nameof(apiKey));\n+        \n+        if (vectorDimension <= 0)\n+            throw new ArgumentException(\"Vector dimension must be positive\", nameof(vectorDimension));\n+        \n         _vectorDimension = vectorDimension;\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (3)</summary><blockquote>\n\n`61-85`: **Optimize string concatenation and extract duplicated method.**\n\nTwo improvements:\n\n1. **Performance**: Line 69 uses string concatenation in a tight loop, which is O(n┬▓) due to string immutability. Use `StringBuilder` for O(n) performance.\n\n2. **Code duplication**: This exact `SplitIntoSentences` implementation appears in `DocumentSummarizer.cs` (lines 127-151) and `LLMContextCompressor.cs` (lines 110-134). Extract it to a shared helper, e.g., `TextHelper.SplitIntoSentences()` in the `AiDotNet.Helpers` namespace.\n\n\n\n\nApply this diff to use `StringBuilder`:\n\n```diff\n private List<string> SplitIntoSentences(string text)\n {\n     var sentences = new List<string>();\n     var sentenceEndings = new[] { \". \", \"! \", \"? \", \".\\n\", \"!\\n\", \"?\\n\" };\n-    var currentSentence = string.Empty;\n+    var currentSentence = new StringBuilder();\n\n     for (int i = 0; i < text.Length; i++)\n     {\n-        currentSentence += text[i];\n+        currentSentence.Append(text[i]);\n\n-        var matchedEnding = sentenceEndings.FirstOrDefault(ending => currentSentence.EndsWith(ending));\n+        var current = currentSentence.ToString();\n+        var matchedEnding = sentenceEndings.FirstOrDefault(ending => current.EndsWith(ending));\n         if (matchedEnding != null)\n         {\n-            sentences.Add(currentSentence.Trim());\n-            currentSentence = string.Empty;\n+            sentences.Add(current.Trim());\n+            currentSentence.Clear();\n         }\n     }\n\n-    if (!string.IsNullOrWhiteSpace(currentSentence))\n+    var final = currentSentence.ToString();\n+    if (!string.IsNullOrWhiteSpace(final))\n     {\n-        sentences.Add(currentSentence.Trim());\n+        sentences.Add(final.Trim());\n     }\n\n     return sentences;\n }\n```\n\nThen extract to a shared helper to eliminate duplication across the three files.\n\n---\n\n`25-59`: **Semantic chunking not implemented; overlap content not preserved.**\n\nTwo critical issues:\n\n1. **Missing semantic analysis**: The method documentation claims it \"chunks text based on semantic similarity between sentences,\" but the implementation only accumulates sentences by sizeΓÇöno embeddings, no similarity scoring. This is identical to a simple sentence-based size splitter.\n\n2. **Overlap bug**: Line 45 adjusts `position = endPos - ChunkOverlap` but line 46 clears `currentChunk`, so the next chunk contains no overlapping sentences. The position markers suggest overlap exists, but the actual content doesn't overlap.\n\n\n\n\nTo fix the overlap, after yielding a chunk, retain trailing sentences that fit within `ChunkOverlap` characters:\n\n```diff\n                 var chunkText = string.Join(\" \", currentChunk);\n                 var endPos = position + chunkText.Length;\n                 yield return (chunkText, position, endPos);\n                 \n-                position = endPos - ChunkOverlap;\n-                currentChunk.Clear();\n-                currentSize = 0;\n+                // Keep sentences that fit within the overlap window\n+                var overlapSize = 0;\n+                var overlapSentences = new List<string>();\n+                for (int i = currentChunk.Count - 1; i >= 0; i--)\n+                {\n+                    if (overlapSize + currentChunk[i].Length <= ChunkOverlap)\n+                    {\n+                        overlapSentences.Insert(0, currentChunk[i]);\n+                        overlapSize += currentChunk[i].Length;\n+                    }\n+                    else break;\n+                }\n+                \n+                position = endPos - overlapSize;\n+                currentChunk = overlapSentences;\n+                currentSize = overlapSize;\n```\n\nFor semantic chunking, consider computing embeddings for each sentence and merging adjacent sentences with similarity above a threshold, or refer to semantic text splitting libraries.\n\n---\n\n`8-11`: **Documentation falsely claims semantic/embedding-based chunking.**\n\nThe XML documentation states this strategy \"uses embeddings to group related content,\" but the implementation performs no semantic analysis, embedding generation, or similarity comparison. It's a size-based sentence splitter, not a semantic chunker.\n\n\n\nEither implement actual semantic chunking (compute sentence embeddings and group by similarity threshold) or rename the class to `SentenceBasedChunkingStrategy` and update the documentation:\n\n```diff\n-    /// <summary>\n-    /// Semantic-based text chunking that uses embeddings to group related content.\n-    /// </summary>\n-    public class SemanticChunkingStrategy : ChunkingStrategyBase\n+    /// <summary>\n+    /// Sentence-based text chunking that groups sentences by size.\n+    /// </summary>\n+    public class SentenceBasedChunkingStrategy : ChunkingStrategyBase\n```\n\n</blockquote></details>\n<details>\n<summary>temp_file.txt (1)</summary><blockquote>\n\n`14-14`: **Critical: Missing generic type parameter causes compilation failure.**\n\nThe class uses generic type `T` in field `_minTermWeight` (line 18), constructor parameters (lines 30-31), and base class call (line 32), but the class declaration omits the generic parameter. This will cause compilation errors.\n\n\nApply this diff to add the generic parameter with the appropriate constraint:\n\n```diff\n-public class LearnedSparseEncoderExpansion : QueryExpansionBase\n+public class LearnedSparseEncoderExpansion<T> : QueryExpansionBase<T>\n+    where T : struct, IComparable, IConvertible, IFormattable\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (1)</summary><blockquote>\n\n`42-43`: **Change hardcoded DocumentCount to throw NotImplementedException.**\n\nReturning a constant `0` makes the store appear perpetually empty, which bypasses base class vector dimension validation (the check `if (DocumentCount > 0 && vectorDocument.Embedding.Length != VectorDimension)` never executes) and misleads client code. For a stub implementation, throwing `NotImplementedException` is more appropriate as it makes the incomplete state explicit and consistent with other methods.\n\n\n\n\nApply this diff:\n\n```diff\n /// <inheritdoc />\n-public override int DocumentCount => 0;\n+public override int DocumentCount => throw new NotImplementedException(\"Qdrant integration requires HTTP client implementation\");\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (1)</summary><blockquote>\n\n`78-117`: **Set HasRelevanceScore flag and optimize dictionary access.**\n\nTwo issues need to be addressed:\n\n1. **Critical**: Lines 111-114 assign `RelevanceScore` but do not set `HasRelevanceScore = true`. This flag is essential for downstream consumers to recognize that these documents have been scored. This issue was marked as addressed in previous reviews but is missing in this method.\n\n2. **Major**: Lines 94-96 use the inefficient `ContainsKey` + indexer pattern. Use `TryGetValue` or dictionary indexer with null-coalescing instead.\n\n\n\n\nApply this diff to fix both issues:\n\n```diff\n         foreach (var rankingList in rankingLists)\n         {\n             for (int rank = 0; rank < rankingList.Count; rank++)\n             {\n                 var doc = rankingList[rank];\n                 var rrfScore = NumOps.FromDouble(1.0 / (_k + rank + 1));\n\n-                if (scores.ContainsKey(doc.Id))\n+                if (scores.TryGetValue(doc.Id, out var existingScore))\n                 {\n-                    scores[doc.Id] = NumOps.Add(scores[doc.Id], rrfScore);\n+                    scores[doc.Id] = NumOps.Add(existingScore, rrfScore);\n                 }\n                 else\n                 {\n                     scores[doc.Id] = rrfScore;\n                     allDocs[doc.Id] = doc;\n                 }\n             }\n         }\n\n         var reranked = allDocs.Values\n             .OrderByDescending(d => Convert.ToDouble(scores[d.Id]))\n             .Take(topK)\n             .ToList();\n\n         foreach (var doc in reranked)\n         {\n             doc.RelevanceScore = scores[doc.Id];\n+            doc.HasRelevanceScore = true;\n         }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/DiversityReranker.cs (2)</summary><blockquote>\n\n`26-32`: **Validate weight parameters to prevent invalid scoring behavior.**\n\nThe constructor accepts arbitrary values for `diversityWeight` and `relevanceWeight`, but diversity-aware reranking algorithms typically expect weights in [0,1] to balance diversity and relevance properly. Values outside this range produce incorrect or unexpected scoring.\n\n\n\n\nApply this diff to add validation:\n\n```diff\n public DiversityReranker(\n     T diversityWeight,\n     T relevanceWeight)\n {\n+    var zero = NumOps.Zero;\n+    var one = NumOps.One;\n+    \n+    if (NumOps.LessThan(diversityWeight, zero) || NumOps.GreaterThan(diversityWeight, one))\n+        throw new ArgumentOutOfRangeException(nameof(diversityWeight), \"Diversity weight must be between 0 and 1.\");\n+    \n+    if (NumOps.LessThan(relevanceWeight, zero) || NumOps.GreaterThan(relevanceWeight, one))\n+        throw new ArgumentOutOfRangeException(nameof(relevanceWeight), \"Relevance weight must be between 0 and 1.\");\n+\n     _diversityWeight = diversityWeight;\n     _relevanceWeight = relevanceWeight;\n }\n```\n\n---\n\n`54-96`: **Replace `double.NegativeInfinity` sentinel to support all numeric types.**\n\n`NumOps.FromDouble(double.NegativeInfinity)` throws `OverflowException` for non-floating numeric types such as `decimal`. The framework explicitly supports `decimal`, so this crashes before any ranking occurs. This issue was flagged as critical in previous reviews but remains unfixed.\n\n\n\n\nApply this diff to use a safe boolean sentinel:\n\n```diff\n     while (remaining.Count > 0)\n     {\n-        var bestDoc = remaining[0];\n-        var bestScore = NumOps.FromDouble(double.NegativeInfinity);\n+        Document<T>? bestDoc = null;\n+        var hasBestScore = false;\n+        T bestScore = default!;\n\n         foreach (var doc in remaining)\n         {\n             // Relevance score\n             var relevance = doc.HasRelevanceScore ? doc.RelevanceScore : NumOps.Zero;\n\n             // Diversity score (based on token overlap similarity)\n             var minSimilarity = NumOps.One;\n             foreach (var selectedDoc in selected)\n             {\n                 // Simple token overlap-based similarity\n                 var tokens1 = doc.Content.Split(new[] { ' ', '\\t', '\\n', '\\r' }, StringSplitOptions.RemoveEmptyEntries);\n                 var tokens2 = selectedDoc.Content.Split(new[] { ' ', '\\t', '\\n', '\\r' }, StringSplitOptions.RemoveEmptyEntries);\n                 var set1 = new HashSet<string>(tokens1);\n                 var set2 = new HashSet<string>(tokens2);\n                 var intersection = set1.Intersect(set2).Count();\n                 var union = set1.Union(set2).Count();\n                 var similarity = union > 0 ? (double)intersection / union : 0.0;\n                 var simT = NumOps.FromDouble(similarity);\n                 if (NumOps.LessThan(simT, minSimilarity))\n                 {\n                     minSimilarity = simT;\n                 }\n             }\n\n             // Combined score\n             var score = NumOps.Add(\n                 NumOps.Multiply(_relevanceWeight, relevance),\n                 NumOps.Multiply(_diversityWeight, NumOps.Subtract(NumOps.One, minSimilarity))\n             );\n\n-            if (NumOps.GreaterThan(score, bestScore))\n+            if (!hasBestScore || NumOps.GreaterThan(score, bestScore))\n             {\n                 bestScore = score;\n                 bestDoc = doc;\n+                hasBestScore = true;\n             }\n         }\n\n+        if (!hasBestScore || bestDoc is null)\n+            break;\n+\n         selected.Add(bestDoc);\n         remaining.Remove(bestDoc);\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (2)</summary><blockquote>\n\n`85-99`: **Position tracking doesn't reflect original text offsets.**\n\nThe current implementation assigns sequential positions in the output rather than tracking positions in the original source text. When chunks overlap, the same content from the original text will have different StartPosition values in different chunks, making it impossible to map chunks back to their source locations.\n\nThis issue was previously flagged but remains unresolved. Consider one of these approaches:\n\n1. **Document the behavior**: Add XML remarks explicitly stating that positions are sequential in the chunked output, not source text offsets.\n2. **Track original positions**: Modify `SplitTextRecursively` to return tuples with source offsets (complex but accurate).\n3. **Use chunk indices**: Replace positions with simple 0-based chunk indices if source mapping isn't needed.\n\n\n\nApply this diff to document the current behavior:\n\n```diff\n     /// <summary>\n     /// Recursively splits text using the separator hierarchy.\n     /// </summary>\n     /// <param name=\"text\">The validated text to split.</param>\n-    /// <returns>Chunks with position information.</returns>\n+    /// <returns>Chunks with sequential position information in the output stream. Note: positions represent indices in the concatenated chunk output, not the original source text. Overlapping content will appear at different positions in different chunks.</returns>\n     protected override IEnumerable<(string Chunk, int StartPosition, int EndPosition)> ChunkCore(string text)\n```\n\n---\n\n`174-178`: **Critical: Separator incorrectly inserted between recursive subChunks.**\n\nThis issue was marked as \"Addressed in commit 841164e\" in past reviews, but line 176 still appends the current-level separator when iterating over `subChunks` returned from recursion. This corrupts document structure when recursion reaches character-level splitting.\n\n**Example scenario:**\n```\nText: \"VeryLongWordThatExceedsChunkSize\" (no natural breaks)\nCurrent separator: \"\\n\\n\" (paragraph)\nΓåÆ Recursively splits down to character level\nΓåÆ Returns subChunks: [\"VeryLong\", \"WordThat\", \"Exceeds\", \"ChunkSize\"]\nΓåÆ Line 176 inserts \"\\n\\n\" before each subChunk\nΓåÆ Result: \"VeryLong\\n\\nWordThat\\n\\nExceeds\\n\\nChunkSize\"\n```\n\nThis inserts paragraph breaks in the middle of a word.\n\n\n\nApply this diff to remove separator insertion between recursive subChunks:\n\n```diff\n                 var subChunks = SplitTextRecursively(split, nextSeparators);\n                 foreach (var subChunk in subChunks)\n                 {\n                     if (currentChunk.Length + subChunk.Length > ChunkSize && currentChunk.Length > 0)\n                     {\n                         finalChunks.Add(currentChunk.ToString().Trim());\n                         currentChunk.Clear();\n\n                         // Add overlap\n                         if (finalChunks.Count > 0 && ChunkOverlap > 0)\n                         {\n                             var lastChunk = finalChunks[finalChunks.Count - 1];\n                             var overlapStart = Math.Max(0, lastChunk.Length - ChunkOverlap);\n                             var overlap = lastChunk.Substring(overlapStart);\n                             currentChunk.Append(overlap);\n                         }\n                     }\n\n-                    if (currentChunk.Length > 0)\n-                    {\n-                        currentChunk.Append(separator);\n-                    }\n                     currentChunk.Append(subChunk);\n                 }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/CohereEmbeddingModel.cs (1)</summary><blockquote>\n\n`48-51`: **Implement Cohere embeddings before release.**\n\n`EmbedCore` still throws `NotImplementedException`, so any call path into this model crashes immediately, contradicting the ΓÇ£full concrete implementationΓÇ¥ goal of PRΓÇ»#304. Wire up the actual Cohere embed API (single + batch) before merging.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/VoyageAIEmbeddingModel.cs (2)</summary><blockquote>\n\n`31-40`: **Tighten Voyage constructor validation.**\n\nWe still accept whitespace credentials, invalid input types, and non-positive dimensionsΓÇöexactly what earlier reviews flagged. Please reject these upfront (whitespace checks, enforce `dimension > 0`, and validate `inputType` against `\"document\"`/`\"query\"`).\n\n```diff\n-        _apiKey = apiKey ?? throw new ArgumentNullException(nameof(apiKey));\n-        _model = model ?? throw new ArgumentNullException(nameof(model));\n-        _inputType = inputType ?? throw new ArgumentNullException(nameof(inputType));\n-        _dimension = dimension;\n+        if (string.IsNullOrWhiteSpace(apiKey))\n+            throw new ArgumentException(\"API key cannot be null or whitespace.\", nameof(apiKey));\n+        if (string.IsNullOrWhiteSpace(model))\n+            throw new ArgumentException(\"Model cannot be null or whitespace.\", nameof(model));\n+        if (string.IsNullOrWhiteSpace(inputType))\n+            throw new ArgumentException(\"Input type cannot be null or whitespace.\", nameof(inputType));\n+        if (!string.Equals(inputType, \"document\", StringComparison.OrdinalIgnoreCase) &&\n+            !string.Equals(inputType, \"query\", StringComparison.OrdinalIgnoreCase))\n+            throw new ArgumentException(\"Input type must be 'document' or 'query'.\", nameof(inputType));\n+        if (dimension <= 0)\n+            throw new ArgumentOutOfRangeException(nameof(dimension), \"Embedding dimension must be positive.\");\n+\n+        _apiKey = apiKey;\n+        _model = model;\n+        _inputType = inputType;\n+        _dimension = dimension;\n```\n\n---\n\n`48-53`: **Finish the Voyage AI integration.**\n\n`EmbedCore` still throws `NotImplementedException`, so any caller crashes. Implement the actual Voyage embed request (including batching) before this ships, or explicitly mark the class internal until ready.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (1)</summary><blockquote>\n\n`39-51`: **Replace placeholder with real OpenAI embeddings.**\n\nDespite accepting an API key/model, `EmbedCore` still fabricates cosine-based vectors, so retrieval quality is meaningless. Either call the OpenAI embeddings API (and honor `_apiKey`/`_modelName`) or make it explicit that this is a synthetic stub; donΓÇÖt ship this as a ΓÇ£completedΓÇ¥ implementation.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs (1)</summary><blockquote>\n\n`58-66`: **Return copies instead of mutating stored documents.**  \nSetting `RelevanceScore`/`HasRelevanceScore` on the objects inside `_documents` leaks query-specific state into the store. Subsequent reads (e.g., `GetById`) will show stale scores. Please clone the document before assigning scores.\n\n\n```diff\n             var results = scoredDocuments\n                 .OrderByDescending(x => x.Score)\n                 .Take(topK)\n                 .Select(x =>\n                 {\n-                    x.Document.RelevanceScore = x.Score;\n-                    x.Document.HasRelevanceScore = true;\n-                    return x.Document;\n+                    var source = x.Document;\n+                    var docCopy = new Document<T>(source.Id, source.Content, new Dictionary<string, object>(source.Metadata))\n+                    {\n+                        Embedding = source.Embedding,\n+                        RelevanceScore = x.Score,\n+                        HasRelevanceScore = true\n+                    };\n+                    return docCopy;\n                 })\n                 .ToList();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (1)</summary><blockquote>\n\n`99-117`: **Remove vectors when documents are deleted.**  \n`RemoveCore` drops the entry from `_documents` but leaves the embedding in `_indexedVectors`, so every delete leaks memory and desynchronizes your index. Please track the vector index per document and clear it on removal (and in `Clear`).\n\n\n```diff\n         private readonly Dictionary<int, Vector<T>> _indexedVectors;\n+        private readonly Dictionary<string, int> _documentIndices;\n@@\n             _documents = new Dictionary<string, VectorDocument<T>>(initialCapacity);\n             _indexedVectors = new Dictionary<int, Vector<T>>(initialCapacity);\n+            _documentIndices = new Dictionary<string, int>(initialCapacity);\n@@\n             var index = _currentIndex++;\n             _documents[vectorDocument.Document.Id] = vectorDocument;\n             _indexedVectors[index] = vectorDocument.Embedding;\n+            _documentIndices[vectorDocument.Document.Id] = index;\n@@\n                 var index = _currentIndex++;\n                 _documents[vectorDocument.Document.Id] = vectorDocument;\n                 _indexedVectors[index] = vectorDocument.Embedding;\n+                _documentIndices[vectorDocument.Document.Id] = index;\n@@\n-            var removed = _documents.Remove(documentId);\n-            if (removed && _documents.Count == 0)\n+            if (!_documents.Remove(documentId))\n+            {\n+                return false;\n+            }\n+\n+            if (_documentIndices.TryGetValue(documentId, out var vectorIndex))\n+            {\n+                _indexedVectors.Remove(vectorIndex);\n+                _documentIndices.Remove(documentId);\n+            }\n+\n+            if (_documents.Count == 0)\n             {\n                 _vectorDimension = 0;\n                 _currentIndex = 0;\n                 _indexedVectors.Clear();\n+                _documentIndices.Clear();\n             }\n-            return removed;\n+            return true;\n@@\n             _documents.Clear();\n             _indexedVectors.Clear();\n+            _documentIndices.Clear();\n             _vectorDimension = 0;\n             _currentIndex = 0;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (1)</summary><blockquote>\n\n`129-140`: **Handle empty term counts before calling `Max`.**  \nLine 133 can throw `InvalidOperationException` when a documentΓÇÖs content tokenizes to zero terms (empty or whitespace-only strings). That crashes retrieval for those docs. Please short-circuit by storing an empty TFΓÇæIDF vector and continuing whenever `termCounts.Count == 0` before calling `Max()`.\n\n\n```diff\n             foreach (var doc in documents)\n             {\n                 var termTfidf = new Dictionary<string, T>();\n                 var termCounts = docTermFreq[doc.Id];\n-                var maxFreq = termCounts.Values.Max();\n+                if (termCounts.Count == 0)\n+                {\n+                    _tfidf[doc.Id] = termTfidf;\n+                    continue;\n+                }\n+\n+                var maxFreq = termCounts.Values.Max();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PineconeDocumentStore.cs (1)</summary><blockquote>\n\n`23-33`: **Index name parameter is unused.**\n\nThe `_indexName` field is stored but never referenced. Consider either:\n1. Using it in logging/error messages for diagnostics\n2. Removing the parameter if not needed for the current in-memory implementation\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (16)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (1)</summary><blockquote>\n\n`17-36`: **Previous critical issues resolved; add validation for vectorDimension.**\n\nThe constructor correctly stores parameters in private fields and no longer attempts to call a non-existent base constructorΓÇöthis resolves the critical compilation issues from previous reviews.\n\nHowever, add validation to ensure `vectorDimension` is positive:\n\n```diff\n public RedisVLDocumentStore(\n     string connectionString,\n     string indexName,\n     int vectorDimension)\n {\n     _connectionString = connectionString ?? throw new ArgumentNullException(nameof(connectionString));\n     _indexName = indexName ?? throw new ArgumentNullException(nameof(indexName));\n+    \n+    if (vectorDimension <= 0)\n+        throw new ArgumentOutOfRangeException(nameof(vectorDimension), \"Vector dimension must be positive\");\n+    \n     _vectorDimension = vectorDimension;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (2)</summary><blockquote>\n\n`9-20`: **Add XML documentation and consider more flexible parameter types.**\n\nThe public `Compress` method lacks XML documentation. Additionally, using `IList<Document<T>>` or `IReadOnlyList<Document<T>>` as parameter and return types would be more flexible than concrete `List<T>` types, following best practices for API design.\n\n\n\nApply this diff to add documentation:\n\n```diff\n+        /// <summary>\n+        /// Compresses the provided documents to reduce context size while maintaining relevance to the query.\n+        /// </summary>\n+        /// <param name=\"documents\">The list of documents to compress.</param>\n+        /// <param name=\"query\">The query string used to guide compression.</param>\n+        /// <param name=\"options\">Optional configuration parameters for compression.</param>\n+        /// <returns>A list of compressed documents, or an empty list if input is null or empty.</returns>\n         public List<Document<T>> Compress(\n```\n\nConsider refactoring to use interfaces for better flexibility:\n\n```diff\n-        public List<Document<T>> Compress(\n-            List<Document<T>> documents,\n+        public IList<Document<T>> Compress(\n+            IList<Document<T>> documents,\n             string query,\n             Dictionary<string, object>? options = null)\n         {\n             if (documents == null || documents.Count == 0)\n             {\n-                return new List<Document<T>>();\n+                return new List<Document<T>>();\n             }\n\n-            return CompressCore(documents, query, options);\n+            return CompressCore(documents.ToList(), query, options);\n         }\n```\n\n---\n\n`14-17`: **Consider adding query parameter validation.**\n\nThe method validates `documents` but doesn't check if `query` is null or empty. Depending on the compression strategy, an empty query might lead to unexpected behavior in subclasses.\n\n\n\nConsider adding validation:\n\n```diff\n         if (documents == null || documents.Count == 0)\n         {\n             return new List<Document<T>>();\n         }\n+\n+        if (string.IsNullOrWhiteSpace(query))\n+        {\n+            // Either throw ArgumentException or return documents unchanged\n+            return new List<Document<T>>(documents);\n+        }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (1)</summary><blockquote>\n\n`18-23`: **Consider adding a _documentCount field for future implementation.**\n\nWhile the current scaffold returns 0 for `DocumentCount`, adding a private `_documentCount` field now (initialized to 0 in the constructor) will make it easier to track the actual document count when the TODO is implemented. This also maintains consistency with other document store implementations.\n\n\n\n```diff\n     private readonly string _endpoint;\n     private readonly string _indexName;\n     private readonly string _apiKey;\n+    private int _documentCount;\n \n     private readonly int _vectorDimension;\n```\n\nThen in the constructor:\n\n```diff\n         _apiKey = apiKey ?? throw new ArgumentNullException(nameof(apiKey));\n         \n         if (vectorDimension <= 0)\n             throw new ArgumentException(\"Vector dimension must be positive\", nameof(vectorDimension));\n         \n         _vectorDimension = vectorDimension;\n+        _documentCount = 0;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs (1)</summary><blockquote>\n\n`27-27`: **Use consistent string validation across implementations.**\n\nLine 27 uses `string.IsNullOrEmpty`, but other query expansion classes (SubQueryExpansion line 43, MultiQueryExpansion line 41, LearnedSparseEncoderExpansion line 41) use `string.IsNullOrWhiteSpace` for more robust validation. Whitespace-only queries should be rejected.\n\nApply this diff:\n\n```diff\n-        if (string.IsNullOrEmpty(query)) throw new ArgumentNullException(nameof(query));\n+        if (string.IsNullOrWhiteSpace(query))\n+            throw new ArgumentException(\"Query cannot be null or whitespace\", nameof(query));\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (1)</summary><blockquote>\n\n`30-40`: **Add validation for vectorDimension parameter.**\n\nThe constructor should validate that `vectorDimension` is positive, as a zero or negative dimension would be invalid for vector operations. This defensive check prevents configuration errors at construction time rather than later during usage.\n\n\n\nApply this diff:\n\n```diff\n public QdrantDocumentStore(\n     string endpoint,\n     string collectionName,\n     string apiKey,\n     int vectorDimension)\n {\n     _endpoint = endpoint ?? throw new ArgumentNullException(nameof(endpoint));\n     _collectionName = collectionName ?? throw new ArgumentNullException(nameof(collectionName));\n     _apiKey = apiKey ?? throw new ArgumentNullException(nameof(apiKey));\n+    \n+    if (vectorDimension <= 0)\n+        throw new ArgumentOutOfRangeException(nameof(vectorDimension), \"Vector dimension must be positive\");\n+    \n     _vectorDimension = vectorDimension;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (1)</summary><blockquote>\n\n`45-70`: **Consider extracting shared similarity search logic to reduce duplication.**\n\nThe `GetSimilarCore` implementation (lines 49-67) is nearly identical to `FAISSDocumentStore.GetSimilarCore`. Both perform the same sequence: filter by metadata, compute cosine similarity, order by score descending, annotate results, and take topK.\n\nSince multiple in-memory stores follow this pattern, consider adding a protected helper method in `DocumentStoreBase<T>` that implements this common logic, allowing concrete stores to reuse it.\n\n\n\nExample refactor in DocumentStoreBase:\n\n```csharp\nprotected IEnumerable<Document<T>> GetSimilarByCosineSimilarity(\n    IEnumerable<VectorDocument<T>> allDocuments,\n    Vector<T> queryVector,\n    int topK,\n    Dictionary<string, object> metadataFilters)\n{\n    var matchingDocuments = allDocuments\n        .Where(vectorDoc => MatchesFilters(vectorDoc.Document, metadataFilters));\n\n    var scoredDocuments = matchingDocuments\n        .Select(vectorDoc => (\n            Document: vectorDoc.Document,\n            Score: StatisticsHelper<T>.CosineSimilarity(queryVector, vectorDoc.Embedding)\n        ))\n        .OrderByDescending(x => x.Score)\n        .Take(topK);\n\n    foreach (var (document, score) in scoredDocuments)\n    {\n        document.RelevanceScore = score;\n        document.HasRelevanceScore = true;\n    }\n\n    return scoredDocuments.Select(x => x.Document).ToList();\n}\n```\n\nThen implementations can simply call:\n```csharp\nreturn GetSimilarByCosineSimilarity(_documents.Values, queryVector, topK, metadataFilters);\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/MultiModalEmbeddingModel.cs (1)</summary><blockquote>\n\n`70-82`: **Add validation for individual image paths and consider return type consistency.**\n\nThe method should validate each image path before attempting batch processing. Additionally, consider returning `Matrix<T>` instead of `IEnumerable<Vector<T>>` to align with the base class's `EmbedBatchCore` pattern.\n\n\n\nApply this diff to add validation:\n\n```diff\n     public IEnumerable<Vector<T>> EmbedImageBatch(IEnumerable<string> imagePaths)\n     {\n         if (imagePaths == null)\n             throw new ArgumentNullException(nameof(imagePaths));\n+        \n+        var pathList = imagePaths.ToList();\n+        if (pathList.Count == 0)\n+            throw new ArgumentException(\"Image paths collection cannot be empty\", nameof(imagePaths));\n+        \n+        foreach (var path in pathList)\n+        {\n+            if (string.IsNullOrWhiteSpace(path))\n+                throw new ArgumentException(\"Image path cannot be null or whitespace\", nameof(imagePaths));\n+            if (!File.Exists(path))\n+                throw new FileNotFoundException($\"Image file not found: {path}\");\n+        }\n\n         // TODO: Implement batch image embedding\n         throw new NotImplementedException(\"Multi-modal embedding requires CLIP/ONNX model integration\");\n     }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/LostInTheMiddleReranker.cs (1)</summary><blockquote>\n\n`46-46`: **Optional: Consider a more conventional initialization pattern.**\n\nThe current pattern `new List<Document<T>>(new Document<T>[sorted.Count])` pre-allocates the list with null elements that are then filled by index. While functionally correct, a more conventional approach might be clearer:\n\n```diff\n-        var reordered = new List<Document<T>>(new Document<T>[sorted.Count]);\n+        var reordered = new Document<T>[sorted.Count];\n```\n\nThen return `reordered` as-is (arrays implement `IEnumerable<T>`), or convert with `reordered.AsEnumerable()` if needed. This makes the intent clearer: you're building an array by index assignment.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary><blockquote>\n\n`35-47`: **Eliminate code duplication across embedding models.**\n\nThe `EmbedCore` implementation is nearly identical to `HuggingFaceEmbeddingModel` (same formula), with only minor variations in coefficients across `OpenAIEmbeddingModel` and `LocalTransformerEmbedding`. This violates the DRY principle and makes maintenance harder.\n\nConsider extracting a shared base class or helper method that accepts a function parameter for the trigonometric transformation:\n\n```csharp\nprotected Vector<T> CreateHashBasedEmbedding(string text, Func<double, double> transform)\n{\n    var values = new T[_dimension];\n    var hash = GetDeterministicHash(text);\n    \n    for (int i = 0; i < _dimension; i++)\n    {\n        var val = NumOps.FromDouble(transform(hash * (i + 1)));\n        values[i] = val;\n    }\n    \n    return new Vector<T>(values).Normalize();\n}\n```\n\nThen each model can call it with its specific transform:\n```csharp\n// ONNXSentenceTransformer\nprotected override Vector<T> EmbedCore(string text) =>\n    CreateHashBasedEmbedding(text, x => Math.Cos(x * 0.002));\n```\n\nNote: Regarding the past Copilot overflow warning on Line 42, this is a false positive since `hash` is cast to `double` before multiplication.\n\n---\n\n`49-63`: **Extract duplicated hash function to shared utility.**\n\nThe deterministic hash implementation correctly addresses the previous critical issue about `string.GetHashCode()` nondeterminism. However, this exact method is duplicated across `HuggingFaceEmbeddingModel`, `LocalTransformerEmbedding`, `OpenAIEmbeddingModel`, and now `ONNXSentenceTransformer`.\n\nConsider extracting this to a shared utility class:\n\nIn a new file `src/Helpers/HashHelper.cs`:\n```csharp\npublic static class HashHelper\n{\n    /// <summary>\n    /// Computes a deterministic hash for a string using polynomial rolling hash.\n    /// </summary>\n    public static int GetDeterministicHash(string text)\n    {\n        if (string.IsNullOrEmpty(text))\n            return 0;\n\n        unchecked\n        {\n            int hash = 23;\n            foreach (char c in text)\n            {\n                hash = hash * 31 + c;\n            }\n            return hash;\n        }\n    }\n}\n```\n\nThen all embedding models can simply call `HashHelper.GetDeterministicHash(text)`.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/DiversityReranker.cs (1)</summary><blockquote>\n\n`67-79`: **Consider extracting similarity calculation to a helper method.**\n\nThe token overlap similarity calculation (lines 67-79) is embedded in nested loops, which reduces readability. Extracting it to a private helper method would improve maintainability and allow for easier testing or alternative similarity metrics.\n\n\n\nExample:\n\n```csharp\nprivate T CalculateTokenOverlapSimilarity(string content1, string content2)\n{\n    if (string.IsNullOrEmpty(content1) || string.IsNullOrEmpty(content2))\n        return NumOps.Zero;\n    \n    var tokens1 = content1.Split(new[] { ' ', '\\t', '\\n', '\\r' }, StringSplitOptions.RemoveEmptyEntries);\n    var tokens2 = content2.Split(new[] { ' ', '\\t', '\\n', '\\r' }, StringSplitOptions.RemoveEmptyEntries);\n    var set1 = new HashSet<string>(tokens1);\n    var set2 = new HashSet<string>(tokens2);\n    var intersection = set1.Intersect(set2).Count();\n    var union = set1.Union(set2).Count();\n    var similarity = union > 0 ? (double)intersection / union : 0.0;\n    return NumOps.FromDouble(similarity);\n}\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (3)</summary><blockquote>\n\n`88-92`: **Consider using TryGetValue pattern for efficiency.**\n\nThe code checks `ContainsKey` then accesses the indexer multiple times (lines 88, 92). For large corpora with many terms, this results in redundant dictionary lookups.\n\n\n\nApply this diff to consolidate lookups:\n\n```diff\n-        if (!_termFrequencies.ContainsKey(docId) || !_termFrequencies[docId].ContainsKey(term))\n+        if (!_termFrequencies.TryGetValue(docId, out var docTerms) || !docTerms.TryGetValue(term, out var tf))\n             return NumOps.Zero;\n\n-        var tf = _termFrequencies[docId][term];\n-        var docLength = _documentLengths.ContainsKey(docId) ? _documentLengths[docId] : NumOps.Zero;\n+        var docLength = _documentLengths.TryGetValue(docId, out var len) ? len : NumOps.Zero;\n```\n\n---\n\n`153-156`: **Redundant Distinct() on dictionary keys.**\n\nDictionary keys are already unique by definition, so `termCounts.Keys.Distinct()` is redundant. While harmless, it adds unnecessary overhead.\n\n\n\nApply this diff:\n\n```diff\n-            foreach (var term in termCounts.Keys.Distinct())\n+            foreach (var term in termCounts.Keys)\n```\n\n---\n\n`170-195`: **Consider extracting shared retriever utilities.**\n\nBoth `Tokenize` and `MatchesFilters` are duplicated verbatim in TFIDFRetriever. Consider moving them to `RetrieverBase<T>` or a shared utility class to eliminate duplication and ensure consistent behavior across retrievers.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (1)</summary><blockquote>\n\n`25-40`: **Consider validating weight parameters.**\n\nThe constructor accepts `vectorWeight` and `keywordWeight` without validation. Negative, zero, or extremely large weights could produce unexpected results.\n\n\n\nAdd basic validation:\n```diff\n         _vectorStore = vectorStore;\n         _keywordStore = keywordStore;\n+        \n+        // Validate weights are non-negative\n+        var zero = NumOps.Zero;\n+        if (NumOps.LessThan(vectorWeight, zero) || NumOps.LessThan(keywordWeight, zero))\n+            throw new ArgumentException(\"Weights must be non-negative\");\n+        \n         _vectorWeight = vectorWeight;\n         _keywordWeight = keywordWeight;\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T15:48:53Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "2e85607917a4ef53ec4ed06ecd3d2cbc46bd3626"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87Lr5We",
      "author": {
        "login": "ooples"
      },
      "authorAssociation": "OWNER",
      "body": "All abstract methods from DocumentStoreBase have been implemented in AzureSearchDocumentStore. The class now properly overrides: DocumentCount, VectorDimension, Clear(), AddCore(), GetSimilarCore(), GetByIdCore(), and RemoveCore().",
      "submittedAt": "2025-11-04T16:00:03Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "COMMENTED",
      "commit": {
        "oid": "d54eddaa48a8017826434db69a3ca8defd40e974"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87Lr8J-",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 5**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (9)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (2)</summary><blockquote>\n\n`63-66`: **Potential ordering issue with Convert.ToDouble on generic type T.**\n\nWhile `Convert.ToDouble(s.score)` provides a workaround for ordering, this approach assumes all numeric types T can be converted to double and involves boxing/unboxing overhead. As flagged in previous reviews, a cleaner solution would be to add an `IComparable<T>` constraint or use a manual comparison with `NumOps`.\n\n---\n\n`82-90`: **Sentence splitting fails on text ending without trailing space.**\n\nThe split delimiters `\". \"`, `\"! \"`, `\"? \"` include trailing spaces, which means sentences at the end of text without trailing spaces won't split correctly. For example, `\"First. Second.\"` would incorrectly retain the period on the last sentence.\n\n\n\n\nApply this diff to fix the splitting:\n\n```diff\n-        return text\n-            .Split(new[] { \". \", \"! \", \"? \" }, StringSplitOptions.RemoveEmptyEntries)\n-            .Select(s => s.Trim())\n-            .Where(s => !string.IsNullOrWhiteSpace(s))\n-            .ToList();\n+        return text\n+            .Split(new[] { '.', '!', '?' }, StringSplitOptions.RemoveEmptyEntries)\n+            .Select(s => s.Trim())\n+            .Where(s => !string.IsNullOrWhiteSpace(s))\n+            .ToList();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (1)</summary><blockquote>\n\n`77-87`: **O(n┬▓) complexity from IndexOf in OrderBy.**\n\nLine 85 uses `OrderBy(x => sentences.IndexOf(x.Sentence))` which calls `IndexOf` for each selected sentence, resulting in O(n┬▓) complexity. For documents with many sentences, this could cause performance issues.\n\n\n\n\nApply this diff to track indices during scoring:\n\n```diff\n var scoredSentences = sentences\n-    .Select((sentence, index) => new\n+    .Select((sentence, idx) => new\n     {\n         Sentence = sentence,\n-        Score = ScoreSentence(sentence, queryTokens, index, sentences.Count)\n+        Score = ScoreSentence(sentence, queryTokens, idx, sentences.Count),\n+        OriginalIndex = idx\n     })\n     .OrderByDescending(x => x.Score)\n     .Take(targetSentenceCount)\n-    .OrderBy(x => sentences.IndexOf(x.Sentence))\n+    .OrderBy(x => x.OriginalIndex)\n     .Select(x => x.Sentence)\n     .ToList();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (2)</summary><blockquote>\n\n`56-67`: **Remove redundant dictionary lookups.**\n\nSince lines 41-54 add every document's ID to the scores dictionary, all documents are guaranteed to have entries by line 56. The `TryGetValue` fallback on line 57 and the `ContainsKey` check on line 62 are redundant.\n\n\n\nApply this diff to eliminate the unnecessary checks:\n\n```diff\n var reranked = documents\n-    .OrderByDescending(d => scores.TryGetValue(d.Id, out var score) ? Convert.ToDouble(score) : 0.0)\n+    .OrderByDescending(d => Convert.ToDouble(scores[d.Id]))\n     .ToList();\n\n foreach (var doc in reranked)\n {\n-    if (scores.ContainsKey(doc.Id))\n-    {\n-        doc.RelevanceScore = scores[doc.Id];\n-        doc.HasRelevanceScore = true;\n-    }\n+    doc.RelevanceScore = scores[doc.Id];\n+    doc.HasRelevanceScore = true;\n }\n```\n\n---\n\n`111-114`: **Set `HasRelevanceScore` flag after assigning scores.**\n\nAfter assigning `RelevanceScore` on line 113, you must set `doc.HasRelevanceScore = true` so that downstream logic recognizes these documents as scored.\n\n\n\nApply this diff:\n\n```diff\n foreach (var doc in reranked)\n {\n     doc.RelevanceScore = scores[doc.Id];\n+    doc.HasRelevanceScore = true;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary><blockquote>\n\n`42-57`: **Complete the chain-of-thought retrieval implementation.**\n\nThe `Retrieve` method still throws `NotImplementedException`, making this retriever non-functional despite being marked as \"ready for integration testing\" in the PR summary. Additionally, the method signature lacks metadata filter support present in other retrievers (see `ParentDocumentRetriever.RetrieveCore`).\n\nPlease implement the workflow described in the TODO or mark the class as internal/experimental until complete.\n\n\n\n\n\nRun the following to check if other retrievers support metadata filtering:\n\n```shell\n#!/bin/bash\n# Check retriever signatures for metadata filter parameters\nrg -nP --type=cs '\\bRetrieve(Core)?\\s*\\([^)]*metadataFilter' -A2\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (2)</summary><blockquote>\n\n`110-121`: **Address previous feedback: handle long sentences and use StringBuilder.**\n\nTwo issues remain from previous reviews:\n\n1. **Empty summary on long first sentence** (already flagged): When the first sentence exceeds `_maxSummaryLength`, the loop breaks without appending anything, returning an empty string instead of a truncated result.\n\n2. **String concatenation in loop** (already flagged at line 117): Using `+=` in a loop is inefficient.\n\n\n\n\n\nApply both fixes:\n\n```diff\n+using System.Text;\n+\n public string SummarizeText(string text)\n {\n     if (string.IsNullOrEmpty(text)) return text;\n\n     if (text.Length <= _maxSummaryLength)\n     {\n         return text;\n     }\n\n     var sentences = SplitIntoSentences(text);\n     var importantSentences = ExtractImportantSentences(sentences);\n\n-    var summary = string.Empty;\n+    var summary = new StringBuilder();\n     foreach (var sentence in importantSentences)\n     {\n-        if (summary.Length + sentence.Length > _maxSummaryLength)\n+        if (summary.Length + sentence.Length + 1 > _maxSummaryLength)\n         {\n+            if (summary.Length == 0)\n+            {\n+                return text.Substring(0, Math.Min(text.Length, _maxSummaryLength));\n+            }\n             break;\n         }\n-        summary += sentence + \" \";\n+        summary.Append(sentence).Append(' ');\n     }\n\n-    return summary.Trim();\n+    return summary.ToString().Trim();\n }\n```\n\n---\n\n`153-177`: **Use StringBuilder and extract shared helper.**\n\nTwo concerns:\n\n1. **String concatenation in loop** (already flagged at line 161): Building `currentSentence` with `+=` is inefficient for long texts.\n\n2. **Code duplication**: This exact method appears in `LLMContextCompressor.cs` (lines 137-161) and `AutoCompressor.cs` (lines 113-147, slightly different). Extract to a shared utility class.\n\n\n\n\nFix concatenation:\n\n```diff\n+using System.Text;\n+\n private List<string> SplitIntoSentences(string text)\n {\n     var sentences = new List<string>();\n     var sentenceEndings = new[] { \". \", \"! \", \"? \", \".\\n\", \"!\\n\", \"?\\n\" };\n-    var currentSentence = string.Empty;\n+    var currentSentence = new StringBuilder();\n\n     for (int i = 0; i < text.Length; i++)\n     {\n-        currentSentence += text[i];\n+        currentSentence.Append(text[i]);\n\n-        var matchedEnding = sentenceEndings.FirstOrDefault(ending => currentSentence.EndsWith(ending));\n+        var current = currentSentence.ToString();\n+        var matchedEnding = sentenceEndings.FirstOrDefault(ending => current.EndsWith(ending));\n         if (matchedEnding != null)\n         {\n-            sentences.Add(currentSentence.Trim());\n-            currentSentence = string.Empty;\n+            sentences.Add(current.Trim());\n+            currentSentence.Clear();\n         }\n     }\n\n-    if (!string.IsNullOrWhiteSpace(currentSentence))\n+    var final = currentSentence.ToString();\n+    if (!string.IsNullOrWhiteSpace(final))\n     {\n-        sentences.Add(currentSentence.Trim());\n+        sentences.Add(final.Trim());\n     }\n\n     return sentences;\n }\n```\n\nThen extract to a shared helper class (e.g., `TextProcessingHelpers` in `Helpers` folder) to eliminate duplication with `LLMContextCompressor` and `AutoCompressor`.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (1)</summary><blockquote>\n\n`137-161`: **Use StringBuilder and extract shared helper.**\n\nTwo concerns:\n\n1. **String concatenation in loop** (already flagged at line 145): Building `currentSentence` with `+=` is inefficient.\n\n2. **Code duplication**: This method is identical to `DocumentSummarizer.cs` (lines 153-177). Extract to a shared utility class as noted in the `DocumentSummarizer` review.\n\n\n\n\nApply the StringBuilder fix and extract to shared helper:\n\n```diff\n+using System.Text;\n+\n private List<string> SplitIntoSentences(string text)\n {\n     var sentences = new List<string>();\n     var sentenceEndings = new[] { \". \", \"! \", \"? \", \".\\n\", \"!\\n\", \"?\\n\" };\n-    var currentSentence = string.Empty;\n+    var currentSentence = new StringBuilder();\n\n     for (int i = 0; i < text.Length; i++)\n     {\n-        currentSentence += text[i];\n+        currentSentence.Append(text[i]);\n\n-        var matchedEnding = sentenceEndings.FirstOrDefault(ending => currentSentence.EndsWith(ending));\n+        var current = currentSentence.ToString();\n+        var matchedEnding = sentenceEndings.FirstOrDefault(ending => current.EndsWith(ending));\n         if (matchedEnding != null)\n         {\n-            sentences.Add(currentSentence.Trim());\n-            currentSentence = string.Empty;\n+            sentences.Add(current.Trim());\n+            currentSentence.Clear();\n         }\n     }\n\n-    if (!string.IsNullOrWhiteSpace(currentSentence))\n+    var final = currentSentence.ToString();\n+    if (!string.IsNullOrWhiteSpace(final))\n     {\n-        sentences.Add(currentSentence.Trim());\n+        sentences.Add(final.Trim());\n     }\n\n     return sentences;\n }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (1)</summary><blockquote>\n\n`94-102`: **Use `TryGetValue` to avoid double dictionary lookup.**\n\nLines 94-96 perform two dictionary lookups (ContainsKey + indexer). Replace with a single `TryGetValue` call.\n\n\nApply this diff:\n\n```diff\n-if (scores.ContainsKey(doc.Id))\n+if (scores.TryGetValue(doc.Id, out var existingScore))\n {\n-    scores[doc.Id] = NumOps.Add(scores[doc.Id], rrfScore);\n+    scores[doc.Id] = NumOps.Add(existingScore, rrfScore);\n }\n else\n {\n     scores[doc.Id] = rrfScore;\n     allDocs[doc.Id] = doc;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (1)</summary><blockquote>\n\n`179-186`: **Extract shared tokenization method.**\n\nThis `Tokenize` method is identical to the one in `LLMContextCompressor.cs` (lines 163-170). Extract to a shared utility class (e.g., `TextProcessingHelpers`) along with `SplitIntoSentences` to maintain consistency and reduce duplication.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (1)</summary><blockquote>\n\n`163-170`: **Extract shared tokenization method.**\n\nThis `Tokenize` method is identical to the one in `DocumentSummarizer.cs` (lines 179-186). Extract both to a shared utility class as noted in the `DocumentSummarizer` review.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 2e85607917a4ef53ec4ed06ecd3d2cbc46bd3626 and d54eddaa48a8017826434db69a3ca8defd40e974.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (9)</summary>\n\n* `src/Interfaces/IContextCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (2)</summary>\n\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs\n* src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (7)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (25-105)\n* `List` (39-53)\n* `List` (73-76)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (1)</summary>\n\n* `INumericOperations` (33-61)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (2)</summary>\n\n* `List` (40-64)\n* `List` (114-148)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (4)</summary>\n\n* `List` (45-65)\n* `List` (73-95)\n* `List` (137-161)\n* `List` (163-170)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (1)</summary>\n\n* `IEnumerable` (57-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IContextCompressor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (3)</summary>\n\n* `T` (92-102)\n* `List` (41-80)\n* `List` (82-90)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (2)</summary>\n\n* `List` (39-53)\n* `List` (73-76)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (3)</summary>\n\n* `T` (92-102)\n* `List` (41-80)\n* `List` (82-90)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (25-105)\n* `List` (39-53)\n* `List` (73-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (5)</summary>\n\n* `List` (45-65)\n* `List` (72-91)\n* `List` (123-137)\n* `List` (153-177)\n* `List` (179-186)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (3)</summary>\n\n* `T` (86-103)\n* `T` (105-119)\n* `List` (170-178)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (25-105)\n* `List` (39-53)\n* `List` (73-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (2)</summary>\n\n* `List` (40-64)\n* `List` (114-148)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (2)</summary>\n\n* `ContextCompressorBase` (25-105)\n* `List` (39-53)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (5)</summary>\n\n* `List` (45-65)\n* `List` (72-91)\n* `List` (123-137)\n* `List` (153-177)\n* `List` (179-186)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (27-203)\n* `IList` (154-202)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/RerankingStrategyBase.cs (1)</summary>\n\n* `List` (27-27)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (4)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IContextCompressor.cs (1)</summary><blockquote>\n\n`1-61`: **LGTM! Well-designed interface with excellent documentation.**\n\nThe interface is clean, well-documented, and follows best practices. The optional parameters dictionary provides good extensibility for different compression strategies.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (2)</summary><blockquote>\n\n`25-35`: **LGTM! Constructor validation is now complete.**\n\nThe constructor properly validates both `maxOutputLength` (must be positive) and `compressionRatio` (must be between 0 and 1). The `_compressionRatio` field is used on line 75 to calculate target sentence count.\n\n---\n\n`114-148`: **Good sentence splitting implementation.**\n\nThis character-by-character approach with StringBuilder is more robust than simple string splitting, as it properly handles sentence boundaries and filters out short fragments (< 10 characters).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary><blockquote>\n\n`29-37`: **Constructor implementation is sound.**\n\nThe null checks and field initialization are appropriate. The stored fields will be used once the `Retrieve` method is fully implemented.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T16:02:11Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "d54eddaa48a8017826434db69a3ca8defd40e974"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LsSNo",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 2**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (1)</summary><blockquote>\n\n`102-126`: **Use StringBuilder and eliminate code duplication.**\n\nLine 110 performs string concatenation in a loop, which is inefficient for large texts. Additionally, this method is nearly identical to `SplitIntoSentences` in `DocumentSummarizer.cs`, violating DRY principles.\n\n\nApply this diff to use StringBuilder:\n\n```diff\n private List<string> SplitIntoSentences(string text)\n {\n     var sentences = new List<string>();\n     var sentenceEndings = new[] { \". \", \"! \", \"? \", \".\\n\", \"!\\n\", \"?\\n\" };\n-    var currentSentence = string.Empty;\n+    var currentSentence = new StringBuilder();\n\n     for (int i = 0; i < text.Length; i++)\n     {\n-        currentSentence += text[i];\n+        currentSentence.Append(text[i]);\n\n-        var matchedEnding = sentenceEndings.FirstOrDefault(ending => currentSentence.EndsWith(ending));\n+        var current = currentSentence.ToString();\n+        var matchedEnding = sentenceEndings.FirstOrDefault(ending => current.EndsWith(ending));\n         if (matchedEnding != null)\n         {\n-            sentences.Add(currentSentence.Trim());\n-            currentSentence = string.Empty;\n+            sentences.Add(current.Trim());\n+            currentSentence.Clear();\n         }\n     }\n\n-    if (!string.IsNullOrWhiteSpace(currentSentence))\n+    var final = currentSentence.ToString();\n+    if (!string.IsNullOrWhiteSpace(final))\n     {\n-        sentences.Add(currentSentence.Trim());\n+        sentences.Add(final.Trim());\n     }\n\n     return sentences;\n }\n```\n\nConsider extracting this method to a shared utility class to avoid duplication with `DocumentSummarizer.cs`.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (1)</summary><blockquote>\n\n`128-135`: **Extract duplicated tokenization logic to shared utility.**\n\nThis `Tokenize` method is identical to the one in `DocumentSummarizer.cs`. Extract it to a shared text utility class to eliminate duplication and ensure consistent tokenization across the codebase.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between d54eddaa48a8017826434db69a3ca8defd40e974 and 72f2fd674bf9265ffd09a3923f36851f474d2c8c.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (1)</summary>\n\n* `src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (1)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (25-105)\n* `List` (39-53)\n* `List` (73-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/AutoCompressor.cs (1)</summary>\n\n* `List` (40-64)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (5)</summary>\n\n* `List` (45-65)\n* `List` (72-91)\n* `List` (123-137)\n* `List` (153-177)\n* `List` (179-186)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (2)</summary><blockquote>\n\n`40-60`: **LGTM!**\n\nThe compression logic correctly preserves all document metadata including the `HasRelevanceScore` flag that downstream logic depends on.\n\n---\n\n`91-100`: **LGTM!**\n\nThe relevance scoring uses a straightforward token overlap metric that's appropriate for this use case.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T16:17:57Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "72f2fd674bf9265ffd09a3923f36851f474d2c8c"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LsqEq",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 1**\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (5)</summary><blockquote>\n\n`72-80`: **Simplify validation by removing redundant null check.**\n\nThe explicit null check at line 72 is redundant since `string.IsNullOrWhiteSpace` at line 77 already handles null strings.\n\n\nApply this diff:\n\n```diff\n-        if (prompt == null)\n-        {\n-            throw new ArgumentNullException(nameof(prompt), \"Prompt cannot be null.\");\n-        }\n-\n         if (string.IsNullOrWhiteSpace(prompt))\n         {\n-            throw new ArgumentException(\"Prompt cannot be empty or whitespace.\", nameof(prompt));\n+            throw new ArgumentNullException(nameof(prompt), \"Prompt cannot be null, empty, or whitespace.\");\n         }\n```\n\n---\n\n`95-103`: **Simplify validation by removing redundant null check.**\n\nSame issue as in the `Generate` method: the explicit null check at line 95 is redundant since `string.IsNullOrWhiteSpace` at line 100 already handles null strings.\n\n\nApply this diff:\n\n```diff\n-        if (query == null)\n-        {\n-            throw new ArgumentNullException(nameof(query), \"Query cannot be null.\");\n-        }\n-\n         if (string.IsNullOrWhiteSpace(query))\n         {\n-            throw new ArgumentException(\"Query cannot be empty or whitespace.\", nameof(query));\n+            throw new ArgumentNullException(nameof(query), \"Query cannot be null, empty, or whitespace.\");\n         }\n```\n\n---\n\n`160-164`: **Consider validating document content when building prompts.**\n\nThe loop assumes all documents have non-null, non-empty content. If a document's `Content` is null or empty, the prompt will contain empty context blocks (e.g., `[1] \\n\\n`), which could confuse the generator.\n\n\nAdd defensive validation:\n\n```diff\n         for (int i = 0; i < context.Count; i++)\n         {\n-            promptBuilder.AppendLine($\"[{i + 1}] {context[i].Content}\");\n-            promptBuilder.AppendLine();\n+            var content = context[i].Content;\n+            if (!string.IsNullOrWhiteSpace(content))\n+            {\n+                promptBuilder.AppendLine($\"[{i + 1}] {content}\");\n+                promptBuilder.AppendLine();\n+            }\n         }\n```\n\n---\n\n`189-189`: **Cache the regex pattern for better performance.**\n\nCreating a new `Regex` instance on every call is inefficient. Move it to a static readonly field or use `RegexOptions.Compiled` to improve performance when citations are extracted frequently.\n\n\nApply this diff:\n\n```diff\n+    private static readonly System.Text.RegularExpressions.Regex CitationPattern = \n+        new System.Text.RegularExpressions.Regex(@\"\\[(\\d+)\\]\", System.Text.RegularExpressions.RegexOptions.Compiled);\n+\n     protected virtual Dictionary<int, Document<T>> ExtractCitations(string generatedText, List<Document<T>> sourceDocuments)\n     {\n         var citations = new Dictionary<int, Document<T>>();\n-        var citationPattern = new System.Text.RegularExpressions.Regex(@\"\\[(\\d+)\\]\");\n-        var matches = citationPattern.Matches(generatedText);\n+        var matches = CitationPattern.Matches(generatedText);\n```\n\n---\n\n`192-192`: **Remove unnecessary cast.**\n\nThe `.Cast<System.Text.RegularExpressions.Match>()` is unnecessary. `MatchCollection` already implements `IEnumerable`, and the non-generic `foreach` handles it correctly. The cast adds overhead without benefit.\n\n\nApply this diff:\n\n```diff\n-        foreach (System.Text.RegularExpressions.Match match in matches.Cast<System.Text.RegularExpressions.Match>())\n+        foreach (System.Text.RegularExpressions.Match match in matches)\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 72f2fd674bf9265ffd09a3923f36851f474d2c8c and 351c3dea4d2ca16823303d522d76f76de8960678.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (2)</summary>\n\n* `src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (1)</summary><blockquote>\n\n`42-61`: **LGTM!**\n\nThe constructor properly validates that both token limits are positive before setting the properties.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T16:33:48Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "351c3dea4d2ca16823303d522d76f76de8960678"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LtsMC",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 0**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (13)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (2)</summary><blockquote>\n\n`35-38`: **Zero-vector workaround for corpus access.**\n\nThis retriever uses the same fragile zero-vector pattern identified in BM25Retriever to retrieve all documents. As noted in previous reviews, both keyword-based retrievers need a dedicated `GetAllDocuments()` method in the `IDocumentStore<T>` interface instead of misusing the vector similarity API.\n\n---\n\n`129-143`: **Guard against empty term lists to prevent runtime exception.**\n\nWhen a document's content produces no tokens (e.g., empty content or only punctuation), `termCounts.Values.Max()` at line 133 throws `InvalidOperationException`, breaking retrieval. This issue was previously flagged but remains unresolved.\n\n\nApply this diff to handle empty term counts:\n\n```diff\n             foreach (var doc in documents)\n             {\n                 var termTfidf = new Dictionary<string, T>();\n                 var termCounts = docTermFreq[doc.Id];\n+                if (termCounts.Count == 0)\n+                {\n+                    _tfidf[doc.Id] = termTfidf;\n+                    continue;\n+                }\n                 var maxFreq = termCounts.Values.Max();\n \n                 foreach (var termCount in termCounts)\n                 {\n                     var tf = NumOps.FromDouble((double)termCount.Value / (double)maxFreq);\n                     var tfidf = NumOps.Multiply(tf, _idf[termCount.Key]);\n                     termTfidf[termCount.Key] = tfidf;\n                 }\n \n                 _tfidf[doc.Id] = termTfidf;\n             }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary><blockquote>\n\n`51-65`: **Consolidate duplicated hash method to base class.**\n\n`GetDeterministicHash` is duplicated identically across `HuggingFaceEmbeddingModel.cs`, `OpenAIEmbeddingModel.cs`, `LocalTransformerEmbedding.cs`, and `ONNXSentenceTransformer.cs`. Move it to `EmbeddingModelBase<T>` as a protected method to eliminate duplication and simplify maintenance.\n\n---\n\n`22-35`: **Unused API parameters create misleading contract.**\n\nThe constructor accepts `modelName` and `apiKey`, strongly implying this class calls the HuggingFace API. However, `EmbedCore` generates synthetic hash-based embeddings and never uses these fields. This will break production deployments expecting real semantic embeddings.\n\n\n\n\nEither implement actual HuggingFace API calls or rename the class to reflect its synthetic nature (e.g., `SyntheticEmbeddingModel`) and remove the misleading parameters.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary><blockquote>\n\n`22-37`: **Placeholder implementation creates production risk.**\n\nThe constructor requires an `apiKey` and accepts `modelName`, strongly suggesting OpenAI API integration. However, `EmbedCore` never calls OpenAIΓÇöit returns synthetic cosine-based vectors. This will silently fail in production when developers expect real semantic embeddings.\n\n\n\n\nEither implement actual OpenAI API calls using the stored credentials, or rename to `SyntheticEmbeddingModel` and remove the misleading API parameters.\n\n---\n\n`53-67`: **Extract duplicated method to base class.**\n\nThis method is duplicated identically in `HuggingFaceEmbeddingModel.cs`, `LocalTransformerEmbedding.cs`, and `ONNXSentenceTransformer.cs`. Move `GetDeterministicHash` to `EmbeddingModelBase<T>` as a protected method.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (3)</summary><blockquote>\n\n`21-33`: **Unused modelPath creates misleading API.**\n\nThe constructor validates and stores `modelPath`, implying this class loads a local transformer model. However, `EmbedCore` never uses `_modelPath`ΓÇöit generates synthetic hash-based embeddings. Developers will expect real model inference but receive placeholders.\n\n\n\n\nEither implement actual local transformer loading from `_modelPath` or remove the parameter and rename to reflect synthetic behavior.\n\n---\n\n`49-63`: **Eliminate duplicated helper method.**\n\n`GetDeterministicHash` is duplicated across all four embedding model files. Move it to `EmbeddingModelBase<T>` as a protected method.\n\n---\n\n`35-47`: **Potential integer overflow in embedding calculation.**\n\nLine 42 computes `(double)hash * (i + 1) * 0.003`. For large dimensions, the multiplication `hash * (i + 1)` can overflow `int` before casting to `double`, producing incorrect embeddings.\n\n\n\nCast to double before multiplication:\n\n```diff\n for (int i = 0; i < _dimension; i++)\n {\n-    var val = NumOps.FromDouble(Math.Sin((double)hash * (i + 1) * 0.003));\n+    var val = NumOps.FromDouble(Math.Sin((double)hash * (double)(i + 1) * 0.003));\n     values[i] = val;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (3)</summary><blockquote>\n\n`21-33`: **Unused modelPath parameter misleads users.**\n\nThe constructor validates and stores `modelPath`, implying ONNX model loading. However, `EmbedCore` ignores `_modelPath` and generates synthetic hash-based embeddings. This breaks the expected contract and will cause silent failures in production.\n\n\n\n\nEither implement actual ONNX model loading from `_modelPath` or remove the parameter and document this as a synthetic placeholder.\n\n---\n\n`49-63`: **Move duplicated method to base class.**\n\n`GetDeterministicHash` is duplicated identically across `HuggingFaceEmbeddingModel.cs`, `OpenAIEmbeddingModel.cs`, `LocalTransformerEmbedding.cs`, and this file. Consolidate it in `EmbeddingModelBase<T>` as a protected method.\n\n---\n\n`35-47`: **Potential integer overflow in embedding calculation.**\n\nLine 42 computes `(double)hash * (i + 1) * 0.002`. When `dimension` is large, `hash * (i + 1)` can overflow `int` before the cast to `double`, corrupting higher-dimensional embeddings.\n\n\n\nCast to double before multiplication:\n\n```diff\n for (int i = 0; i < _dimension; i++)\n {\n-    var val = NumOps.FromDouble(Math.Cos((double)hash * (i + 1) * 0.002));\n+    var val = NumOps.FromDouble(Math.Cos((double)hash * (double)(i + 1) * 0.002));\n     values[i] = val;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (1)</summary><blockquote>\n\n`108-111`: **Missing HasRelevanceScore flag assignment.**\n\nAfter assigning `RelevanceScore`, you must also set `doc.HasRelevanceScore = true`. This flag is used by downstream components to determine whether a document has been scored. Without it, these reranked documents may be incorrectly treated as unscored.\n\n\n\nApply this diff to fix the issue:\n\n```diff\n         foreach (var doc in reranked)\n         {\n             doc.RelevanceScore = scores[doc.Id];\n+            doc.HasRelevanceScore = true;\n         }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (2)</summary><blockquote>\n\n`77-85`: **Extract duplicate tokenization logic to a shared helper.**\n\nThe `Tokenize` method is duplicated verbatim in `BM25Retriever.cs` (lines 169-177). Consider extracting this to `RetrieverBase<T>` or a shared `TextProcessingHelper` to maintain a single implementation.\n\n---\n\n`146-161`: **Extract duplicate filter matching logic to a shared helper.**\n\nThe `MatchesFilters` method is duplicated verbatim in `BM25Retriever.cs` (lines 179-194). Consider extracting this to `RetrieverBase<T>` as a protected helper method to eliminate duplication.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (1)</summary><blockquote>\n\n`152-155`: **Remove redundant `Distinct()` call.**\n\nDictionary keys are already unique, so `.Distinct()` on line 152 is unnecessary and adds overhead. The document frequency increment logic is correct without it.\n\n\nApply this diff:\n\n```diff\n-                foreach (var term in termCounts.Keys.Distinct())\n+                foreach (var term in termCounts.Keys)\n                 {\n                     _documentFrequencies[term]++;\n                 }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (1)</summary><blockquote>\n\n`56-64`: **Remove redundant dictionary checks for cleaner code.**\n\nSince the loop at lines 41-54 adds every `doc.Id` to the `scores` dictionary, all documents are guaranteed to have entries by line 56. The `TryGetValue` check at line 57 and the `Where` filter at line 60 are redundant and add unnecessary overhead.\n\n\n\nApply this diff to simplify the code:\n\n```diff\n         var reranked = documents\n-            .OrderByDescending(d => scores.TryGetValue(d.Id, out var score) ? Convert.ToDouble(score) : 0.0)\n+            .OrderByDescending(d => Convert.ToDouble(scores[d.Id]))\n             .ToList();\n\n-        foreach (var doc in reranked.Where(d => scores.ContainsKey(d.Id)))\n+        foreach (var doc in reranked)\n         {\n             doc.RelevanceScore = scores[doc.Id];\n             doc.HasRelevanceScore = true;\n         }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 351c3dea4d2ca16823303d522d76f76de8960678 and c0be21878ba289b4ea925eacff9c9a9164ad807a.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (7)</summary>\n\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (7)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `GetDeterministicHash` (51-65)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary>\n\n* `Vector` (39-51)\n* `GetDeterministicHash` (53-67)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (27-203)\n* `IList` (154-202)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `GetDeterministicHash` (51-65)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (3)</summary>\n\n* `EmbeddingModelBase` (25-175)\n* `Vector` (47-51)\n* `Vector` (96-96)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `GetDeterministicHash` (51-65)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/LocalTransformerEmbedding.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/ONNXSentenceTransformer.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (2)</summary>\n\n* `Vector` (39-51)\n* `GetDeterministicHash` (53-67)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary>\n\n* `IEnumerable` (30-75)\n* `MatchesFilters` (146-161)\n* `List` (77-85)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (5)</summary>\n\n* `T` (86-102)\n* `T` (104-118)\n* `IEnumerable` (41-84)\n* `MatchesFilters` (179-194)\n* `List` (169-177)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (10)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (1)</summary><blockquote>\n\n`20-28`: **LGTM!**\n\nConstructor properly validates the document store and initializes all necessary data structures.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (6)</summary><blockquote>\n\n`25-39`: **LGTM!**\n\nConstructor properly validates the document store, converts BM25 parameters to the generic numeric type, and initializes all necessary data structures.\n\n---\n\n`41-84`: **Retrieval logic is correct; architectural concern noted elsewhere.**\n\nThe scoring and filtering logic is correctly implemented. The zero-vector workaround at lines 46-49 is an architectural issue already flagged in past reviews and applies to both BM25 and TF-IDF retrievers.\n\n---\n\n`86-102`: **LGTM!**\n\nThe BM25 term scoring formula is correctly implemented with proper length normalization and IDF weighting. The guards for missing data prevent runtime exceptions.\n\n---\n\n`104-118`: **LGTM!**\n\nThe smoothed IDF calculation follows the BM25 standard formula with appropriate guards against edge cases.\n\n---\n\n`169-177`: **Duplicate tokenization logic.**\n\nThis method is identical to the one in `TFIDFRetriever.cs` and should be extracted to a shared location, as noted in the TFIDFRetriever review.\n\n---\n\n`179-194`: **Duplicate filter matching logic.**\n\nThis method is identical to the one in `TFIDFRetriever.cs` and should be extracted to a shared location, as noted in the TFIDFRetriever review.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/HuggingFaceEmbeddingModel.cs (1)</summary><blockquote>\n\n`37-49`: **Potential integer overflow in embedding calculation.**\n\nLine 44 computes `(double)hash * (i + 1) * 0.002`. When `dimension` is large (e.g., 10,000+), the multiplication `hash * (i + 1)` can overflow `int` before the cast to `double`, producing incorrect embeddings for higher-dimensional vectors.\n\n\n\nApply this fix to cast before multiplication:\n\n```diff\n for (int i = 0; i < _dimension; i++)\n {\n-    var val = NumOps.FromDouble(Math.Cos((double)hash * (i + 1) * 0.002));\n+    var val = NumOps.FromDouble(Math.Cos((double)hash * (double)(i + 1) * 0.002));\n     values[i] = val;\n }\n```\n\n\n\n> Likely an incorrect or invalid review comment.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/EmbeddingModels/OpenAIEmbeddingModel.cs (1)</summary><blockquote>\n\n`39-51`: **Potential integer overflow in embedding calculation.**\n\nLine 46 computes `(double)hash * (i + 1) * 0.001`. For large dimensions, `hash * (i + 1)` can overflow `int` before the cast to `double`, corrupting embeddings in higher-dimensional vectors.\n\n\n\nCast to double before multiplication:\n\n```diff\n for (int i = 0; i < _dimension; i++)\n {\n-    var val = NumOps.FromDouble(Math.Cos((double)hash * (i + 1) * 0.001));\n+    var val = NumOps.FromDouble(Math.Cos((double)hash * (double)(i + 1) * 0.001));\n     values[i] = val;\n }\n```\n\n\n\n> Likely an incorrect or invalid review comment.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/RerankingStrategies/ReciprocalRankFusion.cs (1)</summary><blockquote>\n\n`15-29`: **LGTM!**\n\nThe constructor properly validates the RRF constant `k` and the `ModifiesScores` property correctly indicates that this reranker modifies scores.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T17:20:58Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "COMMENTED",
      "commit": {
        "oid": "c0be21878ba289b4ea925eacff9c9a9164ad807a"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87Ltyol",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 5**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (1)</summary><blockquote>\n\n`68-89`: **O(n┬▓) complexity in sentence reordering (unresolved from past review).**\n\nLine 85 calls `sentences.IndexOf(x.sentence)` for each selected sentence, resulting in O(n┬▓) time complexity. For large documents with many sentences, this degrades performance.\n\n\n\nApply this diff to use index-based lookup:\n\n```diff\n public string CompressText(string query, string text)\n {\n     if (string.IsNullOrEmpty(text)) return text;\n\n     var sentences = SplitIntoSentences(text);\n-    var scoredSentences = new List<(string sentence, double score)>();\n+    var scoredSentences = new List<(string sentence, double score, int index)>();\n\n-    foreach (var sentence in sentences)\n+    for (int i = 0; i < sentences.Count; i++)\n     {\n-        var relevance = ComputeRelevance(query, sentence);\n-        scoredSentences.Add((sentence, relevance));\n+        var relevance = ComputeRelevance(query, sentences[i]);\n+        scoredSentences.Add((sentences[i], relevance, i));\n     }\n\n     var targetCount = Math.Max(1, (int)(sentences.Count * _compressionRatio));\n     var topSentences = scoredSentences\n         .OrderByDescending(x => x.score)\n         .Take(targetCount)\n-        .OrderBy(x => sentences.IndexOf(x.sentence))\n+        .OrderBy(x => x.index)\n         .Select(x => x.sentence);\n\n     return string.Join(\" \", topSentences);\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (1)</summary><blockquote>\n\n`37-52`: **Chunk content does not include the configured overlap.**\n\nWhen flushing a chunk (lines 41-46), `currentChunk.Clear()` discards all accumulated sentences. The next chunk starts fresh, so there's no actual overlap in the chunk contentΓÇöonly the position offset is adjusted. To honor `ChunkOverlap`, retain the trailing characters or sentences from the previous chunk when building the next chunk.\n\n\n\nConsider keeping the last N sentences (or characters) in `currentChunk` after flushing, where N corresponds to approximately `ChunkOverlap` characters. For example:\n\n```diff\n                    var chunkText = string.Join(\" \", currentChunk);\n                    var endPos = position + chunkText.Length;\n                    yield return (chunkText, position, endPos);\n                    \n                    position = endPos - ChunkOverlap;\n-                   currentChunk.Clear();\n-                   currentSize = 0;\n+                   // Keep sentences that fit within ChunkOverlap\n+                   var overlapSize = 0;\n+                   var overlapSentences = new List<string>();\n+                   for (int i = currentChunk.Count - 1; i >= 0 && overlapSize < ChunkOverlap; i--)\n+                   {\n+                       overlapSentences.Insert(0, currentChunk[i]);\n+                       overlapSize += currentChunk[i].Length;\n+                   }\n+                   currentChunk = overlapSentences;\n+                   currentSize = overlapSize;\n                }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (3)</summary><blockquote>\n\n`26-40`: **Constructor parameter remains unused.**\n\nThe `numericOperations` parameter is validated but never stored or used. The base class provides a static `NumOps` field, making this parameter unnecessary. This was flagged in a previous review but remains unresolved.\n\n\n\n\nConsider removing the unused parameter:\n\n```diff\n public DocumentSummarizer(\n-    INumericOperations<T> numericOperations,\n     int maxSummaryLength = 500,\n     string llmEndpoint = \"\",\n     string apiKey = \"\")\n {\n-    if (numericOperations == null)\n-        throw new ArgumentNullException(nameof(numericOperations));\n-        \n     _maxSummaryLength = maxSummaryLength > 0\n         ? maxSummaryLength\n         : throw new ArgumentOutOfRangeException(nameof(maxSummaryLength));\n```\n\n---\n\n`45-65`: **Duplicate compression logic remains.**\n\n`CompressCore` and `Summarize` (lines 72-91) contain identical logic. This violates DRY principles and was flagged in a previous review but remains unresolved.\n\n\n\n\nRefactor to eliminate duplication:\n\n```diff\n protected override List<Document<T>> CompressCore(\n     List<Document<T>> documents,\n     string query,\n     Dictionary<string, object>? options = null)\n {\n-    var summarized = new List<Document<T>>();\n-\n-    foreach (var doc in documents)\n-    {\n-        var summary = SummarizeText(doc.Content);\n-        var summarizedDoc = new Document<T>(doc.Id, summary)\n-        {\n-            Metadata = doc.Metadata,\n-            RelevanceScore = doc.RelevanceScore,\n-            HasRelevanceScore = doc.HasRelevanceScore\n-        };\n-        summarized.Add(summarizedDoc);\n-    }\n-\n-    return summarized;\n+    return Summarize(documents);\n }\n```\n\n---\n\n`98-121`: **Empty summary returned when first sentence exceeds limit.**\n\nWhen the first sentence is longer than `_maxSummaryLength`, the loop breaks at line 115 without appending anything, causing an empty string to be returned. This was flagged in a previous review but remains unresolved.\n\n\n\n\nApply this fix:\n\n```diff\n foreach (var sentence in importantSentences)\n {\n     if (summary.Length + sentence.Length > _maxSummaryLength)\n     {\n+        if (summary.Length == 0)\n+        {\n+            return text.Substring(0, Math.Min(text.Length, _maxSummaryLength));\n+        }\n         break;\n     }\n     summary.Append(sentence).Append(\" \");\n }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (1)</summary><blockquote>\n\n`102-135`: **Extract duplicated text processing utilities to shared helper.**\n\nThe `SplitIntoSentences` (lines 102-126) and `Tokenize` (lines 128-135) methods are duplicated across multiple files:\n- `DocumentSummarizer.cs` (lines 152-185)\n- `SemanticChunkingStrategy.cs` (lines 60-84)\n- `SelectiveContextCompressor.cs` (similar tokenization logic)\n\nThis violates DRY principles and increases maintenance burden.\n\n\n\nConsider extracting these utilities to a shared `TextProcessingHelper` class:\n\nCreate a new helper class:\n\n```csharp\nnamespace AiDotNet.Helpers\n{\n    public static class TextProcessingHelper\n    {\n        public static List<string> SplitIntoSentences(string text)\n        {\n            var sentences = new List<string>();\n            var sentenceEndings = new[] { \". \", \"! \", \"? \", \".\\n\", \"!\\n\", \"?\\n\" };\n            var currentSentence = new System.Text.StringBuilder();\n\n            for (int i = 0; i < text.Length; i++)\n            {\n                currentSentence.Append(text[i]);\n\n                var matchedEnding = sentenceEndings.FirstOrDefault(ending => currentSentence.ToString().EndsWith(ending));\n                if (matchedEnding != null)\n                {\n                    sentences.Add(currentSentence.ToString().Trim());\n                    currentSentence.Clear();\n                }\n            }\n\n            if (currentSentence.Length > 0 && !string.IsNullOrWhiteSpace(currentSentence.ToString()))\n            {\n                sentences.Add(currentSentence.ToString().Trim());\n            }\n\n            return sentences;\n        }\n\n        public static List<string> Tokenize(string text)\n        {\n            if (string.IsNullOrEmpty(text)) return new List<string>();\n\n            return text.ToLowerInvariant()\n                .Split(new[] { ' ', '\\t', '\\n', '\\r', '.', ',', '!', '?' }, StringSplitOptions.RemoveEmptyEntries)\n                .ToList();\n        }\n    }\n}\n```\n\nThen replace local implementations with calls to the helper:\n\n```diff\n-        private List<string> SplitIntoSentences(string text)\n-        {\n-            // ... implementation ...\n-        }\n-\n-        private List<string> Tokenize(string text)\n-        {\n-            // ... implementation ...\n-        }\n+        private List<string> SplitIntoSentences(string text) => TextProcessingHelper.SplitIntoSentences(text);\n+\n+        private List<string> Tokenize(string text) => TextProcessingHelper.Tokenize(text);\n```\n\nApply the same refactoring to `DocumentSummarizer.cs`, `SemanticChunkingStrategy.cs`, and other affected files.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (1)</summary><blockquote>\n\n`61-68`: **Avoid creating StringBuilder in chunking loop.**\n\nLine 67 creates a new `StringBuilder` inside the chunk-flushing logic, which is invoked repeatedly during splitting. Reuse the existing `StringBuilder` by extracting the overlap substring without allocating a new instance.\n\n\n\nApply this diff:\n\n```diff\n                    if (currentChunk.Length + split.Length + separator.Length > ChunkSize && currentChunk.Length > 0)\n                    {\n                        chunks.Add(currentChunk.ToString());\n                        var overlap = Math.Min(ChunkOverlap, currentChunk.Length);\n-                       currentChunk = new StringBuilder(currentChunk.ToString(currentChunk.Length - overlap, overlap));\n+                       var overlapText = currentChunk.ToString(currentChunk.Length - overlap, overlap);\n+                       currentChunk.Clear();\n+                       currentChunk.Append(overlapText);\n                    }\n```\n\nBased on past review comments.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (1)</summary><blockquote>\n\n`67-77`: **Avoid repeated ToString() calls in tight loop.**\n\nLine 71 calls `currentSentence.ToString().EndsWith(ending)` on every iteration, creating a new string each time. Cache the string representation or use a sliding window check to avoid the allocation overhead.\n\n\n\nApply this pattern:\n\n```diff\n            for (int i = 0; i < text.Length; i++)\n            {\n                currentSentence.Append(text[i]);\n-\n-               var matchedEnding = sentenceEndings.FirstOrDefault(ending => currentSentence.ToString().EndsWith(ending));\n+               \n+               var current = currentSentence.ToString();\n+               var matchedEnding = sentenceEndings.FirstOrDefault(ending => current.EndsWith(ending));\n                if (matchedEnding != null)\n                {\n-                   sentences.Add(currentSentence.ToString().Trim());\n+                   sentences.Add(current.Trim());\n                    currentSentence.Clear();\n                }\n            }\n```\n\nAlternatively, check character-by-character for the endings without allocating the full string on each iteration.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (1)</summary><blockquote>\n\n`153-177`: **Inefficient string conversion in sentence splitting loop.**\n\nLine 163 calls `currentSentence.ToString().EndsWith(ending)` on every character iteration, creating a new string allocation each time. This degrades performance, especially for long texts.\n\n\n\nRefactor to check only the last characters that were just appended:\n\n```diff\n private List<string> SplitIntoSentences(string text)\n {\n     var sentences = new List<string>();\n     var sentenceEndings = new[] { \". \", \"! \", \"? \", \".\\n\", \"!\\n\", \"?\\n\" };\n     var currentSentence = new System.Text.StringBuilder();\n\n     for (int i = 0; i < text.Length; i++)\n     {\n         currentSentence.Append(text[i]);\n\n-        var matchedEnding = sentenceEndings.FirstOrDefault(ending => currentSentence.ToString().EndsWith(ending));\n-        if (matchedEnding != null)\n+        // Check if we just completed a sentence ending\n+        var currentStr = currentSentence.ToString();\n+        if (sentenceEndings.Any(ending => ending.Length <= currentStr.Length && \n+            currentStr.Substring(currentStr.Length - ending.Length) == ending))\n         {\n-            sentences.Add(currentSentence.ToString().Trim());\n+            sentences.Add(currentStr.Trim());\n             currentSentence.Clear();\n         }\n     }\n\n     if (currentSentence.Length > 0 && !string.IsNullOrWhiteSpace(currentSentence.ToString()))\n     {\n         sentences.Add(currentSentence.ToString().Trim());\n     }\n\n     return sentences;\n }\n```\n\nOr use a more efficient approach with direct character comparison to avoid repeated `ToString()` calls.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between c0be21878ba289b4ea925eacff9c9a9164ad807a and 5389cc536ebb509f6c373d578d6191f52e74986b.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (5)</summary>\n\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (4)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (31-43)\n* `List` (62-110)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (35-46)\n* `List` (48-104)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (2)</summary>\n\n* `T` (92-102)\n* `List` (41-80)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (25-105)\n* `List` (39-53)\n* `List` (73-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (1)</summary>\n\n* `List` (61-85)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (5)</summary>\n\n* `List` (45-65)\n* `List` (72-91)\n* `List` (123-137)\n* `List` (153-177)\n* `List` (179-186)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (25-105)\n* `List` (39-53)\n* `List` (73-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (1)</summary>\n\n* `List` (61-85)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (3)</summary>\n\n* `List` (40-60)\n* `List` (102-126)\n* `List` (128-135)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (35-46)\n* `List` (48-104)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (5)</summary>\n\n* `List` (45-65)\n* `List` (72-91)\n* `List` (123-137)\n* `List` (153-177)\n* `List` (179-186)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (1)</summary><blockquote>\n\n`40-60`: **LGTM: Proper document property preservation.**\n\nThe method correctly preserves all document properties including `HasRelevanceScore` (line 54), which was flagged in past reviews and has been properly addressed.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (1)</summary><blockquote>\n\n`27-39`: **Verify position tracking aligns with actual chunk boundaries.**\n\nThe position tracking assumes each chunk starts exactly `ChunkOverlap` characters before the end of the previous chunk (`position = endPos - ChunkOverlap`). However, `SplitTextRecursive` splits text based on separator boundaries, not strict character positions, so the reported `StartPosition` and `EndPosition` may not accurately reflect where chunks actually appear in the original text.\n\n\n\nConsider whether position tracking should be based on the actual location of text in the original string, or document that positions are synthetic offsets used for overlap calculation only.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T17:25:38Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "5389cc536ebb509f6c373d578d6191f52e74986b"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87LuUxx",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 5**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (2)</summary><blockquote>\n\n`61-68`: **Combine nested if statements.**\n\nAs suggested in previous reviews, these if statements can be combined for clarity.\n\n---\n\n`41-89`: **Extract duplicated SplitTextRecursive into shared base or helper.**\n\nThis method is nearly identical to implementations in CodeAwareTextSplitter and RecursiveCharacterTextSplitter. As noted in previous reviews, extract the common logic into ChunkingStrategyBase or a static helper to eliminate duplication and ensure consistent behavior.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (1)</summary><blockquote>\n\n`75-82`: **Combine nested if statements.**\n\nAs suggested in previous reviews, these if statements can be combined for clarity.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (1)</summary><blockquote>\n\n`42-83`: **Materialize retrieval results once**  \n`denseResults` and `sparseResults` are enumerated three times (weighting, concatenation, assignment). If either retriever yields a deferred sequence (e.g., streaming from a store), this replays the retrieval work and can return inconsistent results. Grab the results into lists once and work off those collections.  \n\n\n```diff\n-        var denseResults = _denseRetriever.Retrieve(query, topK * 2, metadataFilters);\n-        var sparseResults = _sparseRetriever.Retrieve(query, topK * 2, metadataFilters);\n+        var denseResults = _denseRetriever.Retrieve(query, topK * 2, metadataFilters).ToList();\n+        var sparseResults = _sparseRetriever.Retrieve(query, topK * 2, metadataFilters).ToList();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (1)</summary><blockquote>\n\n`66-67`: **Inefficient StringBuilder creation with double ToString() call.**\n\nLine 67 calls `currentChunk.ToString()` twice: once to get the length and once to extract the substring. This creates unnecessary string allocations.\n\n\nApply this diff:\n\n```diff\n-                            var overlap = Math.Min(ChunkOverlap, currentChunk.Length);\n-                            currentChunk = new StringBuilder(currentChunk.ToString(currentChunk.Length - overlap, overlap));\n+                            var overlap = Math.Min(ChunkOverlap, currentChunk.Length);\n+                            var chunkStr = currentChunk.ToString();\n+                            currentChunk = new StringBuilder(chunkStr.Substring(chunkStr.Length - overlap, overlap));\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary><blockquote>\n\n`80-81`: **Inefficient StringBuilder creation with double ToString() call.**\n\nLine 81 calls `currentChunk.ToString()` twice, creating unnecessary string allocations. Cache the result of the first `ToString()` call.\n\n\nApply this diff:\n\n```diff\n-                            var overlap = Math.Min(ChunkOverlap, currentChunk.Length);\n-                            currentChunk = new StringBuilder(currentChunk.ToString(currentChunk.Length - overlap, overlap));\n+                            var overlap = Math.Min(ChunkOverlap, currentChunk.Length);\n+                            var chunkStr = currentChunk.ToString();\n+                            currentChunk = new StringBuilder(chunkStr.Substring(chunkStr.Length - overlap, overlap));\n```\n\n---\n\n`48-103`: **Consider extracting common splitting logic to reduce duplication.**\n\nWhile this implementation has unique handling for empty separators (lines 60-68), the core recursive splitting logic (lines 70-94) is very similar to MarkdownTextSplitter and CodeAwareTextSplitter. Consider extracting the common pattern into a shared helper or base method, with hooks for customization.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 5389cc536ebb509f6c373d578d6191f52e74986b and 21d8da8115e66a3f5de77dd822141f95e95cb167.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (4)</summary>\n\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (3)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (31-43)\n* `List` (62-109)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (54-98)\n* `Document` (100-103)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs (1)</summary>\n\n* `IEnumerable` (30-65)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/DenseRetriever.cs (1)</summary>\n\n* `IEnumerable` (32-36)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (31-43)\n* `List` (62-109)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (27-39)\n* `List` (41-89)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (1)</summary><blockquote>\n\n`17-20`: **LGTM!**\n\nThe constructor properly delegates to the base class with sensible default values for markdown chunking.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary><blockquote>\n\n`13-28`: **LGTM!**\n\nThe constructor provides sensible default separators in descending order of semantic significance (paragraph ΓåÆ sentence ΓåÆ word ΓåÆ character), and properly delegates to the base class.\n\n---\n\n`60-68`: **Empty separator handling looks correct.**\n\nWhen no valid separator remains, the code falls back to fixed-size chunking with proper overlap. The loop correctly creates overlapping windows by incrementing `i` by `ChunkSize - ChunkOverlap`.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-04T17:46:19Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "21d8da8115e66a3f5de77dd822141f95e95cb167"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87L0MkL",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 58**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (11)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/LocalTransformerEmbedding.cs (1)</summary><blockquote>\n\n`35-47`: **This implementation is still a stub - real transformer inference is missing.**\n\nAs noted in the previous review, this method generates deterministic sine-based vectors from a text hash instead of running actual transformer model inference. The `_modelPath` is never loaded, no tokenization occurs, and no neural network forward pass executes.\n\nThis contradicts the PR's claim of delivering \"complete concrete implementations\" ready for integration testing. Before merging, this class must either:\n\n1. **Implement real local transformer inference** using ONNX Runtime, TorchSharp, or similar, OR\n2. **Be clearly marked as a mock/stub** with appropriate naming (e.g., `MockLocalEmbedding` or `DeterministicHashEmbedding`) and documentation\n\n\n\n\nThe previous review provided a detailed prompt for implementing real inference - that guidance still applies. If this is intentionally a stub for testing, please rename the class and update documentation accordingly.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/LLMBasedReranker.cs (2)</summary><blockquote>\n\n`68-81`: **Null document content still causes crash in proximity scoring.**\n\nThis is the same issue flagged in a previous review. The `document` parameter can be null (when passed from Line 51), and Line 86 in `ComputeProximityScore` calls `document.ToLowerInvariant()` without null checks, causing a `NullReferenceException`. Additionally, Line 78 divides by `queryWords.Count` which could be zero despite the early return at Line 42-45 (defensive coding would use `Math.Max(1, queryWords.Count)`).\n\n\n\n\nThe previous review suggested this fix:\n\n```diff\n private T AssessRelevance(string query, string document)\n {\n+    var safeDocument = document ?? string.Empty;\n+\n     var queryWords = Tokenize(query);\n-    var docWords = Tokenize(document);\n+    var docWords = Tokenize(safeDocument);\n\n     var exactMatches = queryWords.Count(w => docWords.Contains(w));\n-    var proximityScore = ComputeProximityScore(queryWords, document);\n-    var semanticScore = ComputeSemanticSimilarity(query, document);\n+    var proximityScore = ComputeProximityScore(queryWords, safeDocument);\n+    var semanticScore = ComputeSemanticSimilarity(query, safeDocument);\n\n     var totalScore = (exactMatches * 0.4 + proximityScore * 0.3 + semanticScore * 0.3);\n-    totalScore = Math.Min(1.0, totalScore / queryWords.Count);\n+    totalScore = Math.Min(1.0, totalScore / Math.Max(1, queryWords.Count));\n\n     return NumOps.FromDouble(totalScore);\n }\n```\n\n---\n\n`39-52`: **Guard against null document content before scoring.**\n\nLine 51 passes `doc.Content` directly to `AssessRelevance`, but `Document<T>.Content` is publicly settable and can be null. This leads to a `NullReferenceException` in `ComputeProximityScore` at Line 86 when `document.ToLowerInvariant()` is called.\n\n\n\nApply this diff to sanitize document content before processing:\n\n```diff\n foreach (var doc in documents)\n {\n-    var score = AssessRelevance(query, doc.Content);\n+    var score = AssessRelevance(query, doc.Content ?? string.Empty);\n     scoredDocs.Add((doc, score));\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (1)</summary><blockquote>\n\n`83-86`: **Add validation for noiseRatio parameter.**\n\nThe XML documentation states that `noiseRatio` should be in the range 0-1 (line 76), but the constructor does not validate this constraint. Invalid values could lead to incorrect evaluation results.\n\n\n\n\nApply this diff to add validation:\n\n```diff\n     public NoiseRobustnessMetric(T noiseRatio)\n     {\n+        // Validate noise ratio is between 0 and 1\n+        if (NumOps.Compare(noiseRatio, NumOps.Zero) < 0 || NumOps.Compare(noiseRatio, NumOps.One) > 0)\n+        {\n+            throw new ArgumentOutOfRangeException(nameof(noiseRatio), \"Noise ratio must be between 0 and 1\");\n+        }\n+        \n         _noiseRatio = noiseRatio;\n     }\n```\n\n**Note:** This validation is only needed if you decide to keep the `noiseRatio` parameter. If it's truly unused (per the previous comment), remove the parameter entirely.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary><blockquote>\n\n`253-258`: **Remove `Convert.ToDouble` for generic relevance scores.**\n\n`Convert.ToDouble` requires the input to implement `IConvertible`; several of the numeric types we just enabled (e.g., `Complex<T>`) do not, so this path will hit `InvalidCastException` at runtime once those types are used. Reuse the `INumericOperations<T>` adapter (`NumOps`) that `RetrieverBase<T>` already exposes. ([learn.microsoft.com](https://learn.microsoft.com/en-us/dotnet/api/system.convert.todouble?view=net-9.0&utm_source=openai))  \n\n\n```diff\n-        var avgRelevance = retrievedDocs\n-            .Where(d => d.HasRelevanceScore)\n-            .Select(d => Convert.ToDouble(d.RelevanceScore))\n-            .DefaultIfEmpty(0.5)\n-            .Average();\n+        var avgRelevance = retrievedDocs\n+            .Where(d => d.HasRelevanceScore)\n+            .Select(d => NumOps.ToDouble(d.RelevanceScore))\n+            .DefaultIfEmpty(0.5)\n+            .Average();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (1)</summary><blockquote>\n\n`97-98`: **Enhance modelPath validation to check for empty/whitespace.**\n\nThe current validation only checks for null. An empty or whitespace string would pass validation but cause issues later.\n\n\n\n\nApply this diff:\n\n```diff\n-        _documentStore = documentStore ?? throw new ArgumentNullException(nameof(documentStore));\n-        _modelPath = modelPath ?? throw new ArgumentNullException(nameof(modelPath));\n+        _documentStore = documentStore ?? throw new ArgumentNullException(nameof(documentStore));\n+        \n+        if (string.IsNullOrWhiteSpace(modelPath))\n+            throw new ArgumentException(\"Model path cannot be null or whitespace\", nameof(modelPath));\n+        \n+        _modelPath = modelPath;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (1)</summary><blockquote>\n\n`11-56`: **Fix generic type parameter mismatch between docs and class declaration.**\n\nThe XML documentation (line 14) declares `<typeparam name=\"T\">The numeric data type used for calculations.</typeparam>`, but the class declaration (line 56) is not generic: `public class AgenticChunker : ChunkingStrategyBase`.\n\n\n\nBased on the PR's architecture rules (from .github/AI_PROJECT_RULES.md) requiring generic types throughout, apply this diff:\n\n```diff\n /// <summary>\n /// Production-ready intelligent chunker that decides where to split text based on semantic boundaries.\n /// </summary>\n /// <typeparam name=\"T\">The numeric data type used for calculations.</typeparam>\n-public class AgenticChunker : ChunkingStrategyBase\n+public class AgenticChunker<T> : ChunkingStrategyBase<T>\n {\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/ONNXSentenceTransformer.cs (1)</summary><blockquote>\n\n`22-66`: **_modelPath is ignored; no ONNX model ever loads.**\n\nDespite the ΓÇ£Production-ready ONNXΓÇ¥ docstring, `EmbedCore` (Line 38 onward) still emits deterministic hashes and never touches `_modelPath`. Anything depending on this (e.g., MultiModalEmbeddingModel, VoyageAIEmbeddingModel) will never load an ONNX model and returns junk vectors instead of real embeddings. Please either wire up ONNX Runtime here (load the session once and run inference) or throw `NotImplementedException` until the real integration lands.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/OpenAIEmbeddingModel.cs (1)</summary><blockquote>\n\n`39-51`: **OpenAIEmbeddingModel never calls OpenAI.**\n\nLine 41 still returns deterministic cosine noise and never uses `_apiKey` or `_modelName`. Teams will wire this up expecting real OpenAI embeddings and silently get junk vectors, breaking retrieval quality. Please either implement the actual OpenAI embeddings call (respecting model + dimension) or rename this to a synthetic placeholder and drop the API parameters.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (1)</summary><blockquote>\n\n`195-215`: **Preserve metadata types, set the score flag, and enforce filters here**\n\n`DocumentStoreBase<T>` relies on derived stores to filter via `MatchesFilters`, but this method currently returns every hit. It also coerces metadata into `Dictionary<string, string>`, losing non-string values that filters may depend on, and never sets `HasRelevanceScore`. Please keep the JSON metadata as `Dictionary<string, object>`, set `HasRelevanceScore = true`, and skip documents that fail `MatchesFilters` before adding them to `results`.  \n```diff\n-            var metadataObj = source[\"metadata\"]?.ToObject<Dictionary<string, string>>() ?? new Dictionary<string, string>();\n-            var metadata = new Dictionary<string, object>();\n-            foreach (var kvp in metadataObj)\n-                metadata[kvp.Key] = kvp.Value;\n+            var metadata = source[\"metadata\"]?.ToObject<Dictionary<string, object>>()\n+                           ?? new Dictionary<string, object>();\n@@\n-            var document = new Document<T>(id, docContent, metadata);\n-            document.RelevanceScore = NumOps.FromDouble(score);\n-\n-            results.Add(document);\n+            var document = new Document<T>(id, docContent, metadata)\n+            {\n+                RelevanceScore = NumOps.FromDouble(score),\n+                HasRelevanceScore = true\n+            };\n+\n+            if (MatchesFilters(document, metadataFilters))\n+            {\n+                results.Add(document);\n+            }\n``` \nAs per `DocumentStoreBase<T>.MatchesFilters`.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (1)</summary><blockquote>\n\n`152-163`: **Preserve metadata types coming back from Chroma.**\n\nDeserializing into `Dictionary<string, string>` forces every value to a string, so numeric/bool metadata can never satisfy filters (`MatchesFilters` compares the original boxed value). Materialize the JSON as `Dictionary<string, object?>` and pass those through unchanged.\n\n\nApply this diff:\n\n```diff\n-            var metadataObj = metadatas?[i]?.ToObject<Dictionary<string, string>>() ?? new Dictionary<string, string>();\n-            var metadata = new Dictionary<string, object>();\n-            foreach (var kvp in metadataObj)\n-                metadata[kvp.Key] = kvp.Value;\n-\n-            var distance = distances != null ? Convert.ToDouble(distances[i]) : 0.0;\n-\n-            var document = new Document<T>(id, doc, metadata);\n+            var metadataToken = metadatas?[i];\n+            var metadataRaw = metadataToken != null\n+                ? metadataToken.ToObject<Dictionary<string, object?>>() ?? new Dictionary<string, object?>()\n+                : new Dictionary<string, object?>();\n+            var metadata = new Dictionary<string, object>();\n+            foreach (var kvp in metadataRaw)\n+            {\n+                metadata[kvp.Key] = kvp.Value!;\n+            }\n+\n+            var distance = distances != null ? Convert.ToDouble(distances[i]) : 0.0;\n+\n+            var document = new Document<T>(id, doc, metadata);\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (21)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (2)</summary><blockquote>\n\n`139-140`: **Consider using INumericOperations abstraction consistently.**\n\nLines 139-140 use `Convert.ToDouble(d.RelevanceScore)` directly, which bypasses the `INumericOperations<T>` abstraction used throughout the framework. While this works, it's inconsistent with the design pattern.\n\n\n\nConsider checking if `INumericOperations<T>` provides a `ToDouble` conversion method, or document why direct conversion is necessary here. The framework typically uses `NumOps` for all numeric conversions to maintain type safety and consistency.\n\n---\n\n`143-146`: **Consider clarifying the normalization formula.**\n\nThe sigmoid-like normalization `robustnessRatio / (1.0 + robustnessRatio)` on line 146 produces non-linear scaling:\n- Ratio 1.0 ΓåÆ score 0.5 (no separation between top/bottom)\n- Ratio 2.0 ΓåÆ score 0.67 (top twice as good)\n- Ratio 3.0 ΓåÆ score 0.75 (top three times as good)\n\nThis may be intentional to emphasize that even modest separation indicates robustness, but the non-linearity could be surprising to users who expect linear scaling.\n\n\n\nConsider either:\n1. Document why this specific non-linear transformation was chosen, or\n2. Use a simpler linear normalization like `Math.Min(1.0, (robustnessRatio - 1.0) / k)` where `k` is a tunable threshold (e.g., 2.0), or\n3. Add the expected `_noiseRatio` into the calculation to set dynamic thresholds\n\nFor reference, when `bottomAvg = 0` (line 143), the fallback `topAvg` can be very large (e.g., 0.95), and then `0.95 / 1.95 Γëê 0.487`, which seems counterintuitive for a case with perfect separation.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/ReciprocalRankFusion.cs (2)</summary><blockquote>\n\n`41-59`: **Previous review comment not fully addressed.**\n\nThe redundant dictionary checks flagged in the previous review still exist, though in slightly different form:\n- Line 52: The `TryGetValue` fallback to 0.0 is unreachable because lines 41-49 guarantee every document is added to `scores`.\n- Line 55: The `Where` filter with `ContainsKey` will always match all documents in `reranked`.\n\n\n\nApply this diff to remove the redundant checks:\n\n```diff\n         var reranked = documents\n-            .OrderByDescending(d => scores.TryGetValue(d.Id, out var score) ? Convert.ToDouble(score) : 0.0)\n+            .OrderByDescending(d => Convert.ToDouble(scores[d.Id]))\n             .ToList();\n\n-        foreach (var doc in reranked.Where(d => scores.ContainsKey(d.Id)))\n+        foreach (var doc in reranked)\n         {\n             doc.RelevanceScore = scores[doc.Id];\n             doc.HasRelevanceScore = true;\n         }\n```\n\n---\n\n`7-7`: **Consider aligning namespace with folder structure.**\n\nThe namespace is `RerankingStrategies` but the file is in the `Rerankers` folder. While not incorrect, aligning these would improve discoverability. If the namespace structure is intentional, feel free to ignore this suggestion.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (1)</summary><blockquote>\n\n`204-208`: **Improve metadata type safety**\n\nThe current code calls `ToString()` on metadata objects without type validation. While safer than the previous implementation flagged in past reviews, it can produce unexpected results if `parent_id` is a non-string type.\n\n\n\nApply this diff for explicit type checking:\n\n```diff\n-            // Extract parent document ID from metadata\n-            var parentId = chunk.Metadata.ContainsKey(\"parent_id\") \n-                ? chunk.Metadata[\"parent_id\"].ToString() \n-                : chunk.Id;\n-\n-            if (parentId == null) continue;\n+            // Extract parent document ID from metadata\n+            string? parentId = null;\n+            if (chunk.Metadata.TryGetValue(\"parent_id\", out var parentIdObj))\n+            {\n+                parentId = parentIdObj as string ?? parentIdObj?.ToString();\n+            }\n+            \n+            parentId ??= chunk.Id;\n+            \n+            if (string.IsNullOrWhiteSpace(parentId)) continue;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/MultiModalEmbeddingModel.cs (2)</summary><blockquote>\n\n`130-131`: **Consider making MaxTokens configurable.**\n\nThe `MaxTokens` property is hardcoded to 512, while `dimension` is configurable through the constructor. For consistency and flexibility, consider adding a `maxTokens` parameter to the constructor, especially since `ONNXSentenceTransformer` accepts it as a parameter.\n\n\n\n```diff\n public MultiModalEmbeddingModel(\n     string modelPath,\n     bool normalizeEmbeddings,\n-    int dimension)\n+    int dimension,\n+    int maxTokens = 512)\n {\n     _modelPath = modelPath ?? throw new ArgumentNullException(nameof(modelPath));\n     _normalizeEmbeddings = normalizeEmbeddings;\n     _dimension = dimension;\n+    _maxTokens = maxTokens;\n }\n \n-public override int MaxTokens => 512;\n+public override int MaxTokens => _maxTokens;\n```\n\n---\n\n`176-182`: **Consider parallel processing for large image batches.**\n\nThe current implementation processes images sequentially. For large batches, parallel processing could significantly improve performance since image embedding operations are independent.\n\n\n\n```diff\n public IEnumerable<Vector<T>> EmbedImageBatch(IEnumerable<string> imagePaths)\n {\n     if (imagePaths == null)\n         throw new ArgumentNullException(nameof(imagePaths));\n \n-    return imagePaths.Select(path => EmbedImage(path));\n+    // For small batches, sequential is fine. For large batches, consider:\n+    // return imagePaths.AsParallel().Select(path => EmbedImage(path));\n+    return imagePaths.Select(path => EmbedImage(path));\n }\n```\n\nNote: Only enable parallel processing if profiling shows it's beneficial, as there's overhead for small batches.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/NER/BiLSTMCRF_NER.cs (4)</summary><blockquote>\n\n`47-99`: **Consider static dictionaries to avoid repeated allocations.**\n\nThe three dictionaries (`_commonNames`, `_commonLocations`, `_commonOrganizations`) are re-initialized on every `NamedEntityRecognizer` instantiation. Since these contain static data, consider making them `static readonly` fields initialized once, improving memory efficiency when multiple instances are created.\n\n\n\nApply this diff to use static dictionaries:\n\n```diff\n public class NamedEntityRecognizer\n {\n-    private readonly Dictionary<string, string> _commonNames;\n-    private readonly Dictionary<string, string> _commonLocations;\n-    private readonly Dictionary<string, string> _commonOrganizations;\n+    private static readonly Dictionary<string, string> _commonNames = InitializeCommonNames();\n+    private static readonly Dictionary<string, string> _commonLocations = InitializeCommonLocations();\n+    private static readonly Dictionary<string, string> _commonOrganizations = InitializeCommonOrganizations();\n     \n-    /// <summary>\n-    /// Initializes a new instance of the <see cref=\"NamedEntityRecognizer\"/> class.\n-    /// </summary>\n-    public NamedEntityRecognizer()\n-    {\n-        _commonNames = InitializeCommonNames();\n-        _commonLocations = InitializeCommonLocations();\n-        _commonOrganizations = InitializeCommonOrganizations();\n-    }\n     \n-    private Dictionary<string, string> InitializeCommonNames()\n+    private static Dictionary<string, string> InitializeCommonNames()\n```\n\n---\n\n`118-122`: **Consider more robust tokenization.**\n\nThe current whitespace-only tokenization is simple but loses important context:\n- Punctuation attached to words (e.g., \"Microsoft,\" becomes \"Microsoft,\")\n- No handling of contractions, hyphenated words, or special characters\n- Original character positions are lost\n\nFor production use, consider regex-based tokenization or a dedicated tokenizer that preserves word boundaries while handling punctuation.\n\n---\n\n`198-203`: **Expand connector word list for better multi-word entity detection.**\n\nThe method only recognizes three connectors (\"of\", \"the\", \"and\"), which may miss valid multi-word entities like \"University in Cambridge\" or \"Institute for Advanced Study\". Consider adding common prepositions and articles.\n\n\n\nExample expansion:\n\n```diff\n     private bool IsConnector(string token)\n     {\n         return token.Equals(\"of\", StringComparison.OrdinalIgnoreCase) ||\n                token.Equals(\"the\", StringComparison.OrdinalIgnoreCase) ||\n-               token.Equals(\"and\", StringComparison.OrdinalIgnoreCase);\n+               token.Equals(\"and\", StringComparison.OrdinalIgnoreCase) ||\n+               token.Equals(\"in\", StringComparison.OrdinalIgnoreCase) ||\n+               token.Equals(\"at\", StringComparison.OrdinalIgnoreCase) ||\n+               token.Equals(\"for\", StringComparison.OrdinalIgnoreCase) ||\n+               token.Equals(\"by\", StringComparison.OrdinalIgnoreCase);\n     }\n```\n\n---\n\n`101-116`: **Clarify relationship with GraphRAG.ExtractEntities to avoid confusion.**\n\nThe `GraphRAG` class in `src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs` (lines 250-279) also has an `ExtractEntities` method using regex patterns and LLM fallback. This creates potential confusion about which entity extraction method to use.\n\nConsider:\n1. Adding XML documentation explaining when to use `NamedEntityRecognizer` vs `GraphRAG.ExtractEntities`\n2. Having `GraphRAG` delegate to this class if appropriate\n3. Renaming one method to clarify intent\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/CohereEmbeddingModel.cs (2)</summary><blockquote>\n\n`25-25`: **Consider making MaxTokens model-specific.**\n\nThe `MaxTokens` property is hardcoded to 512, but different Cohere models may have different token limits. Since the `_model` parameter is already accepted in the constructor, consider using it to return the appropriate limit for each model variant.\n\nHowever, this is lower priority given that the implementation doesn't actually call the Cohere API.\n\n---\n\n`58-72`: **Code duplication: GetDeterministicHash appears in multiple embedding models.**\n\nBased on the relevant code snippets, this `GetDeterministicHash` method is duplicated across multiple embedding model files (HuggingFaceEmbeddingModel, LocalTransformerEmbedding, OpenAIEmbeddingModel, and now CohereEmbeddingModel).\n\nConsider extracting this method to a shared utility class or adding it as a protected method in `EmbeddingModelBase<T>` to follow the DRY principle.\n\n\n\nApply this approach to consolidate the hash method in the base class:\n\n```diff\n+// In EmbeddingModelBase<T>:\n+protected int GetDeterministicHash(string text)\n+{\n+    if (string.IsNullOrEmpty(text))\n+        return 0;\n+\n+    unchecked\n+    {\n+        int hash = 23;\n+        foreach (char c in text)\n+        {\n+            hash = (hash * 31) + c;\n+        }\n+        return hash;\n+    }\n+}\n```\n\nThen remove the duplicate implementations from all derived classes.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/LostInTheMiddleReranker.cs (1)</summary><blockquote>\n\n`23-28`: **Remove unnecessary empty constructor.**\n\nThe parameterless constructor has no logic and can be removed. C# will provide a default constructor automatically.\n\n\n\n```diff\n-    /// <summary>\n-    /// Initializes a new instance of the <see cref=\"LostInTheMiddleReranker{T}\"/> class.\n-    /// </summary>\n-    public LostInTheMiddleReranker()\n-    {\n-    }\n-\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs (2)</summary><blockquote>\n\n`40-46`: **Inconsistent vector dimension initialization logic.**\n\nThe constructor sets `_vectorDimension` from a parameter (line 37), but `AddCore` treats it as if it might be 0 and resets it from the first document (lines 42-43). This creates ambiguity about the source of truth for vector dimensions.\n\n\n\nIf the constructor parameter is removed (as suggested earlier), this pattern is correct. Otherwise, remove this check since the dimension is already set:\n\n```diff\n protected override void AddCore(VectorDocument<T> vectorDocument)\n {\n-    if (_vectorDimension == 0)\n-        _vectorDimension = vectorDocument.Embedding.Length;\n-\n     _store[vectorDocument.Document.Id] = vectorDocument;\n }\n```\n\n---\n\n`81-84`: **Consider resetting vector dimension when store becomes empty.**\n\nUnlike `WeaviateDocumentStore.cs` (lines 79-82), this implementation doesn't reset `_vectorDimension` to 0 when the last document is removed. While not strictly required, resetting provides consistency with `Clear()` and allows the store to adapt to new dimensions after being emptied.\n\n\n\n```diff\n protected override bool RemoveCore(string documentId)\n {\n-    return _store.Remove(documentId);\n+    var removed = _store.Remove(documentId);\n+    if (removed && _store.Count == 0)\n+    {\n+        _vectorDimension = 0;\n+    }\n+    return removed;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary><blockquote>\n\n`167-167`: **Consider making the oversampling factor configurable.**\n\nThe hardcoded `topK * 2` oversampling factor (line 167) may not be optimal for all use cases. For queries with many entities or sparse document stores, more oversampling might be needed.\n\n\nAdd a constructor parameter:\n\n```diff\n+    private readonly int _oversamplingFactor;\n+    \n     public GraphRetriever(\n         IDocumentStore<T> documentStore,\n-        string graphEndpoint,\n-        string graphQueryLanguage,\n-        int maxHops)\n+        int oversamplingFactor = 2)\n     {\n         _documentStore = documentStore ?? throw new ArgumentNullException(nameof(documentStore));\n-        ...\n+        _oversamplingFactor = oversamplingFactor > 0 \n+            ? oversamplingFactor \n+            : throw new ArgumentOutOfRangeException(nameof(oversamplingFactor));\n     }\n```\n\nThen use:\n```diff\n-    topK * 2, // Oversample for filtering\n+    topK * _oversamplingFactor, // Oversample for filtering\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (3)</summary><blockquote>\n\n`73-85`: **Consider validating `minTermWeight` range.**\n\nThe constructor validates `modelPath` and `maxExpansionTerms` but doesn't validate `minTermWeight`. Since this is used as a threshold for term weights (which are clamped to [0, 1] on line 163), consider validating that `minTermWeight` is in a reasonable range.\n\n\n\nApply this diff if validation is desired:\n\n```diff\n         _maxExpansionTerms = maxExpansionTerms;\n+\n+        if (minTermWeight < 0 || minTermWeight > 1.0)\n+            throw new ArgumentOutOfRangeException(nameof(minTermWeight), \"Min term weight must be between 0 and 1\");\n+\n         _minTermWeight = minTermWeight;\n```\n\n---\n\n`157-158`: **Optimize: redundant query processing.**\n\nLine 157 re-splits and lowercases the query to count occurrences, but the query was already split into terms on line 109. Consider passing the occurrence count or the original terms array to avoid redundant processing.\n\n\n\nRefactor option 1 - Pass occurrence count from caller:\n\nIn `GenerateExpansionTerms`, compute occurrences once:\n```csharp\nvar termCounts = terms.GroupBy(t => t).ToDictionary(g => g.Key, g => g.Count());\n```\n\nThen pass to `CalculateTermWeight`:\n```diff\n-    private double CalculateTermWeight(string term, string query)\n+    private double CalculateTermWeight(string term, int occurrences)\n     {\n         double weight = 0.5;\n         if (term.Length > 6) weight += 0.2;\n         if (term.Length > 10) weight += 0.2;\n-        var occurrences = query.ToLower().Split(' ').Count(t => t == term);\n         if (occurrences == 1) weight += 0.3;\n```\n\n---\n\n`63-63`: **Consider adding placeholder for future model loading.**\n\nThe `_modelPath` field is stored but never used. While the documentation acknowledges this is a heuristic fallback, consider adding a comment or TODO to mark where actual model loading should be implemented in production.\n\n\n\n```diff\n     private readonly string _modelPath;\n+    // TODO: Load and use actual SPLADE/learned sparse model from _modelPath in production\n     private readonly int _maxExpansionTerms;\n     private readonly double _minTermWeight;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (1)</summary><blockquote>\n\n`18-18`: **Remove unused `_collectionName` field.**\n\nThe `_collectionName` field is set in the constructor but never referenced elsewhere in the class. Only the `CollectionName` property is used. This is redundant storage that adds no value.\n\n\n\nApply this diff to remove the unused field:\n\n```diff\n private readonly Dictionary<string, VectorDocument<T>> _documents;\n-private readonly string _collectionName;\n private int _vectorDimension;\n```\n\n```diff\n-        _collectionName = collectionName;\n         CollectionName = collectionName;\n```\n\n\nAlso applies to: 34-35\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 21d8da8115e66a3f5de77dd822141f95e95cb167 and 17e2d69e963ef1312b2871957655d96a4a245236.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (52)</summary>\n\n* `.github/AI_PROJECT_RULES.md` (1 hunks)\n* `FINAL_PR_SUMMARY.md` (1 hunks)\n* `MERGE_CHECKLIST.md` (1 hunks)\n* `PR_303_PRODUCTION_READY_SUMMARY.md` (1 hunks)\n* `PR_304_FINAL_RESOLUTION.md` (1 hunks)\n* `PR_304_FIXES_SUMMARY.md` (1 hunks)\n* `PR_VERIFICATION_ISSUE_303.md` (1 hunks)\n* `RAG-IMPLEMENTATION-STATUS.md` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/CohereEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/GooglePalmEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/HuggingFaceEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/LocalTransformerEmbedding.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/MultiModalEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/ONNXSentenceTransformer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/OpenAIEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/SentenceTransformersFineTuner.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/VoyageAIEmbeddingModel.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Graph/GraphEdge.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Graph/GraphNode.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Graph/KnowledgeGraph.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/NER/BiLSTMCRF_NER.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/CohereReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/LLMBasedReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/LostInTheMiddleReranker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/ReciprocalRankFusion.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/RerankingStrategyBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs` (1 hunks)\n* `temp_reviews.txt` (1 hunks)\n\n</details>\n\n<details>\n<summary>Γ£à Files skipped from review due to trivial changes (3)</summary>\n\n* RAG-IMPLEMENTATION-STATUS.md\n* MERGE_CHECKLIST.md\n* PR_VERIFICATION_ISSUE_303.md\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (3)</summary>\n\n* src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs\n* src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs\n* src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (40)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankingStrategyBase.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/LLMBasedReranker.cs (1)</summary>\n\n* `T` (68-81)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (2)</summary>\n\n* `IEnumerable` (30-59)\n* `List` (61-85)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (35-46)\n* `List` (48-103)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (27-39)\n* `List` (41-89)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (3)</summary>\n\n* `List` (88-105)\n* `List` (107-146)\n* `List` (166-196)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (4)</summary>\n\n* `List` (88-103)\n* `List` (119-151)\n* `List` (153-167)\n* `List` (169-202)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/HyDEQueryExpansion.cs (1)</summary>\n\n* `List` (25-40)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/LocalTransformerEmbedding.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/CohereEmbeddingModel.cs (2)</summary>\n\n* `Vector` (44-56)\n* `GetDeterministicHash` (58-72)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `GetDeterministicHash` (51-65)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/NER/BiLSTMCRF_NER.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (1)</summary>\n\n* `List` (251-280)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (2)</summary>\n\n* `List` (196-211)\n* `List` (220-239)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (2)</summary>\n\n* `List` (196-213)\n* `IEnumerable` (140-194)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/ONNXSentenceTransformer.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/MultiModalEmbeddingModel.cs (2)</summary>\n\n* `Vector` (134-141)\n* `Vector` (148-169)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/VoyageAIEmbeddingModel.cs (1)</summary>\n\n* `Vector` (123-134)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (5)</summary>\n\n* `AddCore` (30-38)\n* `Document` (67-70)\n* `IEnumerable` (40-65)\n* `RemoveCore` (72-80)\n* `Clear` (82-86)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Graph/GraphNode.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Graph/KnowledgeGraph.cs (1)</summary>\n\n* `GraphNode` (110-113)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Graph/GraphEdge.cs (5)</summary>\n\n* `SetProperty` (106-109)\n* `TValue` (117-122)\n* `ToString` (124-127)\n* `Equals` (129-132)\n* `GetHashCode` (134-137)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/LearnedSparseEncoderExpansion.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (2)</summary>\n\n* `IEnumerable` (171-249)\n* `List` (251-280)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (69-108)\n* `Document` (110-113)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (70-108)\n* `Document` (110-113)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (6)</summary>\n\n* `AddCore` (63-88)\n* `Document` (168-174)\n* `AddBatchCore` (90-115)\n* `IEnumerable` (117-166)\n* `RemoveCore` (176-193)\n* `Clear` (195-202)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (7)</summary>\n\n* `HashSet` (184-221)\n* `AddCore` (42-51)\n* `Document` (110-113)\n* `AddBatchCore` (53-68)\n* `IEnumerable` (70-108)\n* `RemoveCore` (115-129)\n* `Clear` (131-136)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (3)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n* `RAGMetricBase` (28-103)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (1)</summary>\n\n* `GroundedAnswer` (133-194)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (2)</summary>\n\n* `Document` (67-70)\n* `IEnumerable` (40-65)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/HuggingFaceEmbeddingModel.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/CohereEmbeddingModel.cs (2)</summary>\n\n* `Vector` (44-56)\n* `GetDeterministicHash` (58-72)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/LocalTransformerEmbedding.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/OpenAIEmbeddingModel.cs (2)</summary>\n\n* `Vector` (39-51)\n* `GetDeterministicHash` (53-67)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/VoyageAIEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/ONNXSentenceTransformer.cs (4)</summary>\n\n* `Vector` (36-66)\n* `Vector` (84-92)\n* `ONNXSentenceTransformer` (13-93)\n* `ONNXSentenceTransformer` (22-34)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/LostInTheMiddleReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/LLMBasedReranker.cs (2)</summary>\n\n* `T` (68-81)\n* `IEnumerable` (39-66)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (27-203)\n* `IList` (154-202)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/GooglePalmEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `MathHelper` (16-987)\n* `INumericOperations` (33-61)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (1)</summary>\n\n* `Generate` (109-125)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary>\n\n* `ExtractMissingInformation` (262-288)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Graph/KnowledgeGraph.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Graph/GraphNode.cs (2)</summary>\n\n* `GraphNode` (35-125)\n* `GraphNode` (72-84)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Graph/GraphEdge.cs (2)</summary>\n\n* `GraphEdge` (37-138)\n* `GraphEdge` (81-99)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (1)</summary>\n\n* `Generate` (109-125)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/LLMBasedReranker.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (27-203)\n* `IList` (154-202)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/CohereReranker.cs (1)</summary>\n\n* `IEnumerable` (162-201)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (5)</summary>\n\n* `T` (86-102)\n* `T` (104-118)\n* `IEnumerable` (41-84)\n* `MatchesFilters` (179-194)\n* `List` (169-177)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (40-65)\n* `Document` (67-70)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (67-92)\n* `Document` (94-97)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Graph/GraphEdge.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Graph/GraphNode.cs (5)</summary>\n\n* `SetProperty` (91-95)\n* `TValue` (103-108)\n* `ToString` (110-114)\n* `Equals` (116-119)\n* `GetHashCode` (121-124)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/SentenceTransformersFineTuner.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/ONNXSentenceTransformer.cs (4)</summary>\n\n* `ONNXSentenceTransformer` (13-93)\n* `ONNXSentenceTransformer` (22-34)\n* `Vector` (36-66)\n* `Vector` (84-92)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/OpenAIEmbeddingModel.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/CohereEmbeddingModel.cs (2)</summary>\n\n* `Vector` (44-56)\n* `GetDeterministicHash` (58-72)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `GetDeterministicHash` (51-65)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (1)</summary>\n\n* `Generate` (109-125)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PineconeDocumentStore.cs (5)</summary>\n\n* `AddCore` (35-43)\n* `Document` (72-75)\n* `IEnumerable` (45-70)\n* `RemoveCore` (77-85)\n* `Clear` (87-91)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/LLMBasedReranker.cs (2)</summary>\n\n* `T` (68-81)\n* `IEnumerable` (39-66)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (40-65)\n* `Document` (67-70)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (69-108)\n* `Document` (110-113)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (117-166)\n* `Document` (168-174)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (7)</summary>\n\n* `HashSet` (170-199)\n* `AddCore` (41-50)\n* `Document` (110-113)\n* `AddBatchCore` (52-67)\n* `IEnumerable` (69-108)\n* `RemoveCore` (115-129)\n* `Clear` (131-136)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/ReciprocalRankFusion.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (27-203)\n* `IList` (154-202)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (2)</summary>\n\n* `IEnumerable` (30-59)\n* `List` (61-85)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (41-118)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (41-96)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-349)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (6)</summary>\n\n* `AddCore` (101-126)\n* `Document` (218-224)\n* `AddBatchCore` (128-159)\n* `IEnumerable` (161-216)\n* `RemoveCore` (226-237)\n* `Clear` (239-246)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/MultiModalEmbeddingModel.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/ONNXSentenceTransformer.cs (4)</summary>\n\n* `Vector` (36-66)\n* `Vector` (84-92)\n* `ONNXSentenceTransformer` (13-93)\n* `ONNXSentenceTransformer` (22-34)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/CohereEmbeddingModel.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/GooglePalmEmbeddingModel.cs (3)</summary>\n\n* `T` (147-155)\n* `Vector` (54-62)\n* `Vector` (64-119)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary>\n\n* `EmbeddingModelBase` (25-175)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/HuggingFaceEmbeddingModel.cs (2)</summary>\n\n* `Vector` (37-49)\n* `GetDeterministicHash` (51-65)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/LocalTransformerEmbedding.cs (2)</summary>\n\n* `Vector` (35-47)\n* `GetDeterministicHash` (49-63)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/OpenAIEmbeddingModel.cs (2)</summary>\n\n* `Vector` (39-51)\n* `GetDeterministicHash` (53-67)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/CohereReranker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (1)</summary>\n\n* `T` (114-149)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/LLMBasedReranker.cs (2)</summary>\n\n* `T` (68-81)\n* `IEnumerable` (39-66)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary>\n\n* `RerankerBase` (27-203)\n* `IList` (154-202)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/SubQueryExpansion.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/QueryExpansionBase.cs (1)</summary>\n\n* `QueryExpansionBase` (8-16)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (1)</summary>\n\n* `List` (186-220)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryExpansion/MultiQueryExpansion.cs (2)</summary>\n\n* `List` (84-97)\n* `List` (99-111)\n\n</details>\n\n</blockquote></details>\n\n</details><details>\n<summary>≡ƒ¬¢ LanguageTool</summary>\n\n<details>\n<summary>temp_reviews.txt</summary>\n\n[uncategorized] ~43-~43: The official name of this software platform is spelled with a capital ΓÇ£HΓÇ¥.\nContext: ...mentations | </details>       ---  Γëí╞Æ├å├¡ <a href=\"/ooples/AiDotNet/new/master/.github/instructions?filename=*.instructions.md...\n\n(GITHUB)\n\n---\n\n[style] ~485-~485: Consider using a synonym to be more concise.\nContext: ... and `ComputeProximityScore`. That adds a lot of allocations and O(nΓö¼Γûô) lookups under lo...\n\n(A_LOT_OF)\n\n---\n\n[style] ~814-~814: Consider using a different verb for a more formal wording.\nContext: ...ated as unscored.    Apply this diff to fix the issue:  ```diff          foreach (v...\n\n(FIX_RESOLVE)\n\n</details>\n<details>\n<summary>.github/AI_PROJECT_RULES.md</summary>\n\n[grammar] ~8-~8: Use a hyphen to join words.\nContext: ...Ops.Zero for zero values    - NumOps.One for one values    - NumOps.FromDouble(va...\n\n(QB_NEW_EN_HYPHEN)\n\n---\n\n[grammar] ~8-~8: Use a hyphen to join words.\nContext: ...Zero for zero values    - NumOps.One for one values    - NumOps.FromDouble(value)...\n\n(QB_NEW_EN_HYPHEN)\n\n</details>\n\n</details>\n\n</details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-05T02:49:57Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "17e2d69e963ef1312b2871957655d96a4a245236"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87L0NSE",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Review continued from previous batch...**",
      "submittedAt": "2025-11-05T02:51:08Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "17e2d69e963ef1312b2871957655d96a4a245236"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87L0cnI",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "",
      "submittedAt": "2025-11-05T03:12:15Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "APPROVED",
      "commit": {
        "oid": "17e2d69e963ef1312b2871957655d96a4a245236"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87L-Grd",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 9**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (9)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (3)</summary><blockquote>\n\n`26-40`: **Unused constructor parameter suggests incomplete implementation.**\n\nThe `numericOperations` parameter is validated but never stored or used. This issue was previously flagged and remains unresolved.\n\n---\n\n`16-17`: **LLM endpoint and API key are stored but never used.**\n\nThe `_llmEndpoint` and `_apiKey` fields are initialized but not referenced anywhere. This critical issue was previously flagged and remains unresolved.\n\n---\n\n`45-91`: **Eliminate duplicate compression logic.**\n\nThe `CompressCore` and `Summarize` methods contain identical logic, violating DRY principles. This issue was previously flagged and remains unresolved.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (2)</summary><blockquote>\n\n`85-99`: **Document the sequential position tracking behavior.**\n\nThe current position tracking assigns sequential output positions (`position = endPos`), which means overlapping content appears at different positions in different chunks. For example, if chunk 1 is \"ABC\" (0-3) and chunk 2 is \"CDEF\" with overlap \"C\", chunk 2 gets positions 3-7, but \"C\" (originally at position 2-3 in chunk 1) now appears at position 3 in chunk 2.\n\nThis makes positions represent sequential locations in the chunked output rather than positions in the original text, which may confuse users expecting to map chunks back to the source document.\n\n\n\nAdd XML remarks documenting this behavior:\n\n```diff\n     /// <summary>\n     /// Recursively splits text using the separator hierarchy.\n     /// </summary>\n     /// <param name=\"text\">The validated text to split.</param>\n     /// <returns>Chunks with position information.</returns>\n+    /// <remarks>\n+    /// Position tracking assigns sequential indices in the output. When chunks overlap,\n+    /// the same content appears at different positions in different chunks. Positions\n+    /// represent offsets in the concatenated output, not the original source text.\n+    /// </remarks>\n     protected override IEnumerable<(string Chunk, int StartPosition, int EndPosition)> ChunkCore(string text)\n```\n\n---\n\n`164-191`: **Critical: Separator incorrectly inserted between recursive subChunks.**\n\nLines 185-189 unconditionally append the current-level separator when joining subChunks returned from recursive splitting. This corrupts document structure when recursion reaches deeper levels.\n\n**Example scenario:**\n```\nText: \"VeryLongWordWithNoBreaks\" (exceeds ChunkSize)\nCurrent separator: \"\\n\\n\" (paragraph)\nΓåÆ No split occurs, triggers recursion (line 167)\nΓåÆ Eventually splits at character level\nΓåÆ subChunks: [\"VeryLong\", \"WordWith\", \"NoBreaks\"]\nΓåÆ Lines 185-189 join with \"\\n\\n\"\nΓåÆ Result: \"VeryLong\\n\\nWordWith\\n\\nNoBreaks\"\n```\n\nThis inserts paragraph breaks in the middle of a word, corrupting the text.\n\n\n\n**Note:** A previous review comment indicated this was addressed in commit 841164e, but the issue persists in the current code.\n\nApply this diff to remove separator insertion between recursive subChunks:\n\n```diff\n                     var subChunks = SplitTextRecursively(split, nextSeparators);\n                     foreach (var subChunk in subChunks)\n                     {\n                         if (currentChunk.Length + subChunk.Length > ChunkSize && currentChunk.Length > 0)\n                         {\n                             finalChunks.Add(currentChunk.ToString().Trim());\n                             currentChunk.Clear();\n\n                             // Add overlap\n                             if (finalChunks.Count > 0 && ChunkOverlap > 0)\n                             {\n                                 var lastChunk = finalChunks[finalChunks.Count - 1];\n                                 var overlapStart = Math.Max(0, lastChunk.Length - ChunkOverlap);\n                                 var overlap = lastChunk.Substring(overlapStart);\n                                 currentChunk.Append(overlap);\n                             }\n                         }\n\n-                        if (currentChunk.Length > 0)\n-                        {\n-                            currentChunk.Append(separator);\n-                        }\n                         currentChunk.Append(subChunk);\n                     }\n```\n\nThe subChunks from recursion are already complete segments that shouldn't be re-separated with the current level's delimiter.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (2)</summary><blockquote>\n\n`92-96`: **Inconsistent handling of small final chunks.**\n\nThe final chunk is always saved regardless of size, while chunks at header boundaries are conditionally saved based on `_minChunkSize` (line 63). This creates unpredictable behavior where a 50-character final chunk is kept but a 50-character chunk at a header boundary might be discarded.\n\n\n\nFor consistency, apply the same size logic to the final chunk:\n\n```diff\n         // Add remaining content\n         if (currentChunk.Count > 0)\n         {\n             var content = string.Join(Environment.NewLine, currentChunk);\n-            chunks.Add((content, chunkStart, position));\n+            if (content.Length >= _minChunkSize || !_combineSmallChunks)\n+            {\n+                chunks.Add((content, chunkStart, position));\n+            }\n         }\n```\n\nNote: If you fix the data loss issue in lines 60-68 by always saving chunks, this inconsistency will naturally resolve.\n\n---\n\n`44-99`: **Critical: `chunkOverlap` parameter is not implemented.**\n\nWhile the constructor accepts and passes `chunkOverlap` to the base class (line 29), the `ChunkCore` implementation never applies it. When chunks are created at header boundaries (line 67) or size thresholds (line 83), `currentChunk.Clear()` is called without preserving any overlap. This violates the parameter contract and means users cannot get overlapping chunks even when explicitly requested.\n\n\n\nApply this diff to implement overlap at size boundaries:\n\n```diff\n             // Split if chunk gets too large\n             var currentSize = string.Join(Environment.NewLine, currentChunk).Length;\n             if (currentSize >= ChunkSize)\n             {\n                 var content = string.Join(Environment.NewLine, currentChunk);\n                 chunks.Add((content, chunkStart, position + lineLength));\n-                currentChunk.Clear();\n-                chunkStart = position + lineLength;\n+                \n+                // Preserve overlap from end of current chunk\n+                if (ChunkOverlap > 0 && content.Length > ChunkOverlap)\n+                {\n+                    var overlapText = content.Substring(content.Length - ChunkOverlap);\n+                    var overlapLines = overlapText.Split(new[] { \"\\r\\n\", \"\\r\", \"\\n\" }, StringSplitOptions.None);\n+                    currentChunk = new List<string>(overlapLines);\n+                    chunkStart = position + lineLength - overlapText.Length;\n+                }\n+                else\n+                {\n+                    currentChunk.Clear();\n+                    chunkStart = position + lineLength;\n+                }\n             }\n```\n\nFor header boundaries, overlap is more complex since headers typically represent semantic breaks. Consider either:\n1. Documenting that overlap only applies to size-based splits, not header splits\n2. Implementing overlap at header boundaries by preserving trailing content from the previous section\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (2)</summary><blockquote>\n\n`62-73`: **Position tracking inconsistency and inefficient Contains check.**\n\nTwo issues with the context-before logic persist from past reviews:\n\n1. **Inefficient Contains check (line 68)**: `currentChunk.Contains(lines[j])` performs O(n) string comparisons and can yield false positives if identical line text appears multiple times. Use a `HashSet<int>` to track line indices already added to the chunk.\n\n2. **Position tracking inconsistency**: Lines from `contextStart` to `i-1` may have been processed in previous iterations and already accounted for in `position`. Adding them to `currentChunk` without adjusting `chunkStart` creates a mismatchΓÇöthe chunk contains lines whose positions fall outside the `[chunkStart, endPosition)` range reported at line 91.\n\n\n\n\nConsider using a `HashSet<int>` to track added line indices and either skip re-adding already-processed lines (index < original chunkStart) or adjust `chunkStart = Math.Min(chunkStart, contextStart)` and update position accounting accordingly.\n\n---\n\n`77-95`: **Position tracking broken when adding context after image.**\n\nWhen context lines are added after an image (lines 82-85) and the loop skips ahead (line 86), position tracking becomes incorrect:\n\n1. **Missing position updates for skipped lines**: Lines `i+1` through `contextEnd-1` are added to the chunk, but only line `i`'s length is added to `position` (line 111). The skipped lines' lengths are never accounted for.\n\n2. **Incorrect end position**: Line 91 calculates the chunk's end position as `position + lineLength`, which only accounts for line `i` (the image line), not the context lines added in lines 82-85.\n\n**Result**: All subsequent chunks will have incorrect `StartPosition` and `EndPosition` values, breaking position-sensitive downstream processing.\n\n\n\n\nTrack the cumulative length of context lines and include it in position calculations:\n\n```diff\n                 if (_preserveImageContext && _contextWindowSize > 0)\n                 {\n                     // Include context after image (minimum 1 line if context window is set)\n                     var linesToInclude = Math.Max(1, _contextWindowSize / 50);\n                     var contextEnd = Math.Min(lines.Length, i + linesToInclude);\n+                    var contextLength = 0;\n                     for (var j = i + 1; j < contextEnd; j++)\n                     {\n                         currentChunk.Add(lines[j]);\n+                        contextLength += lines[j].Length + Environment.NewLine.Length;\n                     }\n                     i = contextEnd - 1; // Skip ahead\n+                    lineLength += contextLength; // Include context lines in length\n                 }\n\n                 // Create chunk with image\n                 var content = string.Join(Environment.NewLine, currentChunk);\n                 chunks.Add((content, chunkStart, position + lineLength));\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/EmbeddingConfig.cs (1)</summary><blockquote>\n\n`30-33`: **Consider documenting the EmbeddingDimension default.**\n\nThe default value of 768 is appropriate for BERT-based models but varies by embedding model (e.g., OpenAI ada-002 uses 1536, some models use 384). Adding a remark to clarify that this value should match the specific embedding model being used would help prevent dimension mismatch errors.\n\n\n\nApply this diff to add clarifying documentation:\n\n```diff\n /// <summary>\n /// Gets or sets the embedding dimension.\n /// </summary>\n+/// <remarks>\n+/// Default is 768 (common for BERT-based models). Ensure this matches your embedding model's output dimension.\n+/// </remarks>\n public int EmbeddingDimension { get; set; } = 768;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (1)</summary><blockquote>\n\n`149-161`: **Consider enhancing the importance scoring algorithm.**\n\nThe current heuristic (unique token count + length + position bias) is functional but simplistic. For production use, consider incorporating:\n- Named entity recognition for proper nouns and key terms\n- TF-IDF scoring across the document collection\n- Query term overlap (if query-aware compression is added)\n- Domain-specific keywords or phrase patterns\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary><blockquote>\n\n`96-102`: **Consider a more concise dictionary increment pattern.**\n\nThe manual `TryGetValue` logic is correct but verbose. Modern C# allows a more idiomatic approach using dictionary indexing with defaults.\n\n\n\nApply this diff to simplify term counting:\n\n```diff\n foreach (var term in terms)\n {\n-    if (termCounts.TryGetValue(term, out var count))\n-        termCounts[term] = count + 1;\n-    else\n-        termCounts[term] = 1;\n+    termCounts[term] = termCounts.GetValueOrDefault(term, 0) + 1;\n }\n```\n\nAlso applies to lines 106-112 for `termDocFreq`.\n\n---\n\n`73-81`: **Duplicated tokenization logic.**\n\n`Tokenize` is identical to the implementation in `BM25Retriever.cs` (lines 168-176). Consider extracting this method to a shared helper class or to `RetrieverBase<T>` to follow DRY principles.\n\n---\n\n`148-163`: **Duplicated metadata filtering logic.**\n\n`MatchesFilters` is identical to the implementation in `BM25Retriever.cs` (lines 178-193). Extract this to `RetrieverBase<T>` or a shared utility class to eliminate duplication.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 17e2d69e963ef1312b2871957655d96a4a245236 and a5001e00cd349253e278d6648bd7b3b7518aeea9.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (17)</summary>\n\n* `.github/PROJECT_RULES.md` (1 hunks)\n* `src/Interfaces/IChunkingStrategy.cs` (1 hunks)\n* `src/Interfaces/IDocumentStore.cs` (4 hunks)\n* `src/Interfaces/IEmbeddingModel.cs` (1 hunks)\n* `src/Interfaces/IGenerator.cs` (3 hunks)\n* `src/Interfaces/IRAGMetric.cs` (3 hunks)\n* `src/Interfaces/IReranker.cs` (4 hunks)\n* `src/Interfaces/IRetriever.cs` (5 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/SlidingWindowChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Configuration/EmbeddingConfig.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (4)</summary>\n\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/SlidingWindowChunkingStrategy.cs\n* src/Interfaces/IReranker.cs\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs\n* src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (9)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (44-99)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/TableAwareTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (43-69)\n* `List` (93-154)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (5)</summary>\n\n* `T` (86-102)\n* `T` (104-118)\n* `IEnumerable` (41-84)\n* `MatchesFilters` (179-194)\n* `List` (169-177)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (40-65)\n* `Document` (67-70)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IGenerator.cs (6)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (1)</summary>\n\n* `T` (92-102)\n\n</details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (3)</summary>\n\n* `IEnumerable` (123-123)\n* `IEnumerable` (152-152)\n* `Document` (165-165)\n\n</details>\n<details>\n<summary>src/Interfaces/IReranker.cs (2)</summary>\n\n* `IEnumerable` (61-61)\n* `IEnumerable` (87-87)\n\n</details>\n<details>\n<summary>src/Interfaces/IRetriever.cs (3)</summary>\n\n* `IEnumerable` (61-61)\n* `IEnumerable` (85-85)\n* `IEnumerable` (110-110)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (1)</summary>\n\n* `IEnumerable` (26-71)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (1)</summary>\n\n* `T` (92-102)\n\n</details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (1)</summary>\n\n* `Document` (165-165)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (1)</summary>\n\n* `Dictionary` (83-146)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/DocumentSummarizer.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/ContextCompressorBase.cs (3)</summary>\n\n* `ContextCompressorBase` (25-105)\n* `List` (39-53)\n* `List` (73-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (1)</summary>\n\n* `List` (61-85)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/LLMContextCompressor.cs (3)</summary>\n\n* `List` (40-60)\n* `List` (102-126)\n* `List` (128-135)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (2)</summary>\n\n* `IEnumerable` (77-132)\n* `List` (139-185)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (1)</summary>\n\n* `List` (62-122)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (9)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ContextCompression/SelectiveContextCompressor.cs (1)</summary>\n\n* `T` (92-102)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/NoiseRobustnessMetric.cs (1)</summary>\n\n* `T` (114-149)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerCorrectnessMetric.cs (1)</summary>\n\n* `T` (34-49)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/AnswerSimilarityMetric.cs (1)</summary>\n\n* `T` (64-76)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (1)</summary>\n\n* `T` (59-74)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextRelevanceMetric.cs (1)</summary>\n\n* `T` (19-46)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (3)</summary>\n\n* `T` (75-86)\n* `T` (91-103)\n* `T` (108-146)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n\n</details>\n<details>\n<summary>src/Interfaces/IGenerator.cs (1)</summary>\n\n* `GroundedAnswer` (98-98)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IEmbeddingModel.cs (1)</summary>\n\n* `Vector` (70-70)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (1)</summary>\n\n* `Dictionary` (83-146)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (45-122)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (2)</summary>\n\n* `IEnumerable` (30-59)\n* `List` (61-85)\n\n</details>\n\n</blockquote></details>\n\n</details><details>\n<summary>≡ƒ¬¢ LanguageTool</summary>\n\n<details>\n<summary>.github/PROJECT_RULES.md</summary>\n\n[grammar] ~34-~34: Use a hyphen to join words.\nContext: ...features must work within existing model building process  ### 5. Code Quality - ...\n\n(QB_NEW_EN_HYPHEN)\n\n</details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (9)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Configuration/EmbeddingConfig.cs (2)</summary><blockquote>\n\n`20-28`: **Security documentation properly addresses previous review feedback.**\n\nThe security remarks added to the ApiKey property appropriately warn consumers about protecting sensitive credentials. The guidance to use secure configuration providers aligns with best practices.\n\n---\n\n`1-40`: **Clean configuration class structure.**\n\nThe overall design follows standard C# configuration POCO patterns with appropriate defaults, XML documentation, and extensibility through the Parameters dictionary. This integrates well with the broader RAG configuration system.\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary><blockquote>\n\n`3-3`: **Generic conversion verified; all breaking changes properly implemented.**\n\nAll references to the old namespace and non-generic interface have been successfully migrated:\n- No lingering `using AiDotNet.RetrievalAugmentedGeneration.Evaluation` imports\n- RAGMetricBase correctly implements `IRAGMetric<T>`\n- All six concrete metrics (NoiseRobustnessMetric, ContextRelevanceMetric, AnswerSimilarityMetric, FaithfulnessMetric, ContextCoverageMetric, AnswerCorrectnessMetric) properly use generic form\n- No non-generic instantiations found in code\n\nThe optional documentation enhancement remains valid but is not criticalΓÇöconsider clarifying that the 0-1 score range is now represented in type `T`.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (5)</summary><blockquote>\n\n`5-61`: **Excellent XML documentation.**\n\nThe comprehensive documentation with beginner-friendly examples clearly explains the hierarchical separator strategy and its benefits. This effectively addresses the previous documentation concern.\n\n---\n\n`65-78`: **LGTM!**\n\nThe constructor properly initializes the separator hierarchy with sensible defaults, including the empty string for character-level fallback.\n\n---\n\n`107-139`: **Character-level fallback correctly prevents infinite recursion.**\n\nThe logic at lines 131-134 properly handles the character-level splitting fallback when the separator is empty and no more separators remain. This prevents the infinite recursion issue that could occur with oversized unsplittable text.\n\n---\n\n`192-209`: **LGTM!**\n\nThe non-recursive splitting path correctly:\n- Accounts for separator length in size checks (line 146)\n- Adds separators only when appropriate (non-empty separator, non-empty current chunk)\n- Handles the standard case of joining splits from the current level\n\n---\n\n`211-218`: **LGTM!**\n\nThe final chunk handling correctly adds any remaining content after the main loop completes.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs (1)</summary><blockquote>\n\n`24-40`: **LGTM: Constructor validation addresses past concerns.**\n\nThe minimum context window enforcement (line 35-36) prevents the division issues that caused infinite loops in earlier versions, and `chunkOverlap` is now correctly passed to the base class.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-05T13:29:54Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "a5001e00cd349253e278d6648bd7b3b7518aeea9"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87L-6Hc",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 6**\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/LemmatizationQueryProcessor.cs (1)</summary><blockquote>\n\n`37-83`: **Consider more sophisticated lemmatization for production use.**\n\nThe basic rule-based lemmatization (dictionary + simple suffix rules for \"-ing\" and \"-s\") is a reasonable start but has limitations:\n\n- **Line 59-70**: The \"-ing\" removal doesn't handle doubled consonants (e.g., \"running\" ΓåÆ \"run\" requires the lemma map, but \"planning\" would become \"plann\").\n- **Line 71-74**: The simple \"-s\" removal doesn't distinguish between plurals and other \"-s\" endings (e.g., \"gas\" ΓåÆ \"ga\").\n- The approach won't handle irregular forms not in the dictionary (e.g., \"children\" is in the map, but \"oxen\" ΓåÆ \"ox\" would need an entry).\n\nFor production use, consider integrating a proper lemmatization library or NLP toolkit rather than maintaining extensive dictionary mappings.\n\n</blockquote></details>\n<details>\n<summary>src/PredictionModelBuilder.cs (2)</summary><blockquote>\n\n`432-482`: **Consider making the fallback message configurable.**\n\nLine 466 contains a hardcoded fallback message: `\"I couldn't find any relevant information to answer this question.\"` While this is a reasonable default, consider making it configurable for internationalization or customization needs.\n\nOtherwise, the implementation is solid with good error handling and clear logic flow.\n\n\n\n\nConsider adding an optional parameter or configuration:\n\n```csharp\npublic AiDotNet.RetrievalAugmentedGeneration.Models.GroundedAnswer<T> GenerateAnswer(\n    string query,\n    int? topK = null,\n    int? topKAfterRerank = null,\n    Dictionary<string, object>? metadataFilters = null,\n    string? noResultsMessage = null)\n{\n    // ...\n    if (retrievedList.Count == 0)\n    {\n        return new AiDotNet.RetrievalAugmentedGeneration.Models.GroundedAnswer<T>\n        {\n            Query = query,\n            Answer = noResultsMessage ?? \"I couldn't find any relevant information to answer this question.\",\n            // ...\n        };\n    }\n    // ...\n}\n```\n\n---\n\n`484-529`: **Consider extracting shared query processing logic.**\n\nLines 510-517 duplicate the query processing logic from `GenerateAnswer` (lines 446-453). While the duplication is minor, extracting this to a private helper method would improve maintainability.\n\n\n\n\nConsider extracting to a helper:\n\n```csharp\nprivate string ProcessQuery(string query)\n{\n    var processedQuery = query;\n    if (_queryProcessors != null)\n    {\n        foreach (var processor in _queryProcessors)\n        {\n            processedQuery = processor.ProcessQuery(processedQuery);\n        }\n    }\n    return processedQuery;\n}\n```\n\nThen use it in both methods:\n\n```csharp\nvar processedQuery = ProcessQuery(query);\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryExpansionProcessor.cs (1)</summary><blockquote>\n\n`69-84`: **Synonym quality and coverage suitable for demonstration.**\n\nThe default synonym dictionary provides basic expansion for common terms, but note:\n- Some mappings are quite broad (e.g., \"model\" ΓåÆ \"algorithm\", \"network\", \"architecture\")\n- Mixing synonyms with hypernyms/hyponyms (e.g., \"car\" ΓåÆ \"transportation\")\n\nFor production use, consider using a more comprehensive synonym resource or embedding-based semantic expansion instead of a static dictionary.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/StopWordRemovalQueryProcessor.cs (1)</summary><blockquote>\n\n`43-77`: **Potential logic issue with `isFirstContentWord` tracking.**\n\nThe `isFirstContentWord` flag logic has a subtle issue:\n\n**Lines 64-68**: If `preserveFirstWord` is true and it's the first content word, the word is added and the flag is set to `false`.\n\n**Lines 69-73**: If the word is not a stop word, it's added and the flag is also set to `false`.\n\n**Problem**: What if the first word IS a stop word but `preserveFirstWord` is `false`? The flag remains `true`, and the second word (if it's not a stop word) will not be treated as the first. This seems correct.\n\nHowever, the whitespace preservation logic (lines 48-50) is overly complex and ultimately ineffective since the final join (line 76) uses a single space delimiter anyway.\n\n\n\nSimplify the splitting and joining:\n\n```diff\n-        var words = Regex.Split(query, @\"(\\s+)\")\n-            .Where(w => !string.IsNullOrWhiteSpace(w) || w == \" \")\n-            .ToList();\n+        var words = query.Split(new[] { ' ', '\\t', '\\n', '\\r' }, \n+            StringSplitOptions.RemoveEmptyEntries);\n\n         var result = new List<string>();\n         var isFirstContentWord = true;\n\n         foreach (var word in words)\n         {\n-            if (word == \" \" || string.IsNullOrWhiteSpace(word))\n-            {\n-                continue;\n-            }\n-\n             var lowerWord = word.ToLowerInvariant();\n             \n             if (_preserveFirstWord && isFirstContentWord)\n             {\n                 result.Add(word);\n                 isFirstContentWord = false;\n             }\n             else if (!_stopWords.Contains(lowerWord))\n             {\n                 result.Add(word);\n                 isFirstContentWord = false;\n             }\n         }\n\n         return string.Join(\" \", result);\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between a5001e00cd349253e278d6648bd7b3b7518aeea9 and 26162d2c7dd726f3ceef084ba4e7de4f637c64e8.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (9)</summary>\n\n* `src/Interfaces/IPredictionModelBuilder.cs` (1 hunks)\n* `src/PredictionModelBuilder.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/KeywordExtractionQueryProcessor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/LemmatizationQueryProcessor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/QueryExpansionProcessor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/QueryRewritingProcessor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/SpellCheckQueryProcessor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/StopWordRemovalQueryProcessor.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/RagPipeline.cs` (0 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÆñ Files with no reviewable changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/RagPipeline.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (8)</summary>\n\n<details>\n<summary>src/Interfaces/IPredictionModelBuilder.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (2)</summary>\n\n* `IEnumerable` (496-529)\n* `AiDotNet` (432-482)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/StopWordRemovalQueryProcessor.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (1)</summary>\n\n* `AiDotNet` (432-482)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary>\n\n* `QueryProcessorBase` (26-56)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/KeywordExtractionQueryProcessor.cs (2)</summary>\n\n* `HashSet` (59-71)\n* `ProcessQueryCore` (45-57)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/LemmatizationQueryProcessor.cs (1)</summary>\n\n* `ProcessQueryCore` (37-83)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/SpellCheckQueryProcessor.cs (1)</summary>\n\n* `ProcessQueryCore` (42-71)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/SpellCheckQueryProcessor.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (1)</summary>\n\n* `AiDotNet` (432-482)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary>\n\n* `QueryProcessorBase` (26-56)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/LemmatizationQueryProcessor.cs (3)</summary>\n\n* `Dictionary` (98-137)\n* `ProcessQueryCore` (37-83)\n* `PreserveCase` (85-96)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryExpansionProcessor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (1)</summary>\n\n* `AiDotNet` (432-482)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary>\n\n* `QueryProcessorBase` (26-56)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/LemmatizationQueryProcessor.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (1)</summary>\n\n* `AiDotNet` (432-482)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary>\n\n* `QueryProcessorBase` (26-56)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/SpellCheckQueryProcessor.cs (3)</summary>\n\n* `Dictionary` (86-107)\n* `ProcessQueryCore` (42-71)\n* `PreserveCase` (73-84)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryRewritingProcessor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (1)</summary>\n\n* `AiDotNet` (432-482)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary>\n\n* `QueryProcessorBase` (26-56)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/KeywordExtractionQueryProcessor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary>\n\n* `QueryProcessorBase` (26-56)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/StopWordRemovalQueryProcessor.cs (2)</summary>\n\n* `HashSet` (79-91)\n* `ProcessQueryCore` (43-77)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/PredictionModelBuilder.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IPredictionModelBuilder.cs (16)</summary>\n\n* `IEnumerable` (416-420)\n* `AiDotNet` (396-400)\n* `IPredictionModelBuilder` (37-37)\n* `IPredictionModelBuilder` (53-53)\n* `IPredictionModelBuilder` (68-68)\n* `IPredictionModelBuilder` (83-83)\n* `IPredictionModelBuilder` (101-101)\n* `IPredictionModelBuilder` (135-135)\n* `IPredictionModelBuilder` (153-153)\n* `IPredictionModelBuilder` (172-172)\n* `IPredictionModelBuilder` (188-188)\n* `IPredictionModelBuilder` (307-307)\n* `IPredictionModelBuilder` (324-324)\n* `IPredictionModelBuilder` (353-353)\n* `IPredictionModelBuilder` (376-380)\n* `TOutput` (221-221)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (13)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IPredictionModelBuilder.cs (3)</summary><blockquote>\n\n`382-400`: **LGTM! Well-designed RAG answer generation API.**\n\nThe method signature is clean with appropriate optional parameters that enable flexible usage. The documentation clearly explains the workflow and purpose.\n\n---\n\n`402-420`: **LGTM! Clean separation between retrieval and generation.**\n\nThe interface design appropriately separates document retrieval from answer generation, enabling flexible usage patterns. The `applyReranking` parameter with a sensible default of `true` provides good control.\n\n---\n\n`376-380`: ****\n\nThe namespace usage is intentional and correct. `IRetriever<T>`, `IReranker<T>`, and `IGenerator<T>` are in the `AiDotNet.Interfaces` namespace (same as `IPredictionModelBuilder`), so they don't require prefixes. `IQueryProcessor` is in `AiDotNet.RetrievalAugmentedGeneration.Interfaces`ΓÇöa different namespaceΓÇöso the fully-qualified name is appropriate and serves to clarify it comes from a separate subsystem. No action required.\n\n> Likely an incorrect or invalid review comment.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/LemmatizationQueryProcessor.cs (2)</summary><blockquote>\n\n`32-35`: **LGTM! Clean constructor with sensible defaults.**\n\nThe constructor design allows customization while providing a reasonable default lemmatization dictionary.\n\n---\n\n`98-137`: **Good default lemma map for demonstration purposes.**\n\nThe default lemmatization dictionary covers common verb forms, irregular plurals, and domain-specific technical terms. This is appropriate for getting started, though production use would benefit from a more comprehensive approach (as noted in the earlier comment).\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/SpellCheckQueryProcessor.cs (1)</summary><blockquote>\n\n`42-71`: **LGTM! Clean dictionary-based spell correction logic.**\n\nThe core processing logic is straightforward and correct for exact dictionary-based spell correction. The pattern of splitting with capturing groups and joining with empty string properly preserves whitespace.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/KeywordExtractionQueryProcessor.cs (2)</summary><blockquote>\n\n`37-43`: **LGTM! Clean constructor with sensible defaults.**\n\nThe default minimum word length of 2 characters effectively filters single-letter words while keeping meaningful short words.\n\n---\n\n`45-57`: **LGTM! Clean LINQ-based keyword extraction.**\n\nThe implementation appropriately uses LINQ for clean filtering logic. Lowercasing all terms (line 50) without case preservation is correct for keyword extraction, as it normalizes for better matching.\n\n</blockquote></details>\n<details>\n<summary>src/PredictionModelBuilder.cs (2)</summary><blockquote>\n\n`42-45`: **LGTM! Clean field declarations for RAG pipeline components.**\n\nThe nullable fields appropriately indicate that RAG configuration is optional, consistent with other components in the builder class.\n\n---\n\n`390-417`: **LGTM! Solid ConfigureRag implementation with proper validation.**\n\nThe method correctly validates required parameters and provides a safe default for optional query processors (empty enumerable prevents null checks downstream). The builder pattern is properly maintained.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryExpansionProcessor.cs (2)</summary><blockquote>\n\n`31-37`: **LGTM! Flexible constructor with sensible defaults.**\n\nIncluding original terms by default (`includeOriginal = true`) is a good choice, as it ensures the query isn't degraded if synonyms aren't found.\n\n---\n\n`39-67`: **Note: Query term ordering is not preserved.**\n\nUsing a `HashSet<string>` (line 45) for deduplication means the original term ordering is lost. For most retrieval systems this is acceptable since they use bag-of-words models, but if term ordering or proximity matters for your retrieval algorithm, consider using a different approach.\n\nAdditionally, line 44's simple space-split (`Split(new[] { ' ' }, ...)`) won't handle tabs or multiple consecutive spaces well. Consider using a regex split like other processors if you need more robust whitespace handling.\n\n\n\nConsider whether term ordering matters for your retrieval strategy, and optionally update to preserve it if needed.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/StopWordRemovalQueryProcessor.cs (1)</summary><blockquote>\n\n`35-41`: **LGTM! Thoughtful constructor with preserveFirstWord option.**\n\nThe `preserveFirstWord` parameter is a nice touch that allows preserving question words like \"what\", \"how\", etc., which can be meaningful for query understanding even though they're typically stop words.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-05T14:03:52Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "26162d2c7dd726f3ceef084ba4e7de4f637c64e8"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87L_Syj",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 2**\n\n> [!CAUTION]\n> Some comments are outside the diff and canΓÇÖt be posted inline due to platform limitations.\n> \n> \n> \n> <details>\n> <summary>ΓÜá∩╕Å Outside diff range comments (1)</summary><blockquote>\n> \n> <details>\n> <summary>src/Models/Results/PredictionModelResult.cs (1)</summary><blockquote>\n> \n> `687-695`: **Restore RAG components during deserialization**\n> \n> `Serialize()` now emits the RAG properties, but `Deserialize()` never copies them back, so any saved model loses its retriever/reranker/generator/query processors and the next `GenerateAnswer(...)` fails with ΓÇ£RAG pipeline not configured.ΓÇ¥ ThatΓÇÖs a full breakage of persistence. Please assign the new members:\n> \n> ```diff\n>              if (deserializedObject != null)\n>              {\n>                  Model = deserializedObject.Model;\n>                  OptimizationResult = deserializedObject.OptimizationResult;\n>                  NormalizationInfo = deserializedObject.NormalizationInfo;\n>                  ModelMetaData = deserializedObject.ModelMetaData;\n>                  BiasDetector = deserializedObject.BiasDetector;\n>                  FairnessEvaluator = deserializedObject.FairnessEvaluator;\n> +                RagRetriever = deserializedObject.RagRetriever;\n> +                RagReranker = deserializedObject.RagReranker;\n> +                RagGenerator = deserializedObject.RagGenerator;\n> +                QueryProcessors = deserializedObject.QueryProcessors;\n>              }\n> ```\n> \n> Without this fix, every serialized/deserialized model permanently loses its RAG configuration.\n> \n> </blockquote></details>\n> \n> </blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 26162d2c7dd726f3ceef084ba4e7de4f637c64e8 and aabf17d25c83e742ce5af00518440c5da6742902.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (3)</summary>\n\n* `src/Interfaces/IPredictionModelBuilder.cs` (1 hunks)\n* `src/Models/Results/PredictionModelResult.cs` (5 hunks)\n* `src/PredictionModelBuilder.cs` (3 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (3)</summary>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (8)</summary>\n\n* `IEnumerable` (489-497)\n* `IEnumerable` (943-977)\n* `AiDotNet` (875-926)\n* `PredictionModelResult` (232-240)\n* `PredictionModelResult` (253-272)\n* `PredictionModelResult` (299-301)\n* `PredictionModelResult` (823-846)\n* `TOutput` (366-382)\n\n</details>\n<details>\n<summary>src/Interfaces/IPredictionModelBuilder.cs (17)</summary>\n\n* `PredictionModelResult` (205-205)\n* `PredictionModelResult` (249-249)\n* `PredictionModelResult` (291-291)\n* `TOutput` (221-221)\n* `IPredictionModelBuilder` (37-37)\n* `IPredictionModelBuilder` (53-53)\n* `IPredictionModelBuilder` (68-68)\n* `IPredictionModelBuilder` (83-83)\n* `IPredictionModelBuilder` (101-101)\n* `IPredictionModelBuilder` (135-135)\n* `IPredictionModelBuilder` (153-153)\n* `IPredictionModelBuilder` (172-172)\n* `IPredictionModelBuilder` (188-188)\n* `IPredictionModelBuilder` (307-307)\n* `IPredictionModelBuilder` (324-324)\n* `IPredictionModelBuilder` (353-353)\n* `IPredictionModelBuilder` (379-383)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IPredictionModelBuilder.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (3)</summary>\n\n* `IEnumerable` (489-497)\n* `IEnumerable` (943-977)\n* `AiDotNet` (875-926)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (4)</summary>\n\n* `PredictionModelResult` (213-253)\n* `PredictionModelResult` (304-308)\n* `PredictionModelResult` (339-345)\n* `TOutput` (269-272)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-05T14:21:16Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "aabf17d25c83e742ce5af00518440c5da6742902"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87L_dze",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 1**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (1)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IPredictionModelBuilder.cs (1)</summary><blockquote>\n\n`355-383`: **Documentation promises defaults that aren't actually provided.**\n\nThe XML documentation (lines 375-376) states that defaults will be provided for `reranker` and `generator` if `retriever` is set. However, as noted in the previous review, the implementation simply stores the null values, causing `InvalidOperationException` at runtime when calling `GenerateAnswer` or `RetrieveDocuments`.\n\nEither:\n1. Update the documentation to accurately reflect that all three components are required, OR\n2. Implement actual default instances when retriever is provided but reranker/generator are null\n\n\n\n\nBased on the previous review comment that identified this same issue.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary><blockquote>\n\n`33-46`: **Consider consolidating null and whitespace validation.**\n\nThe explicit null check (line 35) is redundant since `string.IsNullOrWhiteSpace` (line 40) already handles null strings. You can simplify the validation logic:\n\n\n\n```diff\n public string ProcessQuery(string query)\n {\n-    if (query == null)\n-    {\n-        throw new ArgumentNullException(nameof(query), \"Query cannot be null.\");\n-    }\n-\n     if (string.IsNullOrWhiteSpace(query))\n     {\n-        throw new ArgumentException(\"Query cannot be empty or whitespace.\", nameof(query));\n+        throw new ArgumentNullException(nameof(query), \"Query cannot be null, empty, or whitespace.\");\n     }\n\n     return ProcessQueryCore(query);\n }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between aabf17d25c83e742ce5af00518440c5da6742902 and e1a421dadc8f1b7ec0ea4d028e993e8d16d093e9.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (5)</summary>\n\n* `src/Interfaces/IPredictionModelBuilder.cs` (1 hunks)\n* `src/Interfaces/IQueryProcessor.cs` (1 hunks)\n* `src/Models/Results/PredictionModelResult.cs` (5 hunks)\n* `src/PredictionModelBuilder.cs` (3 hunks)\n* `src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (1)</summary>\n\n* src/PredictionModelBuilder.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (4)</summary>\n\n<details>\n<summary>src/Interfaces/IPredictionModelBuilder.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (2)</summary>\n\n* `IEnumerable` (488-496)\n* `IEnumerable` (942-976)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/Interfaces/IQueryProcessor.cs (1)</summary>\n\n* `ProcessQuery` (31-31)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/IdentityQueryProcessor.cs (1)</summary>\n\n* `ProcessQueryCore` (34-37)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IQueryProcessor.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary>\n\n* `ProcessQuery` (33-46)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/PredictionModelBuilder.cs (4)</summary>\n\n* `PredictionModelResult` (213-253)\n* `PredictionModelResult` (304-308)\n* `PredictionModelResult` (339-345)\n* `TOutput` (269-272)\n\n</details>\n<details>\n<summary>src/Interfaces/IQueryProcessor.cs (1)</summary>\n\n* `ProcessQuery` (31-31)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/QueryProcessors/QueryProcessorBase.cs (1)</summary>\n\n* `ProcessQuery` (33-46)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (6)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IQueryProcessor.cs (1)</summary><blockquote>\n\n`1-32`: **LGTM! Clean interface design.**\n\nThe interface provides a clear contract for query processing with excellent documentation including beginner-friendly examples. The single-method design follows the Interface Segregation Principle effectively.\n\n</blockquote></details>\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (5)</summary><blockquote>\n\n`177-199`: **LGTM! Well-structured RAG property declarations.**\n\nThe new properties for RAG components follow the established patterns in the class with appropriate nullability, private setters, and clear documentation.\n\n---\n\n`246-270`: **LGTM! Constructor properly integrates RAG components.**\n\nThe constructor correctly accepts and wires the RAG components while maintaining backward compatibility through optional parameters.\n\n---\n\n`456-481`: **LGTM! RAG components properly preserved in WithParameters.**\n\nThe method correctly maintains RAG component state when creating a new instance with updated parameters, ensuring consistency across the model lifecycle.\n\n---\n\n`942-976`: **LGTM! Retrieval logic is well-structured.**\n\nThe `RetrieveDocuments` method correctly:\n- Validates only the required RAG components (retriever and reranker, not generator)\n- Provides optional reranking via the `applyReranking` parameter\n- Handles query processing and metadata filtering appropriately\n\nNote: The query processing duplication flagged in the `GenerateAnswer` comment also applies here.\n\n---\n\n`550-576`: **RAG components are statelessΓÇöcode is correct as written.**\n\nAll RAG component interfaces (IRetriever, IReranker, IGenerator, IQueryProcessor) define purely functional contracts with read-only properties and no mutable state. Copying them by reference in DeepCopy is the correct approach since there is no internal state to replicate.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-05T14:28:06Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "e1a421dadc8f1b7ec0ea4d028e993e8d16d093e9"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87MAJHy",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 22**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (15)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (1)</summary><blockquote>\n\n`135-136`: **Use NumOps.ToDouble instead of Convert.ToDouble.**\n\n`Convert.ToDouble(d.RelevanceScore)` will throw for any numeric type that doesn't implement `IConvertible` (e.g., `Complex<T>`). You already cache `NumOps` at line 41ΓÇöroute the conversion through `INumericOperations<T>` to support all valid numeric types.\n\n\n\nApply this diff:\n\n```diff\n         var avgScore = contextList\n             .Where(d => d.HasRelevanceScore)\n-            .Select(d => Convert.ToDouble(d.RelevanceScore))\n+            .Select(d => NumOps.ToDouble(d.RelevanceScore))\n             .DefaultIfEmpty(0.5)\n             .Average();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (1)</summary><blockquote>\n\n`116-120`: **Token limits are not enforced when building prompts.**\n\nThe class defines `MaxContextTokens` (line 35) but never validates that the constructed prompt stays within this limit. When many or lengthy documents are provided, the resulting prompt could exceed the model's context window, causing runtime failures or unexpected truncation.\n\n\n\nConsider adding token counting and enforcement:\n\n```diff\n         // Build the prompt with context\n         var prompt = BuildPromptWithContext(query, contextList);\n+        \n+        // Validate prompt length doesn't exceed context window\n+        var estimatedTokens = EstimateTokenCount(prompt);\n+        if (estimatedTokens > MaxContextTokens)\n+        {\n+            throw new InvalidOperationException(\n+                $\"Constructed prompt ({estimatedTokens} tokens) exceeds maximum context tokens ({MaxContextTokens}). \" +\n+                \"Consider reducing the number of context documents or their length.\");\n+        }\n```\n\nYou'll need to add a token counting method (exact via tokenizer or approximation like word count ├ù 1.3):\n\n```csharp\nprotected virtual int EstimateTokenCount(string text)\n{\n    // Rough approximation: 1 token Γëê 0.75 words (English)\n    var wordCount = text.Split(new[] { ' ', '\\n', '\\r', '\\t' }, StringSplitOptions.RemoveEmptyEntries).Length;\n    return (int)Math.Ceiling(wordCount * 1.3);\n}\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (2)</summary><blockquote>\n\n`39-45`: **Position tracking is incorrect for overlapping chunks.**\n\nThe position calculation `position = endPos - ChunkOverlap` assumes chunks are contiguous segments in the original text. However, `SplitTextRecursive` creates artificial overlap by copying the tail of one chunk into the start of the next (lines 80-81). This means `StartPosition` and `EndPosition` do not accurately represent positions in the original input textΓÇöthey reflect positions in a conceptual sequence of overlapped chunks rather than byte offsets in the source.\n\n---\n\n`73-89`: **Oversized splits violate the ChunkSize constraint.**\n\nWhen a split segment exceeds `ChunkSize` and `currentChunk` is empty (or just cleared at line 81), the split is appended directly (line 88) and subsequently added to chunks (line 93) without subdivision. This violates the `ChunkSize` constraint. The empty-separator fallback (lines 60-68) has proper handling, but non-empty separators lack this safety net.\n\n\n\n\nApply this diff to handle oversized splits, following the pattern in `CodeAwareTextSplitter.cs`:\n\n```diff\n                 if (currentChunk.Length + split.Length + separator.Length > ChunkSize)\n                 {\n                     if (currentChunk.Length > 0)\n                     {\n                         chunks.Add(currentChunk.ToString());\n                         var overlap = Math.Min(ChunkOverlap, currentChunk.Length);\n                         currentChunk = new StringBuilder(currentChunk.ToString(currentChunk.Length - overlap, overlap));\n                     }\n                 }\n+                \n+                // Handle splits larger than ChunkSize by breaking them down\n+                if (currentChunk.Length == 0 && split.Length > ChunkSize)\n+                {\n+                    var step = Math.Max(ChunkSize - ChunkOverlap, 1);\n+                    for (int i = 0; i < split.Length; i += step)\n+                    {\n+                        var length = Math.Min(ChunkSize, split.Length - i);\n+                        chunks.Add(split.Substring(i, length));\n+                    }\n+                    currentChunk.Clear();\n+                    continue;\n+                }\n \n                 if (currentChunk.Length > 0)\n                     currentChunk.Append(separator);\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (1)</summary><blockquote>\n\n`14-14`: **Generic type parameter mismatch persists from previous review.**\n\nThe XML documentation on line 14 declares `<typeparam name=\"T\">`, but the class declaration on line 56 is not generic. This issue was flagged in a previous review but remains unresolved, and contradicts the PR objective to convert the RAG framework to generic types.\n\n\n\n\nApply this diff:\n\n```diff\n-public class AgenticChunker : ChunkingStrategyBase\n+public class AgenticChunker<T> : ChunkingStrategyBase<T>\n {\n```\n\n\nAlso applies to: 56-56\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (2)</summary><blockquote>\n\n`185-189`: **Critical: Separator incorrectly inserted between recursive subChunks.**\n\nWhen a split exceeds `ChunkSize` and is recursively split (line 167), the returned `subChunks` are already properly segmented by deeper separators. Lines 185-189 then insert the current-level separator before each subChunk, which corrupts document structure.\n\n**Example:** Text \"VeryLongWordThatExceedsChunkSize\" with separator `\"\\n\\n\"` would recursively split by characters, yielding subChunks like `[\"VeryLong\", \"WordThat\", \"Exceeds\"]`. The current code inserts `\"\\n\\n\"` between them, producing `\"VeryLong\\n\\nWordThat\\n\\nExceeds\"`, inserting paragraph breaks inside a word.\n\n\n\n\nRemove the separator insertion between recursive subChunks:\n\n```diff\n                    foreach (var subChunk in subChunks)\n                    {\n                        if (currentChunk.Length + subChunk.Length > ChunkSize && currentChunk.Length > 0)\n                        {\n                            finalChunks.Add(currentChunk.ToString().Trim());\n                            currentChunk.Clear();\n\n                            // Add overlap\n                            if (finalChunks.Count > 0 && ChunkOverlap > 0)\n                            {\n                                var lastChunk = finalChunks[finalChunks.Count - 1];\n                                var overlapStart = Math.Max(0, lastChunk.Length - ChunkOverlap);\n                                var overlap = lastChunk.Substring(overlapStart);\n                                currentChunk.Append(overlap);\n                            }\n                        }\n\n-                       if (currentChunk.Length > 0)\n-                       {\n-                           currentChunk.Append(separator);\n-                       }\n                        currentChunk.Append(subChunk);\n                    }\n```\n\nSubchunks from recursion are already complete segments and should not be re-separated with the parent-level delimiter.\n\n---\n\n`85-99`: **Position tracking assigns sequential output positions, not original text offsets.**\n\nThe current implementation accumulates chunk lengths sequentially (`position = endPos`), meaning overlapping content receives different positions in different chunks. For example, if chunk 1 is \"ABC\" (positions 0-3) and chunk 2 is \"CDEF\" with overlap \"C\", the code assigns chunk 2 positions 3-7, but \"C\" (originally at position 2-3) now appears at position 3 in the reported metadata.\n\nThis makes positions represent sequential locations in the chunked output rather than true offsets in the original source text, which may confuse consumers attempting to map chunks back to the source document.\n\n\n\n\nConsider one of these approaches:\n\n1. **Document the behavior**: Add XML remarks to `ChunkCore` explaining that positions are sequential output indices and overlapping content appears at multiple positions.\n\n2. **Track original positions**: Modify `SplitTextRecursively` to return position metadata alongside chunks, propagating original text offsets through the recursion. This is complex but provides accurate source mapping.\n\n3. **Use zero-based sequential indices**: If positions aren't meant to represent original text, use simple chunk indices (0, 1, 2ΓÇª) to avoid confusion.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (2)</summary><blockquote>\n\n`31-34`: **Replace zero-vector workaround with `GetAll()` method.**\n\nThe current code uses `GetSimilar()` with a zero-filled vector to retrieve all documents, which is semantically incorrect for TF-IDF (a keyword-based algorithm). The `IDocumentStore<T>` interface now provides a `GetAll()` method (line 209 in IDocumentStore.cs) specifically for this use case.\n\n\n\n\nApply this diff:\n\n```diff\n-            var candidates = _documentStore.GetSimilar(\n-                new AiDotNet.LinearAlgebra.Vector<T>(new T[_documentStore.VectorDimension]), \n-                _documentStore.DocumentCount\n-            );\n+            var candidates = _documentStore.GetAll();\n```\n\n---\n\n`54-68`: **Inefficient document lookup after scoring.**\n\nLine 59 performs a linear search through `candidates` for every result in the top K, creating O(topK ├ù N) overhead. Store the `Document<T>` reference alongside the score during the scoring phase to eliminate repeated lookups.\n\n\n\n\nApply this diff:\n\n```diff\n protected override IEnumerable<Document<T>> RetrieveCore(string query, int topK, Dictionary<string, object> metadataFilters)\n {\n     var queryTerms = Tokenize(query);\n-    var scores = new Dictionary<string, T>();\n+    var scoredDocs = new List<(Document<T> Doc, T Score)>();\n\n     var candidates = _documentStore.GetAll();\n     var candidatesList = candidates.ToList();\n     var tfidf = BuildTFIDFStatistics(candidatesList);\n\n     foreach (var doc in candidatesList.Where(d => MatchesFilters(d, metadataFilters)))\n     {\n         var score = NumOps.Zero;\n\n         if (tfidf.TryGetValue(doc.Id, out var docTfidf))\n         {\n             foreach (var term in queryTerms.Where(t => docTfidf.ContainsKey(t)))\n             {\n                 score = NumOps.Add(score, docTfidf[term]);\n             }\n         }\n\n-        scores[doc.Id] = score;\n+        scoredDocs.Add((doc, score));\n     }\n\n-    var results = scores\n-        .OrderByDescending(kv => kv.Value)\n+    var results = scoredDocs\n+        .OrderByDescending(sd => sd.Score)\n         .Take(topK)\n-        .Select(kv =>\n+        .Select(sd =>\n         {\n-            var doc = candidates.FirstOrDefault(d => d.Id == kv.Key);\n-            if (doc != null)\n-            {\n-                doc.RelevanceScore = kv.Value;\n-                doc.HasRelevanceScore = true;\n-            }\n-            return doc;\n-        })\n-        .Where(d => d != null)\n-        .Cast<Document<T>>();\n+            sd.Doc.RelevanceScore = sd.Score;\n+            sd.Doc.HasRelevanceScore = true;\n+            return sd.Doc;\n+        });\n\n     return results;\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (1)</summary><blockquote>\n\n`21-38`: **Validate weight parameters before conversion.**\n\nThe constructor accepts negative weights or a sum of zero without validation, which can produce inverted or all-zero relevance scores. Validate that both weights are non-negative and at least one is positive before converting to type `T`.\n\n\n\n\nApply this diff:\n\n```diff\n         _denseRetriever = denseRetriever;\n         _sparseRetriever = sparseRetriever;\n+\n+        if (denseWeight < 0)\n+            throw new ArgumentOutOfRangeException(nameof(denseWeight), \"denseWeight must be non-negative.\");\n+        if (sparseWeight < 0)\n+            throw new ArgumentOutOfRangeException(nameof(sparseWeight), \"sparseWeight must be non-negative.\");\n+        if (denseWeight + sparseWeight <= 0)\n+            throw new ArgumentException(\"At least one weight must be greater than zero.\");\n+\n         _denseWeight = NumOps.FromDouble(denseWeight);\n         _sparseWeight = NumOps.FromDouble(sparseWeight);\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs (1)</summary><blockquote>\n\n`67-77`: **Stub implementation defeats the purpose of multi-query retrieval.**\n\nThe current implementation appends \"variation {i}\" to the original query, producing meaningless query variations that will likely return nearly identical results. Consider injecting an `IQueryExpansion` strategy (e.g., `LLMQueryExpansion` or `HyDEQueryExpansion` mentioned in the PR objectives) to generate semantically diverse query variations.\n\n\n\n\n\nDo you want me to generate an implementation that accepts an `IQueryExpansion` dependency for proper query expansion?\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (1)</summary><blockquote>\n\n`174-181`: **Use `INumericOperations<T>` instead of `Convert.ToDouble`**\n\n`Convert.ToDouble` only works for IConvertible types and will throw for the numeric types you just enabled (e.g., `Complex<T>`). Compute the boost purely via `NumOps`, e.g.:\n\n```diff\n-            var baseScore = Convert.ToDouble(doc.RelevanceScore);\n-            var enhancedScore = baseScore * (1.0 + entityScore * 0.3 + relationshipScore * 0.2);\n-\n-            return (doc, NumOps.FromDouble(enhancedScore));\n+            var boost = NumOps.FromDouble(1.0 + entityScore * 0.3 + relationshipScore * 0.2);\n+            var enhancedScore = NumOps.Multiply(doc.RelevanceScore, boost);\n+\n+            return (doc, enhancedScore);\n```\nThis keeps the implementation valid for every supported numeric type.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (1)</summary><blockquote>\n\n`160-165`: **Stop querying with zero-length vectors**\n\nPassing `new Vector<T>(new T[0])` into `GetSimilarWithFilters` means we never supply a real embedding. Most stores will either return arbitrary rows or throw because the vector dimensionality is zero, so this retriever cannot return relevant documents. Inject an `IEmbeddingModel<T>` (or equivalent) into the constructor, embed the query here, validate the vector length, and pass that real embedding to the document store.\n\n```diff\n-        var documents = _documentStore.GetSimilarWithFilters(\n-            new Vector<T>(new T[0]), // Placeholder for query embedding\n+        var queryVector = _embeddingModel.Embed(query);\n+        if (queryVector == null || queryVector.Length == 0)\n+            throw new InvalidOperationException(\"Query embedding cannot be empty for ColBERT retrieval.\");\n+\n+        var documents = _documentStore.GetSimilarWithFilters(\n+            queryVector,\n             topK * 2,\n             metadataFilters ?? new Dictionary<string, object>()\n         ).ToList();\n```\nMake sure to add the `_embeddingModel` field and null-check the new constructor parameter.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (2)</summary><blockquote>\n\n`221-223`: **Use NumOps.ToDouble instead of Convert.ToDouble.**\n\nDirect `Convert.ToDouble` calls will fail at runtime for non-`IConvertible` types like `Complex<T>`. Use the numeric operations facade.\n\n\n\nApply this diff:\n\n```diff\n             var boostFactor = 1.0 + (mentionedEntities.Count * 0.1);\n             var originalScore = doc.HasRelevanceScore \n-                ? Convert.ToDouble(doc.RelevanceScore) \n+                ? NumOps.ToDouble(doc.RelevanceScore) \n                 : 0.5;\n```\n\n---\n\n`246-248`: **Use NumOps.ToDouble for ordering generic scores.**\n\nThe default comparer for generic type `T` doesn't work reliably. Use `NumOps.ToDouble()` to convert scores to a sortable value.\n\n\n\nApply this diff:\n\n```diff\n         return enrichedResults\n-            .OrderByDescending(d => d.HasRelevanceScore ? d.RelevanceScore : default(T))\n+            .OrderByDescending(d => NumOps.ToDouble(d.HasRelevanceScore ? d.RelevanceScore : NumOps.Zero))\n             .Take(topK);\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (11)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (1)</summary><blockquote>\n\n`3-4`: **Remove duplicate using statement.**\n\nThe `using AiDotNet.Interfaces;` directive appears on both line 3 and line 4.\n\n\nApply this diff to remove the duplicate:\n\n```diff\n using AiDotNet.Helpers;\n using AiDotNet.Interfaces;\n-using AiDotNet.Interfaces;\n using AiDotNet.RetrievalAugmentedGeneration.Models;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (1)</summary><blockquote>\n\n`80-81`: **Consider optimizing StringBuilder overlap handling.**\n\nThe current approach converts `StringBuilder` to string, extracts a substring, then creates a new `StringBuilder`. While correct, this involves multiple allocations.\n\n\n\nFor better performance, consider removing characters from the beginning instead:\n\n```diff\n                         chunks.Add(currentChunk.ToString());\n                         var overlap = Math.Min(ChunkOverlap, currentChunk.Length);\n-                        currentChunk = new StringBuilder(currentChunk.ToString(currentChunk.Length - overlap, overlap));\n+                        currentChunk.Remove(0, currentChunk.Length - overlap);\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (2)</summary><blockquote>\n\n`5-6`: **Remove duplicate using statement.**\n\nThe `using AiDotNet.Interfaces;` directive appears twice.\n\n\n\nApply this diff:\n\n```diff\n using System.Text.RegularExpressions;\n using AiDotNet.Interfaces;\n-using AiDotNet.Interfaces;\n using AiDotNet.RetrievalAugmentedGeneration.Models;\n```\n\n---\n\n`73-80`: **Simplify by removing redundant validation.**\n\nLines 73-78 duplicate validation already performed by the base class constructor. According to the ChunkingStrategyBase code, the base constructor validates `chunkSize > 0`, `chunkOverlap >= 0`, and `chunkOverlap < chunkSize`. Only the `coherenceThreshold` validation is unique to this class.\n\n\n\nApply this diff:\n\n```diff\n-        if (maxChunkSize <= 0)\n-            throw new ArgumentOutOfRangeException(nameof(maxChunkSize), \"Max chunk size must be positive\");\n-        if (overlap < 0)\n-            throw new ArgumentOutOfRangeException(nameof(overlap), \"Overlap cannot be negative\");\n-        if (overlap >= maxChunkSize)\n-            throw new ArgumentOutOfRangeException(nameof(overlap), \"Overlap must be less than max chunk size\");\n         if (coherenceThreshold < 0 || coherenceThreshold > 1)\n             throw new ArgumentOutOfRangeException(nameof(coherenceThreshold), \"Coherence threshold must be between 0 and 1\");\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (1)</summary><blockquote>\n\n`170-170`: **Separator length not included in size check for recursive subChunks.**\n\nLine 170 checks `currentChunk.Length + subChunk.Length > ChunkSize` but doesn't account for `separator.Length`, which will be added on line 187 when `currentChunk.Length > 0`. This can cause chunks to exceed `ChunkSize` by the separator's length.\n\n**Example:** With `currentChunk = \"ABC\"` (3 chars), `ChunkSize = 10`, `separator = \"\\n\\n\"` (2 chars), and `subChunk = \"DEFGHI\"` (6 chars), the check evaluates `3 + 6 = 9 <= 10` (no flush), but after adding separator and subChunk, the result is `\"ABC\\n\\nDEFGHI\"` (11 chars), exceeding the limit.\n\nLine 146 correctly includes `separator.Length` for regular splits; this should be consistent.\n\n\n\nApply this diff to include separator length in the check:\n\n```diff\n-                       if (currentChunk.Length + subChunk.Length > ChunkSize && currentChunk.Length > 0)\n+                       if (currentChunk.Length + subChunk.Length + (currentChunk.Length > 0 ? separator.Length : 0) > ChunkSize && currentChunk.Length > 0)\n                        {\n                            finalChunks.Add(currentChunk.ToString().Trim());\n                            currentChunk.Clear();\n```\n\nOr simplify since `currentChunk.Length > 0` is already in the condition:\n\n```diff\n-                       if (currentChunk.Length + subChunk.Length > ChunkSize && currentChunk.Length > 0)\n+                       if (currentChunk.Length + subChunk.Length + separator.Length > ChunkSize && currentChunk.Length > 0)\n                        {\n                            finalChunks.Add(currentChunk.ToString().Trim());\n                            currentChunk.Clear();\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (2)</summary><blockquote>\n\n`54-70`: **Consider documenting the base class parameter mapping.**\n\nThe constructor passes `maxChunkSize` to the base class's `chunkSize` parameter and `0` for `chunkOverlap`. This means `ChunkSize` property (inherited from base) returns `maxChunkSize` rather than `targetChunkSize`, and `ChunkOverlap` returns `0` even though sentence-based overlap is configured via `overlapSentences`. While this design is reasonableΓÇösentence-level overlap differs semantically from character-level overlapΓÇöit may confuse users who inspect the inherited properties.\n\nConsider adding a remark to the class XML documentation explaining this mapping, or override the properties to return more intuitive values.\n\n---\n\n`139-185`: **Sentence splitting still has limitations with abbreviations and edge cases.**\n\nThe character-by-character approach (improved from the regex pattern mentioned in the previous review) requires whitespace after punctuation, but still incorrectly handles:\n- Common abbreviations: \"Dr.\", \"Mr.\", \"U.S.A.\", \"etc.\"\n- Quoted punctuation: 'He said \"Stop.\" Then left.'\n- Initials: \"J. K. Rowling\"\n\nAs recommended in the previous review, consider either:\n1. Using a proven NLP library for sentence boundary detection (e.g., C# ports of OpenNLP/SharpNLP, or packages like Catalyst.SentenceDetector) for production robustness\n2. At minimum, document these limitations prominently in the XML comments and add explicit handling for common abbreviations (maintain an abbreviation list and check context)\n\nFor a \"Chill\" review, option 2 (document + basic abbreviation handling) is acceptable if the limitations are known and acceptable for your use case.\n\n\n\nBased on learnings from the previous review.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (1)</summary><blockquote>\n\n`177-182`: **Consider consistent default confidence scoring.**\n\nThis implementation uses `DefaultIfEmpty(0.6)` while `StubGenerator` uses `DefaultIfEmpty(0.5)` (see src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs, line 145). Different default confidence values across generator implementations may confuse users.\n\n\nConsider standardizing to the same default (e.g., 0.5) across all generator implementations for consistency.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (1)</summary><blockquote>\n\n`73-81`: **Eliminate code duplication for `Tokenize` and `MatchesFilters`.**\n\nBoth `Tokenize` and `MatchesFilters` methods are duplicated across `TFIDFRetriever`, `BM25Retriever`, and similar retrievers. Consider extracting these to a shared base class or utility to reduce duplication and ensure consistency.\n\n\n\n\nAlso applies to: 148-163\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (1)</summary><blockquote>\n\n`167-192`: **Eliminate code duplication for `Tokenize` and `MatchesFilters`.**\n\nThese methods are identical to those in `TFIDFRetriever`. Extract them to a shared utility class or base class to reduce duplication and ensure consistency across retrievers.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (1)</summary><blockquote>\n\n`80-82`: **Consider using TryGetValue for consistency.**\n\nLine 81 uses `ContainsKey` followed by indexer access. For consistency with line 70 and to avoid a redundant dictionary lookup, consider using `TryGetValue`.\n\n\nApply this diff:\n\n```diff\n         var results = allDocuments\n-            .Where(doc => combinedScores.ContainsKey(doc.Id))\n+            .Where(doc => combinedScores.TryGetValue(doc.Id, out _))\n             .OrderByDescending(doc => combinedScores[doc.Id])\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between 3f01d96a3a3d3acc6002ef29bdfdec69bfddc09e and aaf7a4a8027b8bb88ec10c6b3b8f1d9ba7d9e40e.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (32)</summary>\n\n* `src/Interfaces/IDocumentStore.cs` (5 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/ChunkingStrategyBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs` (10 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs` (2 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs` (6 hunks)\n* `src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs` (4 hunks)\n* `src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs` (4 hunks)\n* `src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs` (7 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/DenseRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs` (7 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs` (3 hunks)\n\n</details>\n\n<details>\n<summary>Γ£à Files skipped from review due to trivial changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/ChunkingStrategyBase.cs\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (4)</summary>\n\n* src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/MultiModalTextSplitter.cs\n* src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs\n* src/RetrievalAugmentedGeneration/Retrievers/DenseRetriever.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (27)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (54-93)\n* `Document` (95-98)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/DenseRetriever.cs (1)</summary>\n\n* `IEnumerable` (32-36)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Interfaces/IRAGMetric.cs (1)</summary>\n\n* `T` (52-52)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (6)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (1)</summary>\n\n* `GroundedAnswer` (93-131)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (3)</summary>\n\n* `GroundedAnswer` (133-194)\n* `List` (196-211)\n* `List` (220-239)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterChunkingStrategy.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/ChunkingStrategyBase.cs (2)</summary>\n\n* `ChunkingStrategyBase` (22-258)\n* `ChunkingStrategyBase` (42-55)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (1)</summary>\n\n* `List` (62-122)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (2)</summary>\n\n* `Document` (109-113)\n* `Document` (219-219)\n\n</details>\n<details>\n<summary>src/Interfaces/IEmbeddingModel.cs (1)</summary>\n\n* `Vector` (70-70)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (1)</summary>\n\n* `Dictionary` (83-146)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/GraphRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (2)</summary>\n\n* `T` (216-256)\n* `IEnumerable` (149-207)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/ChunkingStrategyBase.cs (2)</summary>\n\n* `ChunkingStrategyBase` (22-258)\n* `ChunkingStrategyBase` (42-55)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/HeaderBasedTextSplitter.cs (1)</summary>\n\n* `IEnumerable` (44-99)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SemanticChunkingStrategy.cs (2)</summary>\n\n* `IEnumerable` (30-59)\n* `List` (61-85)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (4)</summary>\n\n* `T` (71-87)\n* `T` (89-103)\n* `IEnumerable` (31-69)\n* `MatchesFilters` (177-192)\n\n</details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (4)</summary>\n\n* `IEnumerable` (123-123)\n* `IEnumerable` (152-152)\n* `IEnumerable` (209-209)\n* `Document` (165-165)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (4)</summary>\n\n* `IEnumerable` (122-150)\n* `IEnumerable` (192-195)\n* `IEnumerable` (206-209)\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (117-166)\n* `Document` (168-174)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/RecursiveCharacterTextSplitter.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/ChunkingStrategyBase.cs (2)</summary>\n\n* `ChunkingStrategyBase` (22-258)\n* `ChunkingStrategyBase` (42-55)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/CodeAwareTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (31-43)\n* `List` (62-122)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/MarkdownTextSplitter.cs (2)</summary>\n\n* `IEnumerable` (27-39)\n* `List` (41-89)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (2)</summary>\n\n* `T` (51-60)\n* `T` (73-73)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/ContextCoverageMetric.cs (4)</summary>\n\n* `T` (75-86)\n* `T` (91-103)\n* `T` (108-146)\n* `ContextCoverageMetric` (47-147)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/FaithfulnessMetric.cs (2)</summary>\n\n* `T` (59-74)\n* `FaithfulnessMetric` (35-75)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/GroundedAnswer.cs (4)</summary>\n\n* `GroundedAnswer` (36-183)\n* `GroundedAnswer` (151-153)\n* `GroundedAnswer` (160-164)\n* `GroundedAnswer` (174-182)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (3)</summary>\n\n* `Document` (109-113)\n* `Document` (219-219)\n* `MatchesFilters` (350-380)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (117-166)\n* `Document` (168-174)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (4)</summary>\n\n* `IEnumerable` (123-123)\n* `IEnumerable` (152-152)\n* `IEnumerable` (209-209)\n* `Document` (165-165)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (8)</summary>\n\n* `IEnumerable` (83-86)\n* `IEnumerable` (95-102)\n* `IEnumerable` (135-138)\n* `IEnumerable` (207-207)\n* `IEnumerable` (254-254)\n* `Document` (109-113)\n* `Document` (219-219)\n* `MatchesFilters` (350-380)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (4)</summary>\n\n* `IEnumerable` (26-71)\n* `Dictionary` (83-146)\n* `MatchesFilters` (148-163)\n* `List` (73-81)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (9)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (3)</summary>\n\n* `T` (71-87)\n* `T` (89-103)\n* `IEnumerable` (31-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (1)</summary>\n\n* `T` (216-256)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (7)</summary>\n\n* `IEnumerable` (83-86)\n* `IEnumerable` (95-102)\n* `IEnumerable` (135-138)\n* `IEnumerable` (207-207)\n* `IEnumerable` (254-254)\n* `Document` (109-113)\n* `Document` (219-219)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (3)</summary>\n\n* `IEnumerable` (45-55)\n* `IEnumerable` (64-70)\n* `IEnumerable` (91-91)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (1)</summary>\n\n* `Dictionary` (83-146)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (9)</summary>\n\n* `DocumentStoreBase` (29-381)\n* `AddCore` (155-155)\n* `Add` (50-54)\n* `AddBatchCore` (176-182)\n* `AddBatch` (60-75)\n* `Document` (109-113)\n* `Document` (219-219)\n* `RemoveCore` (231-231)\n* `Remove` (120-124)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (1)</summary>\n\n* `IEnumerable` (40-79)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (5)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (1)</summary>\n\n* `Generate` (70-83)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (1)</summary>\n\n* `Generate` (77-83)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (4)</summary>\n\n* `Generate` (109-125)\n* `GroundedAnswer` (133-194)\n* `List` (196-211)\n* `List` (220-239)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (2)</summary>\n\n* `Generate` (77-83)\n* `GroundedAnswer` (91-151)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (2)</summary>\n\n* `Generate` (70-83)\n* `GroundedAnswer` (93-131)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (2)</summary>\n\n* `Generate` (77-83)\n* `GroundedAnswer` (91-151)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/ChainOfThoughtRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (1)</summary>\n\n* `Generate` (70-83)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (1)</summary>\n\n* `Generate` (77-83)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/SelfCorrectingRetriever.cs (6)</summary><blockquote>\n\n<details>\n<summary>src/Models/Results/PredictionModelResult.cs (1)</summary>\n\n* `AiDotNet` (874-925)\n\n</details>\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (1)</summary>\n\n* `Generate` (70-83)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (1)</summary>\n\n* `Generate` (77-83)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/FLARERetriever.cs (1)</summary>\n\n* `ExtractMissingInformation` (262-288)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/ParentDocumentRetriever.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/VectorRetriever.cs (1)</summary>\n\n* `IEnumerable` (62-69)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (69-108)\n* `Document` (110-113)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/AdvancedPatterns/GraphRAG.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary>\n\n* `RetrieverBase` (26-182)\n* `RetrieverBase` (44-50)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/StubGenerator.cs (1)</summary>\n\n* `Generate` (77-83)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/SentenceChunkingStrategy.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/ChunkingStrategyBase.cs (2)</summary>\n\n* `ChunkingStrategyBase` (22-258)\n* `ChunkingStrategyBase` (42-55)\n\n</details>\n\n</blockquote></details>\n\n</details><details>\n<summary>≡ƒ¬¢ GitHub Check: Build All Frameworks</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs</summary>\n\n[failure] 15-15: \n'HybridDocumentStore<T>' does not implement inherited abstract member 'DocumentStoreBase<T>.GetAllCore()'\n\n</details>\n\n</details>\n<details>\n<summary>≡ƒ¬¢ GitHub Check: Publish Size Analysis</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs</summary>\n\n[failure] 15-15: \n'HybridDocumentStore<T>' does not implement inherited abstract member 'DocumentStoreBase<T>.GetAllCore()'\n\n</details>\n\n</details>\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (26)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/GeneratorBase.cs (3)</summary><blockquote>\n\n`47-61`: **LGTM!**\n\nConstructor validation correctly ensures both token limits are positive.\n\n---\n\n`153-172`: **LGTM!**\n\nThe default prompt template is clear and well-structured, with numbered citations and explicit instructions for the model.\n\n---\n\n`186-205`: **LGTM!**\n\nCitation extraction correctly parses `[n]` markers, validates bounds, and maps to source documents. The `Cast<Match>()` call at line 192 is necessary for older .NET versions and does not require filtering.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/ChunkingStrategies/AgenticChunker.cs (2)</summary><blockquote>\n\n`89-104`: **LGTM: Clean separation of concerns.**\n\nThe method properly validates input, delegates to specialized methods for boundary detection and chunk creation, and yields results efficiently.\n\n---\n\n`157-217`: **LGTM: Chunk creation logic handles size constraints and overlap correctly.**\n\nThe method properly manages chunk boundaries, applies overlap between chunks, handles edge cases, and validates output. However, ensure the position calculation bug in `DetectBoundaries` is fixed so this method receives accurate boundary positions.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Generators/NeuralGenerator.cs (2)</summary><blockquote>\n\n`109-125`: **Method structure is sound.**\n\nThe validation, token limiting, and flow logic are appropriate. The usability issue stems from the detokenization (already flagged separately).\n\n---\n\n`133-194`: **Well-structured grounded generation logic.**\n\nThe method properly:\n- Validates inputs and handles empty context gracefully\n- Builds a clear prompt with numbered citations\n- Calculates confidence from retrieval scores\n- Returns a properly populated GroundedAnswer<T>\n\nThe implementation aligns well with the RAG pipeline integration shown in PredictionModelResult.cs.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Rerankers/RerankerBase.cs (4)</summary><blockquote>\n\n`27-32`: **LGTM! Clean generic conversion.**\n\nThe generic class declaration and static NumOps field initialization are implemented correctly. Each closed generic type (e.g., `RerankerBase<float>`, `RerankerBase<double>`) will have its own NumOps instance, which is the desired behavior.\n\n---\n\n`45-70`: **LGTM! Public API correctly updated for generics.**\n\nThe Rerank method signatures are properly updated to use `Document<T>`, and the implementation logic remains sound.\n\n---\n\n`91-134`: **LGTM! Core method and validations properly genericized.**\n\nThe abstract RerankCore method and validation helpers are correctly updated to work with `Document<T>`, with clear documentation for implementers.\n\n---\n\n`164-177`: <!-- [scratchpad_start]\n[task verify_complex_support_for_reranker_base]\nFound ComplexOperations implementation. Analyzing the verification results.\n\n[observations]\n- ComplexOperations<T> class exists (src/NumericOperations/ComplexOperations.cs line 33)\n- Implements INumericOperations<Complex<T>>\n- GreaterThan method: line 333 - compares by magnitude\n- LessThan method: line 358 - compares by magnitude\n- MathHelper.GetNumericOperations checks for Complex<T> at line 41-42\n- Comparison operations compare Complex<T> by magnitude (a.Magnitude vs b.Magnitude)\n\n[analysis]\n- CRITICAL FINDING: Complex<T> IS supported for comparison operations\n- Comparisons use magnitude (absolute value) for ordering\n- MathHelper will return ComplexOperations<T> for Complex<T> types\n- The original review comment claim \"comparison-based operations will still throw at runtime for Complex scores\" is INCORRECT\n- Complex numbers are compared by magnitude, which provides ordering\n- The concern about \"Complex<T> lacks ordering\" is resolved by the ComplexOperations implementation\n\n[semantic_consideration]\n- Semantically, relevance scores as complex numbers may not make practical sense\n- But that's a separate concern from runtime behavior\n- The code will NOT throw at runtime for Complex types\n- Magnitude-based comparison is a valid way to order complex numbers\n\n[conclusion]\n- The review comment's core assertion is factually wrong\n- Complex<T> support IS implemented\n- No runtime errors will occur for Complex<T> relevance scores\n- Tag should be \n\n[done]\n</scratchpad_start] -->\n\n**The review comment is incorrect.** `Complex<T>` is fully supported for relevance scoring.\n\nThe codebase implements `ComplexOperations<T>` (src/NumericOperations/ComplexOperations.cs) which provides `LessThan` and `GreaterThan` methods for `Complex<T>` types. These methods compare complex numbers by magnitude, providing a valid ordering. The `MathHelper.GetNumericOperations<T>()` method returns a `ComplexOperations<T>` instance for `Complex<T>` types, so comparison operations will not throw at runtime.\n\n\n\n> Likely an incorrect or invalid review comment.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Embeddings/EmbeddingModelBase.cs (1)</summary><blockquote>\n\n`27-30`: **LGTM!**\n\nThe `NumOps` field provides standardized numeric operations for derived embedding models to use in vector normalization and similarity scoring. The initialization via `MathHelper.GetNumericOperations<T>()` is consistent with the generic numeric operations pattern used throughout the PR.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGMetricBase.cs (1)</summary><blockquote>\n\n`28-33`: **LGTM!**\n\nThe genericization of `RAGMetricBase<T>` and the addition of `NumOps` field aligns well with the PR's goal of type-safe numeric operations across the RAG evaluation framework.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Evaluation/RAGEvaluator.cs (2)</summary><blockquote>\n\n`37-70`: **LGTM!**\n\nThe genericization of `RAGEvaluator<T>` is well-executed. The class now properly supports type-safe evaluation of grounded answers with generic numeric types, consistent with the broader RAG framework updates.\n\n---\n\n`86-92`: **LGTM!**\n\nUsing `Convert.ToDouble` to store metric scores in the `Dictionary<string, double>` is appropriate, as `EvaluationResult` uses `double` for aggregated scores.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (1)</summary><blockquote>\n\n`40-79`: **LGTM!**\n\nThe retrieval and score merging logic correctly combines results from both dense and sparse retrievers, deduplicates by document ID, and returns the top-K documents ordered by combined relevance score.\n\n</blockquote></details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (1)</summary><blockquote>\n\n`190-209`: **LGTM!**\n\nThe addition of `GetAll()` method provides a proper API for retrievers that need full corpus access (e.g., BM25, TF-IDF), eliminating the need for the zero-vector workaround. The XML documentation appropriately warns about memory usage on large document stores.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiQueryRetriever.cs (1)</summary><blockquote>\n\n`30-65`: **LGTM!**\n\nThe score accumulation and deduplication logic correctly merges results from multiple query variations and returns the top-K documents ordered by combined relevance.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (2)</summary><blockquote>\n\n`31-37`: **LGTM!**\n\nThe retriever correctly uses `GetAll()` to retrieve the full corpus, which is semantically appropriate for BM25 (a keyword-based algorithm).\n\n---\n\n`71-87`: **LGTM!**\n\nThe BM25 term scoring formula is correctly implemented with proper length normalization using `(1 - b) + b * (|d| / avgdl)`.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (3)</summary><blockquote>\n\n`31-34`: **LGTM: Numeric operations field.**\n\nThe protected `NumOps` field provides type-safe mathematical operations for generic type T, consistent with the framework's pattern.\n\n---\n\n`131-138`: **LGTM: GetAll method implementation.**\n\nThe new `GetAll()` public method properly delegates to `GetAllCore()` following the established validation-then-core pattern used throughout the base class.\n\n---\n\n`233-254`: **LGTM: GetAllCore abstract method.**\n\nThe new abstract method is well-documented with clear guidance for implementers. The XML documentation appropriately warns about memory considerations for large document collections.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (1)</summary><blockquote>\n\n`61-73`: **LGTM: Score combination logic.**\n\nThe weighted score combination correctly uses `TryGetValue` to efficiently merge results from both stores, avoiding redundant dictionary lookups. The logic properly handles documents present in either or both result sets.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/RetrieverBase.cs (2)</summary><blockquote>\n\n`30-33`: **LGTM: Numeric operations field.**\n\nThe protected `NumOps` field provides type-safe mathematical operations, consistent with the pattern used across the RAG framework.\n\n---\n\n`57-89`: **LGTM: Generic retrieval method signatures.**\n\nAll `Retrieve` method overloads have been cleanly migrated to return `IEnumerable<Document<T>>`, maintaining backward compatibility in the method chain while supporting the generic architecture.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-05T14:51:02Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "aaf7a4a8027b8bb88ec10c6b3b8f1d9ba7d9e40e"
      }
    },
    {
      "id": "PRR_kwDOKSXUF87MAsFe",
      "author": {
        "login": "coderabbitai"
      },
      "authorAssociation": "CONTRIBUTOR",
      "body": "**Actionable comments posted: 10**\n\n<details>\n<summary>ΓÖ╗∩╕Å Duplicate comments (5)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs (1)</summary><blockquote>\n\n`145-153`: **DonΓÇÖt mutate stored documents when returning query results.**\n\nThis selector still sets `RelevanceScore`/`HasRelevanceScore` on the objects held in `_documents`, so every query leaves stale scores visible to `GetById`/future searches. The earlier review flagged this; please return shallow copies that carry the score instead of mutating the cached instances.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary><blockquote>\n\n`3-5`: **Remove duplicate using directive.**\n\nThe `using AiDotNet.Interfaces;` appears on both lines 3 and 5.\n\n\n\nApply this diff:\n```diff\n using AiDotNet.Helpers;\n using AiDotNet.Interfaces;\n using AiDotNet.LinearAlgebra;\n-using AiDotNet.Interfaces;\n using AiDotNet.RetrievalAugmentedGeneration.Models;\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (1)</summary><blockquote>\n\n`90-115`: **Validate embedding dimensions in batch operations.**\n\nWhen processing the first batch, `DocumentStoreBase` validation is skipped (DocumentCount is 0), allowing mixed-length embeddings to be cached. Later similarity calculations will fail when encountering mismatched dimensions.\n\n\n\nApply this diff:\n\n```diff\n protected override void AddBatchCore(IList<VectorDocument<T>> vectorDocuments)\n {\n     if (vectorDocuments.Count == 0) return;\n     \n     if (_vectorDimension == 0)\n         _vectorDimension = vectorDocuments[0].Embedding.Length;\n\n     foreach (var vd in vectorDocuments)\n+    {\n+        if (vd.Embedding.Length != _vectorDimension)\n+            throw new ArgumentException(\n+                $\"Vector dimension mismatch. Expected {_vectorDimension}, got {vd.Embedding.Length}\",\n+                nameof(vectorDocuments));\n+\n         _cache[vd.Document.Id] = vd;\n+    }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (1)</summary><blockquote>\n\n`172-187`: **Apply metadata filters and set HasRelevanceScore flag.**\n\nThe implementation has three issues:\n\n1. **Missing metadata filtering**: The `metadataFilters` parameter is ignored. Documents should be filtered using the `MatchesFilters` helper from the base class.\n2. **Missing relevance flag**: `HasRelevanceScore` is never set to `true`, breaking downstream code that checks this flag.\n3. **Unsafe type conversion**: `Convert.ToDouble` will throw for non-`IConvertible` types. Use `NumOps.ToDouble()` instead.\n\n\n\nApply this diff:\n\n```diff\n protected override IEnumerable<Document<T>> GetSimilarCore(Vector<T> queryVector, int topK, Dictionary<string, object> metadataFilters)\n {\n     var results = new List<(Document<T> doc, T score)>();\n\n     foreach (var vd in _store.Values)\n     {\n+        if (!MatchesFilters(vd.Document, metadataFilters))\n+            continue;\n+\n         var similarity = StatisticsHelper<T>.CosineSimilarity(queryVector, vd.Embedding);\n         vd.Document.RelevanceScore = similarity;\n+        vd.Document.HasRelevanceScore = true;\n         results.Add((vd.Document, similarity));\n     }\n\n     return results\n-        .OrderByDescending(x => Convert.ToDouble(x.score))\n+        .OrderByDescending(x => NumOps.ToDouble(x.score))\n         .Take(topK)\n         .Select(x => x.doc);\n }\n```\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (1)</summary><blockquote>\n\n`53-68`: **Validate embedding dimensions before adding to batch.**\n\nWhen the first batch is added, `DocumentStoreBase` can't enforce dimension checks (DocumentCount is 0), so mixed-length embeddings can slip through and later break similarity calculations.\n\n\n\nApply this diff:\n\n```diff\n protected override void AddBatchCore(IList<VectorDocument<T>> vectorDocuments)\n {\n     if (vectorDocuments.Count == 0)\n         return;\n\n     if (_documents.Count == 0)\n     {\n         _vectorDimension = vectorDocuments[0].Embedding.Length;\n     }\n\n     foreach (var vectorDoc in vectorDocuments)\n     {\n+        if (vectorDoc.Embedding.Length != _vectorDimension)\n+            throw new ArgumentException(\n+                $\"Vector dimension mismatch. Expected {_vectorDimension}, got {vectorDoc.Embedding.Length}\",\n+                nameof(vectorDocuments));\n+\n         _documents[vectorDoc.Document.Id] = vectorDoc;\n         IndexMetadata(vectorDoc.Document);\n     }\n }\n```\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒº╣ Nitpick comments (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (1)</summary><blockquote>\n\n`188-197`: **Prevent cached documents from retaining stale relevance scores.**\n\nAs with the other stores, this code mutates `_documents` when setting `RelevanceScore`/`HasRelevanceScore`. Please return copies so the stored instances remain score-free between queries.\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (1)</summary><blockquote>\n\n`209-212`: **Consider avoiding double dictionary lookup.**\n\nLines 210-211 call `ContainsKey` then index `combinedScores` twice for each document, causing redundant lookups. While clear and readable, this could be optimized if performance matters for large result sets.\n\n\n\nOptional refactor:\n\n```diff\n     var results = allDocuments\n-        .Where(doc => combinedScores.ContainsKey(doc.Id))\n-        .OrderByDescending(doc => combinedScores[doc.Id])\n+        .Where(doc => combinedScores.TryGetValue(doc.Id, out _))\n+        .OrderByDescending(doc => combinedScores.TryGetValue(doc.Id, out var score) ? score : NumOps.Zero)\n         .Take(topK)\n```\n\nHowever, the current implementation is more readable and the performance difference is negligible for typical topK values.\n\n</blockquote></details>\n\n</blockquote></details>\n\n<details>\n<summary>≡ƒô£ Review details</summary>\n\n**Configuration used**: CodeRabbit UI\n\n**Review profile**: CHILL\n\n**Plan**: Pro\n\n<details>\n<summary>≡ƒôÑ Commits</summary>\n\nReviewing files that changed from the base of the PR and between aaf7a4a8027b8bb88ec10c6b3b8f1d9ba7d9e40e and e972697ed5a758045091402fb3f80cadcdfa8829.\n\n</details>\n\n<details>\n<summary>≡ƒôÆ Files selected for processing (14)</summary>\n\n* `src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs` (11 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs` (5 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/PineconeDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/PostgresVectorDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs` (1 hunks)\n* `src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs` (1 hunks)\n\n</details>\n\n<details>\n<summary>≡ƒÜº Files skipped from review as they are similar to previous changes (1)</summary>\n\n* src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs\n\n</details>\n\n<details>\n<summary>≡ƒº░ Additional context used</summary>\n\n<details>\n<summary>≡ƒº¼ Code graph analysis (13)</summary>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (7)</summary>\n\n* `AddCore` (42-51)\n* `Document` (110-113)\n* `AddBatchCore` (53-68)\n* `IEnumerable` (70-108)\n* `IEnumerable` (163-166)\n* `RemoveCore` (115-129)\n* `Clear` (193-198)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (7)</summary>\n\n* `AddCore` (101-107)\n* `Document` (205-208)\n* `AddBatchCore` (132-141)\n* `IEnumerable` (172-187)\n* `IEnumerable` (265-268)\n* `RemoveCore` (228-231)\n* `Clear` (294-298)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PineconeDocumentStore.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/WeaviateDocumentStore.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (3)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (3)</summary>\n\n* `IEnumerable` (185-210)\n* `IEnumerable` (298-301)\n* `Document` (228-231)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (8)</summary>\n\n* `IEnumerable` (83-86)\n* `IEnumerable` (95-102)\n* `IEnumerable` (135-138)\n* `IEnumerable` (207-207)\n* `IEnumerable` (254-254)\n* `Document` (109-113)\n* `Document` (219-219)\n* `Add` (50-54)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/QdrantDocumentStore.cs (8)</summary>\n\n* `HashSet` (233-262)\n* `AddCore` (41-50)\n* `Document` (110-113)\n* `AddBatchCore` (52-67)\n* `IEnumerable` (69-108)\n* `IEnumerable` (163-166)\n* `RemoveCore` (115-129)\n* `Clear` (194-199)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (7)</summary>\n\n* `AddCore` (101-126)\n* `Document` (218-224)\n* `AddBatchCore` (128-159)\n* `IEnumerable` (161-216)\n* `IEnumerable` (299-302)\n* `RemoveCore` (250-261)\n* `Clear` (337-344)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/MilvusDocumentStore.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (10)</summary>\n\n* `DocumentStoreBase` (29-381)\n* `AddCore` (155-155)\n* `Document` (109-113)\n* `Document` (219-219)\n* `AddBatchCore` (176-182)\n* `MatchesFilters` (350-380)\n* `Add` (50-54)\n* `RemoveCore` (231-231)\n* `Remove` (120-124)\n* `Clear` (129-129)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/RedisVLDocumentStore.cs (4)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/AzureSearchDocumentStore.cs (7)</summary>\n\n* `AddCore` (42-51)\n* `Document` (110-113)\n* `AddBatchCore` (53-68)\n* `IEnumerable` (70-108)\n* `IEnumerable` (163-166)\n* `RemoveCore` (115-129)\n* `Clear` (193-198)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/SQLiteVSSDocumentStore.cs (7)</summary>\n\n* `AddCore` (102-108)\n* `Document` (209-212)\n* `AddBatchCore` (135-144)\n* `IEnumerable` (176-191)\n* `IEnumerable` (273-276)\n* `RemoveCore` (233-236)\n* `Clear` (307-311)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ElasticsearchDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/ChromaDBDocumentStore.cs (7)</summary>\n\n* `AddCore` (63-88)\n* `Document` (168-174)\n* `AddBatchCore` (90-115)\n* `IEnumerable` (117-166)\n* `IEnumerable` (247-250)\n* `RemoveCore` (195-212)\n* `Clear` (279-286)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/PostgresVectorDocumentStore.cs (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (1)</summary>\n\n* `DocumentStoreBase` (29-381)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (9)</summary><blockquote>\n\n<details>\n<summary>src/Helpers/MathHelper.cs (2)</summary>\n\n* `INumericOperations` (33-61)\n* `MathHelper` (16-987)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/BM25Retriever.cs (4)</summary>\n\n* `T` (71-87)\n* `T` (89-103)\n* `IEnumerable` (31-69)\n* `MatchesFilters` (177-192)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/MultiVectorRetriever.cs (1)</summary>\n\n* `T` (216-256)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/FAISSDocumentStore.cs (2)</summary>\n\n* `IEnumerable` (185-210)\n* `Document` (228-231)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (3)</summary>\n\n* `IEnumerable` (183-222)\n* `IEnumerable` (299-302)\n* `Document` (242-245)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (5)</summary>\n\n* `IEnumerable` (122-150)\n* `IEnumerable` (192-195)\n* `IEnumerable` (201-204)\n* `IEnumerable` (215-218)\n* `Document` (157-160)\n\n</details>\n<details>\n<summary>src/Interfaces/IDocumentStore.cs (1)</summary>\n\n* `Document` (165-165)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Models/Document.cs (4)</summary>\n\n* `Document` (28-158)\n* `Document` (132-135)\n* `Document` (142-146)\n* `Document` (154-157)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/TFIDFRetriever.cs (2)</summary>\n\n* `Dictionary` (83-146)\n* `MatchesFilters` (148-163)\n\n</details>\n\n</blockquote></details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/HybridDocumentStore.cs (2)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/DocumentStoreBase.cs (15)</summary>\n\n* `DocumentStoreBase` (29-381)\n* `AddCore` (155-155)\n* `Add` (50-54)\n* `AddBatchCore` (176-182)\n* `AddBatch` (60-75)\n* `IEnumerable` (83-86)\n* `IEnumerable` (95-102)\n* `IEnumerable` (135-138)\n* `IEnumerable` (207-207)\n* `IEnumerable` (254-254)\n* `Document` (109-113)\n* `Document` (219-219)\n* `RemoveCore` (231-231)\n* `Remove` (120-124)\n* `Clear` (129-129)\n\n</details>\n<details>\n<summary>src/RetrievalAugmentedGeneration/Retrievers/HybridRetriever.cs (1)</summary>\n\n* `IEnumerable` (40-79)\n\n</details>\n\n</blockquote></details>\n\n</details>\n\n</details>\n\n<details>\n<summary>ΓÅ░ Context from checks skipped due to timeout of 90000ms. You can increase the timeout in your CodeRabbit configuration to a maximum of 15 minutes (900000ms). (1)</summary>\n\n* GitHub Check: Build All Frameworks\n\n</details>\n\n<details>\n<summary>≡ƒöç Additional comments (1)</summary><blockquote>\n\n<details>\n<summary>src/RetrievalAugmentedGeneration/DocumentStores/InMemoryDocumentStore.cs (1)</summary><blockquote>\n\n`122-150`: **Generic score propagation looks solid.**\n\nSwitching to `Document<T>` with the score typed as `T` keeps this store consistent with the base abstractions, and setting `HasRelevanceScore = true` on the returned instances matches what the other vector stores are doing. Nicely aligned update.\n\n</blockquote></details>\n\n</blockquote></details>\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit for review status -->",
      "submittedAt": "2025-11-05T15:09:20Z",
      "includesCreatedEdit": false,
      "reactionGroups": [],
      "state": "CHANGES_REQUESTED",
      "commit": {
        "oid": "e972697ed5a758045091402fb3f80cadcdfa8829"
      }
    }
  ]
}
