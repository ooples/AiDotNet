<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class IVFIndex&lt;T&gt; | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class IVFIndex&lt;T&gt; | AiDotNet Documentation ">
      
      <meta name="description" content="Inverted File (IVF) index that partitions the vector space for faster search.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1.md&amp;value=---%0Auid%3A%20AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex%601%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1">



  <h1 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1" class="text-break">
Class IVFIndex&lt;T&gt;  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L20"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.html">RetrievalAugmentedGeneration</a>.<a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.html">VectorSearch</a>.<a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.html">Indexes</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Inverted File (IVF) index that partitions the vector space for faster search.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class IVFIndex&lt;T&gt; : IVectorIndex&lt;T&gt;</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd><p>The numeric type for vector operations.</p>
</dd>
  </dl>

  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">IVFIndex&lt;T&gt;</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVectorIndex-1.html">IVectorIndex</a>&lt;T&gt;</div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>IVF partitions vectors into clusters (cells) and only searches the most relevant
clusters during query time. This is an approximate nearest neighbor (ANN) method
that trades some accuracy for significant speed improvements.
Search complexity: O(n/m + k) where n is total vectors, m is number of clusters, k is result size.
Best for medium to large datasets (10K - 10M vectors).</p>
</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1__ctor_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.#ctor*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1__ctor_AiDotNet_RetrievalAugmentedGeneration_VectorSearch_ISimilarityMetric__0__System_Int32_System_Int32_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.#ctor(AiDotNet.RetrievalAugmentedGeneration.VectorSearch.ISimilarityMetric{`0},System.Int32,System.Int32)">
  IVFIndex(ISimilarityMetric&lt;T&gt;, int, int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L38"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of the IVFIndex class.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IVFIndex(ISimilarityMetric&lt;T&gt; metric, int numClusters = 100, int numProbes = 1)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>metric</code> <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.ISimilarityMetric-1.html">ISimilarityMetric</a>&lt;T&gt;</dt>
    <dd><p>The similarity metric to use.</p>
</dd>
    <dt><code>numClusters</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>Number of clusters to partition vectors into.</p>
</dd>
    <dt><code>numProbes</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>Number of clusters to search during query (default: 1).</p>
</dd>
  </dl>












  <h2 class="section" id="properties">Properties
</h2>


  <a id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Count_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Count*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Count" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Count">
  Count
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L30"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the number of vectors in the index.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int Count { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Add_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Add*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Add_System_String_AiDotNet_Tensors_LinearAlgebra_Vector__0__" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Add(System.String,AiDotNet.Tensors.LinearAlgebra.Vector{`0})">
  Add(string, Vector&lt;T&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L53"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Adds a vector to the index.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Add(string id, Vector&lt;T&gt; vector)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>id</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The unique identifier for the vector.</p>
</dd>
    <dt><code>vector</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;</dt>
    <dd><p>The vector to add.</p>
</dd>
  </dl>












  <a id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_AddBatch_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.AddBatch*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_AddBatch_System_Collections_Generic_Dictionary_System_String_AiDotNet_Tensors_LinearAlgebra_Vector__0___" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.AddBatch(System.Collections.Generic.Dictionary{System.String,AiDotNet.Tensors.LinearAlgebra.Vector{`0}})">
  AddBatch(Dictionary&lt;string, Vector&lt;T&gt;&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L65"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Adds multiple vectors to the index in batch.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void AddBatch(Dictionary&lt;string, Vector&lt;T&gt;&gt; vectors)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>vectors</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.dictionary-2">Dictionary</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>, <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;&gt;</dt>
    <dd><p>Dictionary of id to vector mappings.</p>
</dd>
  </dl>












  <a id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Clear_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Clear*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Clear" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Clear">
  Clear()
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L132"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Clears all vectors from the index.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Clear()</code></pre>
  </div>













  <a id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Remove_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Remove*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Remove_System_String_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Remove(System.String)">
  Remove(string)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L121"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Removes a vector from the index.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool Remove(string id)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>id</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The id of the vector to remove.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>True if the vector was removed, false if not found.</p>
</dd>
  </dl>











  <a id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Search_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Search*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_VectorSearch_Indexes_IVFIndex_1_Search_AiDotNet_Tensors_LinearAlgebra_Vector__0__System_Int32_" data-uid="AiDotNet.RetrievalAugmentedGeneration.VectorSearch.Indexes.IVFIndex`1.Search(AiDotNet.Tensors.LinearAlgebra.Vector{`0},System.Int32)">
  Search(Vector&lt;T&gt;, int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L89"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Searches for the k nearest neighbors to the query vector.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public List&lt;(string Id, T Score)&gt; Search(Vector&lt;T&gt; query, int k)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>query</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;</dt>
    <dd><p>The query vector.</p>
</dd>
    <dt><code>k</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The number of neighbors to return.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.list-1">List</a>&lt;(<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetuple-system.string,-0-.strategy">Strategy</a>, T <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetuple-system.string,-0-.score">Score</a>)&gt;</dt>
    <dd><p>List of (id, score) tuples ordered by similarity.</p>
</dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/VectorSearch/Indexes/IVFIndex.cs/#L20" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
