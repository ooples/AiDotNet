<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class AgentBase&lt;T&gt; | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class AgentBase&lt;T&gt; | AiDotNet Documentation ">
      
      <meta name="description" content="Provides a base implementation for agents that use language models and tools to solve problems. This abstract class handles common agent functionality like tool management and scratchpad tracking.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_Agents_AgentBase_1.md&amp;value=---%0Auid%3A%20AiDotNet.Agents.AgentBase%601%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.Agents.AgentBase`1">



  <h1 id="AiDotNet_Agents_AgentBase_1" data-uid="AiDotNet.Agents.AgentBase`1" class="text-break">
Class AgentBase&lt;T&gt;  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L25"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.Agents.html">Agents</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Provides a base implementation for agents that use language models and tools to solve problems.
This abstract class handles common agent functionality like tool management and scratchpad tracking.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public abstract class AgentBase&lt;T&gt; : IAgent&lt;T&gt;</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd><p>The numeric type used for model parameters and operations (e.g., double, float).</p>
</dd>
  </dl>

  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">AgentBase&lt;T&gt;</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="AiDotNet.Interfaces.IAgent-1.html">IAgent</a>&lt;T&gt;</div>
    </dd>
  </dl>

  <dl class="typelist derived">
    <dt>Derived</dt>
    <dd>
      <div><a class="xref" href="AiDotNet.Agents.Agent-1.html">Agent&lt;T&gt;</a></div>
      <div><a class="xref" href="AiDotNet.Agents.ChainOfThoughtAgent-1.html">ChainOfThoughtAgent&lt;T&gt;</a></div>
      <div><a class="xref" href="AiDotNet.Agents.PlanAndExecuteAgent-1.html">PlanAndExecuteAgent&lt;T&gt;</a></div>
      <div><a class="xref" href="AiDotNet.Agents.RAGAgent-1.html">RAGAgent&lt;T&gt;</a></div>
    </dd>
  </dl>

  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="AiDotNet_Agents_AgentBase_1_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>For Beginners:
This base class is like a template for creating different types of agents. It handles the common
parts that all agents need (storing tools, tracking reasoning history), while allowing specific
agent types to implement their own reasoning strategies.</p>
<p>Think of it like a recipe template: all recipes have ingredients and steps, but each specific
recipe (chocolate cake, apple pie) implements those steps differently. Similarly, all agents
have tools and a reasoning process, but different agent types might implement different
reasoning strategies (ReAct, Chain-of-Thought, Tree-of-Thoughts, etc.).</p>
<p>This class follows the Template Method pattern, where common behavior is implemented here
and specific behavior is left for derived classes to implement.</p>
</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="AiDotNet_Agents_AgentBase_1__ctor_" data-uid="AiDotNet.Agents.AgentBase`1.#ctor*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1__ctor_AiDotNet_Interfaces_IChatModel__0__System_Collections_Generic_IEnumerable_AiDotNet_Interfaces_ITool__" data-uid="AiDotNet.Agents.AgentBase`1.#ctor(AiDotNet.Interfaces.IChatModel{`0},System.Collections.Generic.IEnumerable{AiDotNet.Interfaces.ITool})">
  AgentBase(IChatModel&lt;T&gt;, IEnumerable&lt;ITool&gt;?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L45"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="AiDotNet.Agents.AgentBase-1.html">AgentBase&lt;T&gt;</a> class.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected AgentBase(IChatModel&lt;T&gt; chatModel, IEnumerable&lt;ITool&gt;? tools = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>chatModel</code> <a class="xref" href="AiDotNet.Interfaces.IChatModel-1.html">IChatModel</a>&lt;T&gt;</dt>
    <dd><p>The chat model used for reasoning and decision-making.</p>
</dd>
    <dt><code>tools</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable</a>&lt;<a class="xref" href="AiDotNet.Interfaces.ITool.html">ITool</a>&gt;</dt>
    <dd><p>The collection of tools available to the agent. Can be null or empty if no tools are needed.</p>
</dd>
  </dl>








  <h4 class="section" id="AiDotNet_Agents_AgentBase_1__ctor_AiDotNet_Interfaces_IChatModel__0__System_Collections_Generic_IEnumerable_AiDotNet_Interfaces_ITool___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>For Beginners:
This constructor sets up a new agent with a &quot;brain&quot; (the chat model) and a set of tools.
The chat model is required because every agent needs to be able to think and reason.
Tools are optional - some tasks might not need any tools, while others might need many.</p>
<p>The scratchpad is initialized as an empty notebook where the agent will write down
its thoughts, actions, and observations as it works.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown when <code class="paramref">chatModel</code> is null.</p>
</dd>
  </dl>



  <h2 class="section" id="properties">Properties
</h2>


  <a id="AiDotNet_Agents_AgentBase_1_ChatModel_" data-uid="AiDotNet.Agents.AgentBase`1.ChatModel*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_ChatModel" data-uid="AiDotNet.Agents.AgentBase`1.ChatModel">
  ChatModel
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L53"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the chat model used by the agent for reasoning and decision-making.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IChatModel&lt;T&gt; ChatModel { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Interfaces.IChatModel-1.html">IChatModel</a>&lt;T&gt;</dt>
    <dd><p>An instance of <a class="xref" href="AiDotNet.Interfaces.IChatModel-1.html">IChatModel&lt;T&gt;</a> that generates responses and plans actions.</p>
</dd>
  </dl>








  <a id="AiDotNet_Agents_AgentBase_1_Scratchpad_" data-uid="AiDotNet.Agents.AgentBase`1.Scratchpad*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_Scratchpad" data-uid="AiDotNet.Agents.AgentBase`1.Scratchpad">
  Scratchpad
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L59"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the reasoning history (scratchpad) from the agent's most recent execution.
This includes all thoughts, actions, and observations from the reasoning process.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string Scratchpad { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>A string containing the complete reasoning trace, useful for debugging and understanding
how the agent arrived at its answer.</p>
</dd>
  </dl>




  <h4 class="section" id="AiDotNet_Agents_AgentBase_1_Scratchpad_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>For Beginners:
The scratchpad is like showing your work in math class. It's a record of everything
the agent thought and did while solving the problem. This is incredibly useful for:</p>
<ul>
<li>Understanding how the agent solved the problem</li>
<li>Debugging when the agent gives an unexpected answer</li>
<li>Learning how to improve prompts and tools</li>
<li>Transparency and explainability in AI systems</li>
</ul>
<p>Example scratchpad content:</p>
<pre><code class="lang-csharp">Iteration 1:
Thought: I need to calculate the square root of 144 first.
Action: Calculator
Action Input: sqrt(144)
Observation: 12

Iteration 2:
Thought: Now I need to add 5 to the result.
Action: Calculator
Action Input: 12 + 5
Observation: 17

Iteration 3:
Thought: I have the final answer.
Final Answer: 17</code></pre>
</div>




  <a id="AiDotNet_Agents_AgentBase_1_Tools_" data-uid="AiDotNet.Agents.AgentBase`1.Tools*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_Tools" data-uid="AiDotNet.Agents.AgentBase`1.Tools">
  Tools
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L56"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the collection of tools available to the agent.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IReadOnlyList&lt;ITool&gt; Tools { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ireadonlylist-1">IReadOnlyList</a>&lt;<a class="xref" href="AiDotNet.Interfaces.ITool.html">ITool</a>&gt;</dt>
    <dd><p>A read-only list of <a class="xref" href="AiDotNet.Interfaces.ITool.html">ITool</a> instances that the agent can use to perform actions.</p>
</dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="AiDotNet_Agents_AgentBase_1_AppendToScratchpad_" data-uid="AiDotNet.Agents.AgentBase`1.AppendToScratchpad*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_AppendToScratchpad_System_String_" data-uid="AiDotNet.Agents.AgentBase`1.AppendToScratchpad(System.String)">
  AppendToScratchpad(string)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L74"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Appends a message to the agent's scratchpad.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected void AppendToScratchpad(string message)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>message</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The message to append.</p>
</dd>
  </dl>








  <h4 class="section" id="AiDotNet_Agents_AgentBase_1_AppendToScratchpad_System_String__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>For Beginners:
This method is like writing in a notebook. Every time the agent has a thought,
takes an action, or observes a result, it writes it down in the scratchpad.
This creates a complete record of the agent's reasoning process.</p>
</div>




  <a id="AiDotNet_Agents_AgentBase_1_ClearScratchpad_" data-uid="AiDotNet.Agents.AgentBase`1.ClearScratchpad*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_ClearScratchpad" data-uid="AiDotNet.Agents.AgentBase`1.ClearScratchpad">
  ClearScratchpad()
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L88"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Clears the agent's scratchpad, removing all previous reasoning history.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected void ClearScratchpad()</code></pre>
  </div>









  <h4 class="section" id="AiDotNet_Agents_AgentBase_1_ClearScratchpad_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>For Beginners:
This method is like erasing a whiteboard or starting with a fresh page in a notebook.
It's typically called at the beginning of RunAsync to ensure each query starts with
a clean slate, without being influenced by previous queries.</p>
</div>




  <a id="AiDotNet_Agents_AgentBase_1_FindTool_" data-uid="AiDotNet.Agents.AgentBase`1.FindTool*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_FindTool_System_String_" data-uid="AiDotNet.Agents.AgentBase`1.FindTool(System.String)">
  FindTool(string)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L107"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Finds a tool by its name.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected ITool? FindTool(string toolName)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>toolName</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The name of the tool to find.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Interfaces.ITool.html">ITool</a></dt>
    <dd><p>The tool with the specified name, or null if no matching tool is found.</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_Agents_AgentBase_1_FindTool_System_String__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>For Beginners:
This method is like searching through a toolbox for a specific tool by name.
When the agent decides it needs to use a tool (like &quot;Calculator&quot;), this method
finds that tool so the agent can execute it.</p>
<p>The search is case-insensitive, so &quot;calculator&quot;, &quot;Calculator&quot;, and &quot;CALCULATOR&quot;
all match the same tool.</p>
</div>




  <a id="AiDotNet_Agents_AgentBase_1_GetToolDescriptions_" data-uid="AiDotNet.Agents.AgentBase`1.GetToolDescriptions*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_GetToolDescriptions" data-uid="AiDotNet.Agents.AgentBase`1.GetToolDescriptions">
  GetToolDescriptions()
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L131"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Generates a formatted description of all available tools.
This is typically used in prompts to inform the language model about available tools.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected string GetToolDescriptions()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>A formatted string describing all available tools.</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_Agents_AgentBase_1_GetToolDescriptions_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>For Beginners:
This method creates a list of all tools and their descriptions, formatted in a way
that the language model can understand. It's like giving the agent an instruction manual
that says &quot;Here are the tools you have and what each one does.&quot;</p>
<p>Example output:</p>
<pre><code class="lang-csharp">Available tools:
- Calculator: Performs mathematical calculations. Input should be a valid expression.
- Search: Searches for information. Input should be a search query.</code></pre>
</div>




  <a id="AiDotNet_Agents_AgentBase_1_RunAsync_" data-uid="AiDotNet.Agents.AgentBase`1.RunAsync*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_RunAsync_System_String_System_Int32_" data-uid="AiDotNet.Agents.AgentBase`1.RunAsync(System.String,System.Int32)">
  RunAsync(string, int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L62"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes the agent's reasoning and action loop to answer a query or complete a task.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public abstract Task&lt;string&gt; RunAsync(string query, int maxIterations = 5)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>query</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The question or task for the agent to solve.</p>
</dd>
    <dt><code>maxIterations</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The maximum number of thought-action-observation cycles to prevent infinite loops.
Default is 5.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>&gt;</dt>
    <dd><p>A task that represents the asynchronous operation. The task result contains
the agent's final answer or response.</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_Agents_AgentBase_1_RunAsync_System_String_System_Int32__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>For Beginners:
The Run method is where the magic happens. When you give the agent a query like
&quot;What is the square root of 144 plus 5?&quot;, it will:</p>
<ol>
<li>Think about what needs to be done</li>
<li>Decide which tool to use (Calculator)</li>
<li>Execute the tool with the right input (&quot;sqrt(144)&quot;)</li>
<li>Observe the result (&quot;12&quot;)</li>
<li>Think about the next step</li>
<li>Use the calculator again (&quot;12 + 5&quot;)</li>
<li>Observe the result (&quot;17&quot;)</li>
<li>Conclude and provide the final answer</li>
</ol>
<p>The maxIterations parameter is a safety feature. It prevents the agent from getting stuck
in an endless loop if something goes wrong. If the agent can't solve the problem within
the maximum iterations, it will stop and return what it has learned so far.</p>
<p>Implementation notes for developers:</p>
<ul>
<li>Maintain a &quot;scratchpad&quot; or conversation history throughout the iterations</li>
<li>Format prompts to instruct the LLM to respond in a structured format (e.g., JSON)</li>
<li>Parse the LLM's response to extract thoughts and actions</li>
<li>Execute the specified tool and capture the observation</li>
<li>Continue until the LLM indicates it has a final answer or max iterations is reached</li>
<li>Handle errors gracefully and provide meaningful error messages</li>
</ul>
</div>




  <a id="AiDotNet_Agents_AgentBase_1_ValidateMaxIterations_" data-uid="AiDotNet.Agents.AgentBase`1.ValidateMaxIterations*"></a>

  <h3 id="AiDotNet_Agents_AgentBase_1_ValidateMaxIterations_System_Int32_" data-uid="AiDotNet.Agents.AgentBase`1.ValidateMaxIterations(System.Int32)">
  ValidateMaxIterations(int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L159"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Validates that the specified maximum iterations value is valid.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected void ValidateMaxIterations(int maxIterations)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>maxIterations</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The maximum iterations value to validate.</p>
</dd>
  </dl>








  <h4 class="section" id="AiDotNet_Agents_AgentBase_1_ValidateMaxIterations_System_Int32__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>For Beginners:
This method checks that the maximum iterations setting makes sense. An agent needs
at least one iteration to do anything useful, so this method ensures the value isn't
zero or negative.</p>
<p>It's a safety check to catch configuration errors early, before the agent starts running.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentexception">ArgumentException</a></dt>
    <dd><p>Thrown when maxIterations is less than 1.</p>
</dd>
  </dl>




</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/Agents/AgentBase.cs/#L25" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
