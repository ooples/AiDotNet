<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class ConstantFoldingPass | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class ConstantFoldingPass | AiDotNet Documentation ">
      
      <meta name="description" content="Optimization pass that evaluates constant expressions at compile time.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass.md&amp;value=---%0Auid%3A%20AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass">



  <h1 id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass" class="text-break">
Class ConstantFoldingPass  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/ConstantFoldingPass.cs/#L38"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.JitCompiler.html">JitCompiler</a>.<a class="xref" href="AiDotNet.JitCompiler.Optimizations.html">Optimizations</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Optimization pass that evaluates constant expressions at compile time.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class ConstantFoldingPass : IOptimizationPass</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">ConstantFoldingPass</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="AiDotNet.JitCompiler.Optimizations.IOptimizationPass.html">IOptimizationPass</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
Constant folding is a compiler optimization that evaluates expressions with
constant inputs during compilation rather than at runtime. This reduces the
number of operations that need to be executed and can significantly improve
performance for graphs with many constant operations.
</p>
<p><b>For Beginners:</b> This optimization pre-computes results that never change.
<p>Think of it like simplifying math:</p>
<ul>
<li>Original: x = 2 + 3, y = x * 4</li>
<li>Optimized: x = 5, y = x * 4 (we computed 2 + 3 ahead of time)</li>
<li>Even better: y = 20 (if x is only used here)</li>
</ul>
<p>Why this helps:</p>
<ul>
<li>Fewer operations to execute at runtime</li>
<li>Less memory needed for intermediate results</li>
<li>Can enable other optimizations (if everything becomes constant)</li>
</ul>
<p>Example in neural networks:</p>
<ul>
<li>If you have weight_scaled = weight * scale_factor</li>
<li>And both weight and scale_factor are constants</li>
<li>We can compute weight_scaled once at compile time</li>
<li>Runtime just uses the pre-computed value</li>
</ul>
<p>This is especially useful for operations on model architecture parameters
that don't change during inference.</p>

</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass__ctor_" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.#ctor*"></a>

  <h3 id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass__ctor" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.#ctor">
  ConstantFoldingPass()
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/ConstantFoldingPass.cs/#L65"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance with default configuration.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ConstantFoldingPass()</code></pre>
  </div>













  <a id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass__ctor_" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.#ctor*"></a>

  <h3 id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass__ctor_AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass_FoldingConfig_" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.#ctor(AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.FoldingConfig)">
  ConstantFoldingPass(FoldingConfig)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/ConstantFoldingPass.cs/#L70"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance with custom configuration.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ConstantFoldingPass(ConstantFoldingPass.FoldingConfig config)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>config</code> <a class="xref" href="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.html">ConstantFoldingPass</a>.<a class="xref" href="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.FoldingConfig.html">FoldingConfig</a></dt>
    <dd></dd>
  </dl>












  <h2 class="section" id="properties">Properties
</h2>


  <a id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass_Name_" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.Name*"></a>

  <h3 id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass_Name" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.Name">
  Name
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/ConstantFoldingPass.cs/#L43"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the name of this optimization pass.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string Name { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass_Optimize_" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.Optimize*"></a>

  <h3 id="AiDotNet_JitCompiler_Optimizations_ConstantFoldingPass_Optimize_AiDotNet_JitCompiler_IR_IRGraph_" data-uid="AiDotNet.JitCompiler.Optimizations.ConstantFoldingPass.Optimize(AiDotNet.JitCompiler.IR.IRGraph)">
  Optimize(IRGraph)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/ConstantFoldingPass.cs/#L80"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Applies constant folding optimization to an IR graph.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IRGraph Optimize(IRGraph graph)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>graph</code> <a class="xref" href="AiDotNet.JitCompiler.IR.IRGraph.html">IRGraph</a></dt>
    <dd><p>The IR graph to optimize.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.JitCompiler.IR.IRGraph.html">IRGraph</a></dt>
    <dd><p>An optimized IR graph with constant expressions folded.</p>
</dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/ConstantFoldingPass.cs/#L38" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
