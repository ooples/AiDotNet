<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Interface IDeferredScope | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Interface IDeferredScope | AiDotNet Documentation ">
      
      <meta name="description" content="Interface for a deferred execution scope that records operations and executes them as an optimized graph.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_Tensors_Engines_Gpu_IDeferredScope.md&amp;value=---%0Auid%3A%20AiDotNet.Tensors.Engines.Gpu.IDeferredScope%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope">



  <h1 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope" class="text-break">
Interface IDeferredScope  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L30"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.Tensors.html">Tensors</a>.<a class="xref" href="AiDotNet.Tensors.Engines.html">Engines</a>.<a class="xref" href="AiDotNet.Tensors.Engines.Gpu.html">Gpu</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.Tensors.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Interface for a deferred execution scope that records operations
and executes them as an optimized graph.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public interface IDeferredScope : IDisposable</code></pre>
  </div>







  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.idisposable.dispose">IDisposable.Dispose()</a>
    </div>
  </dd></dl>




  <h2 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p><b>Phase 3: Deferred Execution API</b></p>
<p>
A deferred scope records all GPU operations instead of executing them immediately.
When the scope is completed (via Execute or Dispose), the recorded operations
are compiled into an optimized execution graph and executed.
</p>
<p><b>Example Usage:</b></p>
<pre><code class="lang-csharp">using (var scope = backend.BeginDeferredScope())
{
    // Use the recording backend to record operations
    scope.RecordingBackend.Gemm(a, b, c, M, N, K);
    scope.RecordingBackend.Relu(c, c, size);

    // Graph is compiled, optimized, and executed here
    await scope.ExecuteAsync();
}</code></pre>
</div>


  <h2 class="section" id="properties">Properties
</h2>


  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_GraphBuilder_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.GraphBuilder*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_GraphBuilder" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.GraphBuilder">
  GraphBuilder
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L35"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the execution graph builder for recording operations.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">ExecutionGraphBuilder GraphBuilder { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Tensors.Engines.Gpu.Graph.ExecutionGraphBuilder.html">ExecutionGraphBuilder</a></dt>
    <dd></dd>
  </dl>








  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_IsExecuted_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.IsExecuted*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_IsExecuted" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.IsExecuted">
  IsExecuted
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L56"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets whether this scope has been executed.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">bool IsExecuted { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>








  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_IsRecording_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.IsRecording*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_IsRecording" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.IsRecording">
  IsRecording
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L46"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets whether operations are currently being recorded.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">bool IsRecording { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>








  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_OperationCount_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.OperationCount*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_OperationCount" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.OperationCount">
  OperationCount
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L61"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the number of operations recorded in this scope.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">int OperationCount { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>








  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Options_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.Options*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Options" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.Options">
  Options
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L51"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the execution options for this scope.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">GpuExecutionOptions Options { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Tensors.Engines.Gpu.GpuExecutionOptions.html">GpuExecutionOptions</a></dt>
    <dd></dd>
  </dl>








  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_RecordingBackend_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.RecordingBackend*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_RecordingBackend" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.RecordingBackend">
  RecordingBackend
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L41"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the recording backend that intercepts operations and records them to the graph.
Use this backend instead of the original to have operations recorded.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IDirectGpuBackend RecordingBackend { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Tensors.Engines.DirectGpu.IDirectGpuBackend.html">IDirectGpuBackend</a></dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Compile_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.Compile*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Compile" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.Compile">
  Compile()
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L97"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the compiled execution graph without executing it.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">ExecutionGraph Compile()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Tensors.Engines.Gpu.Graph.ExecutionGraph.html">ExecutionGraph</a></dt>
    <dd><p>The compiled and optimized execution graph.</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Compile_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
Useful for inspecting the optimization results or caching the compiled graph.
Call <a class="xref" href="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.html#AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Execute">Execute()</a> or <a class="xref" href="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.html#AiDotNet_Tensors_Engines_Gpu_IDeferredScope_ExecuteAsync_System_Threading_CancellationToken_">ExecuteAsync(CancellationToken)</a> to run the graph.
</p>
</div>




  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Execute_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.Execute*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Execute" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.Execute">
  Execute()
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L72"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Compiles and executes the recorded operations synchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">void Execute()</code></pre>
  </div>









  <h4 class="section" id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_Execute_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
The execution graph is compiled with optimization passes (fusion, stream assignment, etc.)
and then executed. After execution, the scope cannot be reused.
</p>
</div>




  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_ExecuteAsync_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.ExecuteAsync*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_ExecuteAsync_System_Threading_CancellationToken_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.ExecuteAsync(System.Threading.CancellationToken)">
  ExecuteAsync(CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L85"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Compiles and executes the recorded operations asynchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task ExecuteAsync(CancellationToken cancellationToken = default)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>Token to cancel execution.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task">Task</a></dt>
    <dd><p>A task representing the asynchronous execution.</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_ExecuteAsync_System_Threading_CancellationToken__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
The execution graph is compiled with optimization passes and executed asynchronously.
GPU operations run in parallel where possible.
</p>
</div>




  <a id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_GetStatistics_" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.GetStatistics*"></a>

  <h3 id="AiDotNet_Tensors_Engines_Gpu_IDeferredScope_GetStatistics" data-uid="AiDotNet.Tensors.Engines.Gpu.IDeferredScope.GetStatistics">
  GetStatistics()
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L103"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets execution statistics after the scope has been executed.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">DeferredScopeStatistics? GetStatistics()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Tensors.Engines.Gpu.DeferredScopeStatistics.html">DeferredScopeStatistics</a></dt>
    <dd><p>Statistics about the execution, or null if not yet executed.</p>
</dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/AiDotNet.Tensors/Engines/Gpu/IDeferredScope.cs/#L30" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
