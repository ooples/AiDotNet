<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class ColBERTRetriever&lt;T&gt; | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class ColBERTRetriever&lt;T&gt; | AiDotNet Documentation ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_RetrievalAugmentedGeneration_Retrievers_ColBERTRetriever_1.md&amp;value=---%0Auid%3A%20AiDotNet.RetrievalAugmentedGeneration.Retrievers.ColBERTRetriever%601%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.RetrievalAugmentedGeneration.Retrievers.ColBERTRetriever`1">



  <h1 id="AiDotNet_RetrievalAugmentedGeneration_Retrievers_ColBERTRetriever_1" data-uid="AiDotNet.RetrievalAugmentedGeneration.Retrievers.ColBERTRetriever`1" class="text-break">
Class ColBERTRetriever&lt;T&gt;  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs/#L66"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.html">RetrievalAugmentedGeneration</a>.<a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.html">Retrievers</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.dll</dd></dl>
  </div>

  <div class="markdown summary"></div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class ColBERTRetriever&lt;T&gt; : RetrieverBase&lt;T&gt;, IRetriever&lt;T&gt;</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd></dd>
  </dl>

  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html">RetrieverBase</a>&lt;T&gt;</div>
      <div><span class="xref">ColBERTRetriever&lt;T&gt;</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="AiDotNet.Interfaces.IRetriever-1.html">IRetriever</a>&lt;T&gt;</div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_NumOps">RetrieverBase&lt;T&gt;.NumOps</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_DefaultTopK">RetrieverBase&lt;T&gt;.DefaultTopK</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_Retrieve_System_String_">RetrieverBase&lt;T&gt;.Retrieve(string)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_Retrieve_System_String_System_Int32_">RetrieverBase&lt;T&gt;.Retrieve(string, int)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_Retrieve_System_String_System_Int32_System_Collections_Generic_Dictionary_System_String_System_Object__">RetrieverBase&lt;T&gt;.Retrieve(string, int, Dictionary&lt;string, object&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_ValidateQuery_System_String_">RetrieverBase&lt;T&gt;.ValidateQuery(string)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_ValidateTopK_System_Int32_">RetrieverBase&lt;T&gt;.ValidateTopK(int)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_ValidateMetadataFilters_System_Collections_Generic_Dictionary_System_String_System_Object__">RetrieverBase&lt;T&gt;.ValidateMetadataFilters(Dictionary&lt;string, object&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Retrievers.RetrieverBase-1.html#AiDotNet_RetrievalAugmentedGeneration_Retrievers_RetrieverBase_1_PostProcessResults_System_Collections_Generic_IEnumerable_AiDotNet_RetrievalAugmentedGeneration_Models_Document__0___System_Int32_">RetrieverBase&lt;T&gt;.PostProcessResults(IEnumerable&lt;Document&lt;T&gt;&gt;, int)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="AiDotNet_RetrievalAugmentedGeneration_Retrievers_ColBERTRetriever_1__ctor_" data-uid="AiDotNet.RetrievalAugmentedGeneration.Retrievers.ColBERTRetriever`1.#ctor*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_Retrievers_ColBERTRetriever_1__ctor_AiDotNet_Interfaces_IDocumentStore__0__System_String_System_Int32_System_Int32_" data-uid="AiDotNet.RetrievalAugmentedGeneration.Retrievers.ColBERTRetriever`1.#ctor(AiDotNet.Interfaces.IDocumentStore{`0},System.String,System.Int32,System.Int32)">
  ColBERTRetriever(IDocumentStore&lt;T&gt;, string, int, int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs/#L91"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of the ColBERTRetriever class.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ColBERTRetriever(IDocumentStore&lt;T&gt; documentStore, string modelPath, int maxDocLength, int maxQueryLength)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>documentStore</code> <a class="xref" href="AiDotNet.Interfaces.IDocumentStore-1.html">IDocumentStore</a>&lt;T&gt;</dt>
    <dd><p>The document store containing indexed documents.</p>
</dd>
    <dt><code>modelPath</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>Path to the ColBERT model file (ONNX format).</p>
</dd>
    <dt><code>maxDocLength</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>Maximum document length in tokens (typically 180-512).</p>
</dd>
    <dt><code>maxQueryLength</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>Maximum query length in tokens (typically 32-64).</p>
</dd>
  </dl>








  <h4 class="section" id="AiDotNet_RetrievalAugmentedGeneration_Retrievers_ColBERTRetriever_1__ctor_AiDotNet_Interfaces_IDocumentStore__0__System_String_System_Int32_System_Int32__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p><b>For Beginners:</b> These parameters control how much text ColBERT processes:
<ul>
<li>maxDocLength: How many words/tokens from each document (longer = more context but slower)</li>
<li>maxQueryLength: How many words/tokens from query (shorter queries are typical)</li>
</ul>
<p>Example: maxDocLength=512 means process up to about 512 words per document.</p>

</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown when documentStore or modelPath is null.</p>
</dd>
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentoutofrangeexception">ArgumentOutOfRangeException</a></dt>
    <dd><p>Thrown when maxDocLength or maxQueryLength is not positive.</p>
</dd>
  </dl>



  <h2 class="section" id="methods">Methods
</h2>


  <a id="AiDotNet_RetrievalAugmentedGeneration_Retrievers_ColBERTRetriever_1_RetrieveCore_" data-uid="AiDotNet.RetrievalAugmentedGeneration.Retrievers.ColBERTRetriever`1.RetrieveCore*"></a>

  <h3 id="AiDotNet_RetrievalAugmentedGeneration_Retrievers_ColBERTRetriever_1_RetrieveCore_System_String_System_Int32_System_Collections_Generic_Dictionary_System_String_System_Object__" data-uid="AiDotNet.RetrievalAugmentedGeneration.Retrievers.ColBERTRetriever`1.RetrieveCore(System.String,System.Int32,System.Collections.Generic.Dictionary{System.String,System.Object})">
  RetrieveCore(string, int, Dictionary&lt;string, object&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs/#L140"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Retrieves documents using token-level late interaction matching.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected override IEnumerable&lt;Document&lt;T&gt;&gt; RetrieveCore(string query, int topK, Dictionary&lt;string, object&gt; metadataFilters)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>query</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The validated query text.</p>
</dd>
    <dt><code>topK</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The validated number of documents to retrieve.</p>
</dd>
    <dt><code>metadataFilters</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.dictionary-2">Dictionary</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a>&gt;</dt>
    <dd><p>The validated metadata filters.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable</a>&lt;<a class="xref" href="AiDotNet.RetrievalAugmentedGeneration.Models.Document-1.html">Document</a>&lt;T&gt;&gt;</dt>
    <dd><p>Documents ordered by ColBERT relevance score (highest first).</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_RetrievalAugmentedGeneration_Retrievers_ColBERTRetriever_1_RetrieveCore_System_String_System_Int32_System_Collections_Generic_Dictionary_System_String_System_Object___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
In a full ColBERT implementation, this method would:
1. Tokenize and embed each query token
2. For each candidate document, tokenize and embed each document token
3. For each query token, find maximum similarity with any document token (MaxSim)
4. Sum MaxSim scores across all query tokens to get document score
5. Rank documents by total score
<p>This fallback implementation uses token overlap scoring as an approximation,
analyzing which query terms appear in documents and how frequently.</p>

<p><b>For Beginners:</b> What happens when you search:
<ol>
<li>Your query is split into words: [&quot;climate&quot;, &quot;change&quot;, &quot;solutions&quot;]</li>
<li>For each word, find documents containing it</li>
<li>Documents with more matching words score higher</li>
<li>Return top-scoring documents</li>
</ol>
<p>This fallback approach approximates ColBERT's word-level matching without
requiring the full neural model.</p>

</div>





</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/RetrievalAugmentedGeneration/Retrievers/ColBERTRetriever.cs/#L66" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
