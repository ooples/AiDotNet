<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class AdaptiveFusionPass | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class AdaptiveFusionPass | AiDotNet Documentation ">
      
      <meta name="description" content="Adaptive fusion pass that intelligently fuses operations based on graph structure and hardware characteristics.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass.md&amp;value=---%0Auid%3A%20AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass">



  <h1 id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass" class="text-break">
Class AdaptiveFusionPass  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/AdaptiveFusionPass.cs/#L34"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.JitCompiler.html">JitCompiler</a>.<a class="xref" href="AiDotNet.JitCompiler.Optimizations.html">Optimizations</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Adaptive fusion pass that intelligently fuses operations based on graph structure and hardware characteristics.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class AdaptiveFusionPass : IOptimizationPass</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">AdaptiveFusionPass</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="AiDotNet.JitCompiler.Optimizations.IOptimizationPass.html">IOptimizationPass</a></div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
Adaptive fusion improves upon static fusion by:
- Analyzing graph structure to find optimal fusion opportunities
- Considering hardware constraints (register pressure, cache size)
- Avoiding fusions that would hurt performance
- Dynamically adjusting fusion strategy based on tensor sizes
</p>
<p><b>For Beginners:</b> Adaptive fusion combines operations smarter.
<p>Regular fusion: Always fuse operations when possible
Adaptive fusion: Fuse operations only when it helps performance</p>
<p>Why not always fuse?</p>
<ul>
<li>Fusing too much can increase register pressure (run out of fast memory)</li>
<li>Large fused operations may not fit in cache</li>
<li>Some fusion patterns are slower than separate operations</li>
</ul>
<p>Adaptive fusion considers:</p>
<ul>
<li>Tensor sizes: Large tensors may benefit from separate passes (better cache)</li>
<li>Operation types: Some combinations fuse well, others don't</li>
<li>Hardware: Different CPUs have different sweet spots</li>
</ul>

</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass__ctor_" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.#ctor*"></a>

  <h3 id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass__ctor" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.#ctor">
  AdaptiveFusionPass()
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/AdaptiveFusionPass.cs/#L69"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes with default configuration.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public AdaptiveFusionPass()</code></pre>
  </div>













  <a id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass__ctor_" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.#ctor*"></a>

  <h3 id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass__ctor_AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass_AdaptiveFusionConfig_" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.#ctor(AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.AdaptiveFusionConfig)">
  AdaptiveFusionPass(AdaptiveFusionConfig)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/AdaptiveFusionPass.cs/#L74"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes with custom configuration.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public AdaptiveFusionPass(AdaptiveFusionPass.AdaptiveFusionConfig config)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>config</code> <a class="xref" href="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.html">AdaptiveFusionPass</a>.<a class="xref" href="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.AdaptiveFusionConfig.html">AdaptiveFusionConfig</a></dt>
    <dd></dd>
  </dl>












  <h2 class="section" id="properties">Properties
</h2>


  <a id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass_Name_" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.Name*"></a>

  <h3 id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass_Name" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.Name">
  Name
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/AdaptiveFusionPass.cs/#L37"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the name of this optimization pass.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string Name { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>




  <h4 class="section" id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass_Name_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>The name is used for logging, debugging, and reporting which
optimizations were applied during compilation.</p>
</div>




  <h2 class="section" id="methods">Methods
</h2>


  <a id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass_Optimize_" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.Optimize*"></a>

  <h3 id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass_Optimize_AiDotNet_JitCompiler_IR_IRGraph_" data-uid="AiDotNet.JitCompiler.Optimizations.AdaptiveFusionPass.Optimize(AiDotNet.JitCompiler.IR.IRGraph)">
  Optimize(IRGraph)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/AdaptiveFusionPass.cs/#L80"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Applies this optimization to an IR graph.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IRGraph Optimize(IRGraph graph)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>graph</code> <a class="xref" href="AiDotNet.JitCompiler.IR.IRGraph.html">IRGraph</a></dt>
    <dd><p>The IR graph to optimize.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.JitCompiler.IR.IRGraph.html">IRGraph</a></dt>
    <dd><p>An optimized IR graph.</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_JitCompiler_Optimizations_AdaptiveFusionPass_Optimize_AiDotNet_JitCompiler_IR_IRGraph__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This method returns an optimized graph that is semantically equivalent
to the input (same computation), but may have different structure for
better performance.
</p>
<p>
<b>Important:</b> Implementations may modify operations from the input graph
for efficiency (e.g., remapping InputIds). Callers should not assume the input
graph remains unchanged after this method returns. If you need to preserve the
original graph, make a deep copy before calling this method.
</p>
<p><b>For Beginners:</b> This is where the magic happens!
<p>Your implementation should:</p>
<ol>
<li>Analyze the input graph</li>
<li>Identify optimization opportunities</li>
<li>Transform the graph to be more efficient</li>
<li>Return the optimized graph</li>
</ol>
<p>Important rules:</p>
<ul>
<li>Don't change what the graph computes (correctness!)</li>
<li>The optimized graph should produce identical results</li>
<li>The input graph may be modified as a side effect</li>
</ul>
<p>Example:
Input:  t1 = Add(Const(2), Const(3)); t2 = Mul(t1, x)
Output: t1 = Const(5); t2 = Mul(t1, x)
(We pre-computed 2+3=5 at compile time!)</p>

</div>





</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/JitCompiler/Optimizations/AdaptiveFusionPass.cs/#L34" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
