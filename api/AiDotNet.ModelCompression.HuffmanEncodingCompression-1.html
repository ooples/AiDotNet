<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class HuffmanEncodingCompression&lt;T&gt; | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class HuffmanEncodingCompression&lt;T&gt; | AiDotNet Documentation ">
      
      <meta name="description" content="Implements Huffman encoding compression for model weights using variable-length encoding.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_ModelCompression_HuffmanEncodingCompression_1.md&amp;value=---%0Auid%3A%20AiDotNet.ModelCompression.HuffmanEncodingCompression%601%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1">



  <h1 id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1" class="text-break">
Class HuffmanEncodingCompression&lt;T&gt;  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/ModelCompression/HuffmanEncodingCompression.cs/#L43"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.ModelCompression.html">ModelCompression</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Implements Huffman encoding compression for model weights using variable-length encoding.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class HuffmanEncodingCompression&lt;T&gt; : ModelCompressionBase&lt;T&gt;, IModelCompressionStrategy&lt;T&gt;</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd><p>The numeric type used for calculations (e.g., float, double).</p>
</dd>
  </dl>

  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html">ModelCompressionBase</a>&lt;T&gt;</div>
      <div><span class="xref">HuffmanEncodingCompression&lt;T&gt;</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="AiDotNet.Interfaces.IModelCompressionStrategy-1.html">IModelCompressionStrategy</a>&lt;T&gt;</div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_NumOps">ModelCompressionBase&lt;T&gt;.NumOps</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_CalculateCompressionRatio_System_Int64_System_Int64_">ModelCompressionBase&lt;T&gt;.CalculateCompressionRatio(long, long)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_CompressMatrix_AiDotNet_Tensors_LinearAlgebra_Matrix__0__">ModelCompressionBase&lt;T&gt;.CompressMatrix(Matrix&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_DecompressMatrix_AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Interfaces_ICompressionMetadata__0__">ModelCompressionBase&lt;T&gt;.DecompressMatrix(Matrix&lt;T&gt;, ICompressionMetadata&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_GetCompressedSize_AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Interfaces_ICompressionMetadata__0__">ModelCompressionBase&lt;T&gt;.GetCompressedSize(Matrix&lt;T&gt;, ICompressionMetadata&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_CompressTensor_AiDotNet_Tensors_LinearAlgebra_Tensor__0__">ModelCompressionBase&lt;T&gt;.CompressTensor(Tensor&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_DecompressTensor_AiDotNet_Tensors_LinearAlgebra_Tensor__0__AiDotNet_Interfaces_ICompressionMetadata__0__">ModelCompressionBase&lt;T&gt;.DecompressTensor(Tensor&lt;T&gt;, ICompressionMetadata&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_GetCompressedSize_AiDotNet_Tensors_LinearAlgebra_Tensor__0__AiDotNet_Interfaces_ICompressionMetadata__0__">ModelCompressionBase&lt;T&gt;.GetCompressedSize(Tensor&lt;T&gt;, ICompressionMetadata&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_GetElementSize">ModelCompressionBase&lt;T&gt;.GetElementSize()</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_MatrixToVector_AiDotNet_Tensors_LinearAlgebra_Matrix__0__">ModelCompressionBase&lt;T&gt;.MatrixToVector(Matrix&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_VectorToMatrix_AiDotNet_Tensors_LinearAlgebra_Vector__0__System_Int32_System_Int32_">ModelCompressionBase&lt;T&gt;.VectorToMatrix(Vector&lt;T&gt;, int, int)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_TensorToVector_AiDotNet_Tensors_LinearAlgebra_Tensor__0__">ModelCompressionBase&lt;T&gt;.TensorToVector(Tensor&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.ModelCompression.ModelCompressionBase-1.html#AiDotNet_ModelCompression_ModelCompressionBase_1_VectorToTensor_AiDotNet_Tensors_LinearAlgebra_Vector__0__System_Int32___">ModelCompressionBase&lt;T&gt;.VectorToTensor(Vector&lt;T&gt;, int[])</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
Huffman encoding is a lossless compression technique that assigns shorter codes to more frequent
values and longer codes to less frequent values. This is particularly effective when combined
with weight clustering, where cluster indices have non-uniform frequency distributions.
</p>
<p><b>For Beginners:</b> Huffman encoding is like creating custom abbreviations.
<p>Imagine you're taking notes in a lecture:</p>
<ul>
<li>Words you hear often (like &quot;the&quot;, &quot;and&quot;, &quot;is&quot;) you abbreviate with single letters</li>
<li>Rare words you write out in full</li>
<li>This makes your notes much shorter overall</li>
</ul>
<p>For neural networks:</p>
<ul>
<li>Some weight values appear much more frequently than others</li>
<li>Frequent values get short binary codes (like &quot;01&quot;)</li>
<li>Rare values get longer codes (like &quot;110101&quot;)</li>
<li>Since frequent values appear often, using short codes saves a lot of space</li>
</ul>
<p>The magic is that Huffman encoding is &quot;lossless&quot;:</p>
<ul>
<li>You can perfectly reconstruct the original values</li>
<li>No accuracy is lost (unlike clustering which is lossy)</li>
<li>It's often combined with clustering for even better compression</li>
</ul>
<p>Example:</p>
<ul>
<li>Value appearing 1000 times: code &quot;1&quot; (1 bit each = 1000 bits total)</li>
<li>Value appearing 10 times: code &quot;01001&quot; (5 bits each = 50 bits total)</li>
<li>Total: 1050 bits instead of possibly much more with fixed-length codes</li>
</ul>

</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1__ctor_" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1.#ctor*"></a>

  <h3 id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1__ctor_System_Int32_" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1.#ctor(System.Int32)">
  HuffmanEncodingCompression(int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/ModelCompression/HuffmanEncodingCompression.cs/#L69"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes a new instance of the HuffmanEncodingCompression class.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public HuffmanEncodingCompression(int precision = 6)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>precision</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The number of decimal places to round to before encoding (default: 6).</p>
</dd>
  </dl>








  <h4 class="section" id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1__ctor_System_Int32__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p><b>For Beginners:</b> Precision controls how many decimal places to keep.
<ul>
<li><p>Higher precision = more accurate but less compression</p>
<ul>
<li>precision=8: 0.12345678 (very precise, more unique values, less compression)</li>
</ul>
</li>
<li><p>Lower precision = more compression but slightly less accurate</p>
<ul>
<li>precision=4: 0.1235 (rounded, fewer unique values, better compression)</li>
</ul>
</li>
</ul>
<p>The default of 6 decimal places is usually a good balance.</p>
<p>Why round at all?</p>
<ul>
<li>Without rounding, you might have millions of unique values</li>
<li>Huffman encoding works best when many values are the same</li>
<li>Rounding creates more duplicate values, improving compression</li>
</ul>

</div>




  <h2 class="section" id="methods">Methods
</h2>


  <a id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1_Compress_" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1.Compress*"></a>

  <h3 id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1_Compress_AiDotNet_Tensors_LinearAlgebra_Vector__0__" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1.Compress(AiDotNet.Tensors.LinearAlgebra.Vector{`0})">
  Compress(Vector&lt;T&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/ModelCompression/HuffmanEncodingCompression.cs/#L84"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Compresses weights using Huffman encoding.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override (Vector&lt;T&gt; compressedWeights, ICompressionMetadata&lt;T&gt; metadata) Compress(Vector&lt;T&gt; weights)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>weights</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;</dt>
    <dd><p>The original model weights.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt>(<a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt; <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetuple-aidotnet.tensors.linearalgebra.vector--0-,aidotnet.interfaces.icompressionmetadata--0--.compressedweights">compressedWeights</a>, <a class="xref" href="AiDotNet.Interfaces.ICompressionMetadata-1.html">ICompressionMetadata</a>&lt;T&gt; <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.valuetuple-aidotnet.tensors.linearalgebra.vector--0-,aidotnet.interfaces.icompressionmetadata--0--.metadata">metadata</a>)</dt>
    <dd><p>Compressed weights and metadata containing the Huffman tree and encoding table.</p>
</dd>
  </dl>











  <a id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1_Decompress_" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1.Decompress*"></a>

  <h3 id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1_Decompress_AiDotNet_Tensors_LinearAlgebra_Vector__0__AiDotNet_Interfaces_ICompressionMetadata__0__" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1.Decompress(AiDotNet.Tensors.LinearAlgebra.Vector{`0},AiDotNet.Interfaces.ICompressionMetadata{`0})">
  Decompress(Vector&lt;T&gt;, ICompressionMetadata&lt;T&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/ModelCompression/HuffmanEncodingCompression.cs/#L147"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Decompresses weights by decoding the Huffman-encoded bit stream.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override Vector&lt;T&gt; Decompress(Vector&lt;T&gt; compressedWeights, ICompressionMetadata&lt;T&gt; metadata)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>compressedWeights</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;</dt>
    <dd><p>The compressed weights (encoded as bytes).</p>
</dd>
    <dt><code>metadata</code> <a class="xref" href="AiDotNet.Interfaces.ICompressionMetadata-1.html">ICompressionMetadata</a>&lt;T&gt;</dt>
    <dd><p>The metadata containing the Huffman tree.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;</dt>
    <dd><p>The decompressed weights.</p>
</dd>
  </dl>











  <a id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1_GetCompressedSize_" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1.GetCompressedSize*"></a>

  <h3 id="AiDotNet_ModelCompression_HuffmanEncodingCompression_1_GetCompressedSize_AiDotNet_Tensors_LinearAlgebra_Vector__0__AiDotNet_Interfaces_ICompressionMetadata__0__" data-uid="AiDotNet.ModelCompression.HuffmanEncodingCompression`1.GetCompressedSize(AiDotNet.Tensors.LinearAlgebra.Vector{`0},AiDotNet.Interfaces.ICompressionMetadata{`0})">
  GetCompressedSize(Vector&lt;T&gt;, ICompressionMetadata&lt;T&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/ModelCompression/HuffmanEncodingCompression.cs/#L187"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the compressed size including the Huffman tree and encoded bits.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override long GetCompressedSize(Vector&lt;T&gt; compressedWeights, ICompressionMetadata&lt;T&gt; metadata)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>compressedWeights</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;</dt>
    <dd></dd>
    <dt><code>metadata</code> <a class="xref" href="AiDotNet.Interfaces.ICompressionMetadata-1.html">ICompressionMetadata</a>&lt;T&gt;</dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a></dt>
    <dd></dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/ModelCompression/HuffmanEncodingCompression.cs/#L43" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
