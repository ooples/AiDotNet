<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class NeuronSelectivityDistillationStrategy&lt;T&gt; | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class NeuronSelectivityDistillationStrategy&lt;T&gt; | AiDotNet Documentation ">
      
      <meta name="description" content="Neuron selectivity distillation that transfers the activation patterns and selectivity of individual neurons.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1.md&amp;value=---%0Auid%3A%20AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy%601%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1">



  <h1 id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1" class="text-break">
Class NeuronSelectivityDistillationStrategy&lt;T&gt;  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/KnowledgeDistillation/Strategies/NeuronSelectivityDistillationStrategy.cs/#L52"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.KnowledgeDistillation.html">KnowledgeDistillation</a>.<a class="xref" href="AiDotNet.KnowledgeDistillation.Strategies.html">Strategies</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Neuron selectivity distillation that transfers the activation patterns and selectivity of individual neurons.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class NeuronSelectivityDistillationStrategy&lt;T&gt; : DistillationStrategyBase&lt;T&gt;, IDistillationStrategy&lt;T&gt;, IIntermediateActivationStrategy&lt;T&gt;</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd><p>The numeric type for calculations (e.g., double, float).</p>
</dd>
  </dl>

  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><a class="xref" href="AiDotNet.KnowledgeDistillation.DistillationStrategyBase-1.html">DistillationStrategyBase</a>&lt;T&gt;</div>
      <div><span class="xref">NeuronSelectivityDistillationStrategy&lt;T&gt;</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="AiDotNet.Interfaces.IDistillationStrategy-1.html">IDistillationStrategy</a>&lt;T&gt;</div>
      <div><a class="xref" href="AiDotNet.Interfaces.IIntermediateActivationStrategy-1.html">IIntermediateActivationStrategy</a>&lt;T&gt;</div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="AiDotNet.KnowledgeDistillation.DistillationStrategyBase-1.html#AiDotNet_KnowledgeDistillation_DistillationStrategyBase_1_NumOps">DistillationStrategyBase&lt;T&gt;.NumOps</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.KnowledgeDistillation.DistillationStrategyBase-1.html#AiDotNet_KnowledgeDistillation_DistillationStrategyBase_1_Temperature">DistillationStrategyBase&lt;T&gt;.Temperature</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.KnowledgeDistillation.DistillationStrategyBase-1.html#AiDotNet_KnowledgeDistillation_DistillationStrategyBase_1_Alpha">DistillationStrategyBase&lt;T&gt;.Alpha</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.KnowledgeDistillation.DistillationStrategyBase-1.html#AiDotNet_KnowledgeDistillation_DistillationStrategyBase_1_ValidateOutputDimensions_AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0__">DistillationStrategyBase&lt;T&gt;.ValidateOutputDimensions(Matrix&lt;T&gt;, Matrix&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.KnowledgeDistillation.DistillationStrategyBase-1.html#AiDotNet_KnowledgeDistillation_DistillationStrategyBase_1_ValidateLabelDimensions_AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0__">DistillationStrategyBase&lt;T&gt;.ValidateLabelDimensions(Matrix&lt;T&gt;, Matrix&lt;T&gt;)</a>
    </div>
    <div>
      <a class="xref" href="AiDotNet.KnowledgeDistillation.DistillationStrategyBase-1.html#AiDotNet_KnowledgeDistillation_DistillationStrategyBase_1_Epsilon">DistillationStrategyBase&lt;T&gt;.Epsilon</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p><b>For Production Use:</b> This strategy focuses on matching how individual neurons respond to inputs.
Some neurons are highly selective (activate strongly for specific patterns), while others are more general.
Transferring this selectivity helps the student learn meaningful feature representations.</p>
<p><b>Key Concept:</b> Neuron selectivity measures how discriminative each neuron is. A highly selective
neuron activates strongly for certain inputs and weakly for others. The distribution of selectivity across
neurons is important for model performance.</p>
<p><b>Implementation:</b> We measure selectivity using:
1. Activation variance (how much neuron output varies across samples)
2. Sparsity (what percentage of time the neuron is active)
3. Peak-to-average ratio (how peaked the activation distribution is)</p>
<p><b>Usage Pattern:</b> This strategy implements both standard output-based distillation and
intermediate activation-based selectivity matching. Use as follows:</p>
<p><b>Standard Usage (via IDistillationStrategy):</b>
<pre><code class="lang-csharp">T outputLoss = strategy.ComputeLoss(studentOutput, teacherOutput, labels);
Matrix&lt;T&gt; outputGrad = strategy.ComputeGradient(studentOutput, teacherOutput, labels);</code></pre>
<p><b>With Intermediate Activations (via IIntermediateActivationStrategy):</b>
<pre><code class="lang-csharp">// Collect activations during forward pass
var studentActivations = new IntermediateActivations&lt;T&gt;();
studentActivations.Add("layer3", studentLayer3Output);

var teacherActivations = new IntermediateActivations&lt;T&gt;();
teacherActivations.Add("layer3", teacherLayer3Output);

// Compute combined loss
T outputLoss = strategy.ComputeLoss(studentOutput, teacherOutput, labels);
T selectivityLoss = strategy.ComputeIntermediateLoss(studentActivations, teacherActivations);
T totalLoss = outputLoss + selectivityLoss; // selectivityLoss is already weighted</code></pre>
<p>The selectivityWeight and metric parameters control the intermediate activation loss component.</p>
</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1__ctor_" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.#ctor*"></a>

  <h3 id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1__ctor_System_String_System_Double_AiDotNet_KnowledgeDistillation_Strategies_SelectivityMetric_System_Double_System_Double_" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.#ctor(System.String,System.Double,AiDotNet.KnowledgeDistillation.Strategies.SelectivityMetric,System.Double,System.Double)">
  NeuronSelectivityDistillationStrategy(string, double, SelectivityMetric, double, double)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/KnowledgeDistillation/Strategies/NeuronSelectivityDistillationStrategy.cs/#L58"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public NeuronSelectivityDistillationStrategy(string targetLayerName = &quot;default&quot;, double selectivityWeight = 0.5, SelectivityMetric metric = SelectivityMetric.Variance, double temperature = 3, double alpha = 0.3)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>targetLayerName</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
    <dt><code>selectivityWeight</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a></dt>
    <dd></dd>
    <dt><code>metric</code> <a class="xref" href="AiDotNet.KnowledgeDistillation.Strategies.SelectivityMetric.html">SelectivityMetric</a></dt>
    <dd></dd>
    <dt><code>temperature</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a></dt>
    <dd></dd>
    <dt><code>alpha</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a></dt>
    <dd></dd>
  </dl>












  <h2 class="section" id="methods">Methods
</h2>


  <a id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeGradient_" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeGradient*"></a>

  <h3 id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeGradient_AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0__" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeGradient(AiDotNet.Tensors.LinearAlgebra.Matrix{`0},AiDotNet.Tensors.LinearAlgebra.Matrix{`0},AiDotNet.Tensors.LinearAlgebra.Matrix{`0})">
  ComputeGradient(Matrix&lt;T&gt;, Matrix&lt;T&gt;, Matrix&lt;T&gt;?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/KnowledgeDistillation/Strategies/NeuronSelectivityDistillationStrategy.cs/#L135"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Computes the gradient of the base distillation loss on final outputs.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override Matrix&lt;T&gt; ComputeGradient(Matrix&lt;T&gt; studentBatchOutput, Matrix&lt;T&gt; teacherBatchOutput, Matrix&lt;T&gt;? trueLabelsBatch = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>studentBatchOutput</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Matrix-1.html">Matrix</a>&lt;T&gt;</dt>
    <dd></dd>
    <dt><code>teacherBatchOutput</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Matrix-1.html">Matrix</a>&lt;T&gt;</dt>
    <dd></dd>
    <dt><code>trueLabelsBatch</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Matrix-1.html">Matrix</a>&lt;T&gt;</dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Matrix-1.html">Matrix</a>&lt;T&gt;</dt>
    <dd></dd>
  </dl>







  <h4 class="section" id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeGradient_AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method implements standard distillation gradient (soft + hard) on final outputs.
It does NOT include the selectivity gradient, which requires intermediate activations.
Selectivity gradients must be computed separately and backpropagated through the network.
See class remarks for usage pattern.</p>
</div>




  <a id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeIntermediateGradient_" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeIntermediateGradient*"></a>

  <h3 id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeIntermediateGradient_AiDotNet_KnowledgeDistillation_IntermediateActivations__0__AiDotNet_KnowledgeDistillation_IntermediateActivations__0__" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeIntermediateGradient(AiDotNet.KnowledgeDistillation.IntermediateActivations{`0},AiDotNet.KnowledgeDistillation.IntermediateActivations{`0})">
  ComputeIntermediateGradient(IntermediateActivations&lt;T&gt;, IntermediateActivations&lt;T&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/KnowledgeDistillation/Strategies/NeuronSelectivityDistillationStrategy.cs/#L369"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Computes gradients of intermediate activation loss with respect to student activations.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IntermediateActivations&lt;T&gt; ComputeIntermediateGradient(IntermediateActivations&lt;T&gt; studentIntermediateActivations, IntermediateActivations&lt;T&gt; teacherIntermediateActivations)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>studentIntermediateActivations</code> <a class="xref" href="AiDotNet.KnowledgeDistillation.IntermediateActivations-1.html">IntermediateActivations</a>&lt;T&gt;</dt>
    <dd><p>Student's intermediate layer activations.</p>
</dd>
    <dt><code>teacherIntermediateActivations</code> <a class="xref" href="AiDotNet.KnowledgeDistillation.IntermediateActivations-1.html">IntermediateActivations</a>&lt;T&gt;</dt>
    <dd><p>Teacher's intermediate layer activations.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="AiDotNet.KnowledgeDistillation.IntermediateActivations-1.html">IntermediateActivations</a>&lt;T&gt;</dt>
    <dd><p>Gradients for the target layer (already weighted by selectivityWeight).</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeIntermediateGradient_AiDotNet_KnowledgeDistillation_IntermediateActivations__0__AiDotNet_KnowledgeDistillation_IntermediateActivations__0___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>Computes analytical gradients for selectivity loss based on the chosen metric.
For Variance metric, uses ∂var/∂a = (2/B) * (a - mean).
For Sparsity and PeakToAverage, uses numerical approximation due to non-differentiable operations.</p>
</div>




  <a id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeIntermediateLoss_" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeIntermediateLoss*"></a>

  <h3 id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeIntermediateLoss_AiDotNet_KnowledgeDistillation_IntermediateActivations__0__AiDotNet_KnowledgeDistillation_IntermediateActivations__0__" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeIntermediateLoss(AiDotNet.KnowledgeDistillation.IntermediateActivations{`0},AiDotNet.KnowledgeDistillation.IntermediateActivations{`0})">
  ComputeIntermediateLoss(IntermediateActivations&lt;T&gt;, IntermediateActivations&lt;T&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/KnowledgeDistillation/Strategies/NeuronSelectivityDistillationStrategy.cs/#L314"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Computes intermediate activation loss by matching neuron selectivity between teacher and student.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public T ComputeIntermediateLoss(IntermediateActivations&lt;T&gt; studentIntermediateActivations, IntermediateActivations&lt;T&gt; teacherIntermediateActivations)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>studentIntermediateActivations</code> <a class="xref" href="AiDotNet.KnowledgeDistillation.IntermediateActivations-1.html">IntermediateActivations</a>&lt;T&gt;</dt>
    <dd><p>Student's intermediate layer activations.</p>
</dd>
    <dt><code>teacherIntermediateActivations</code> <a class="xref" href="AiDotNet.KnowledgeDistillation.IntermediateActivations-1.html">IntermediateActivations</a>&lt;T&gt;</dt>
    <dd><p>Teacher's intermediate layer activations.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">T</span></dt>
    <dd><p>The selectivity matching loss (already weighted by selectivityWeight).</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeIntermediateLoss_AiDotNet_KnowledgeDistillation_IntermediateActivations__0__AiDotNet_KnowledgeDistillation_IntermediateActivations__0___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This implements the IIntermediateActivationStrategy interface to properly integrate
selectivity matching into the training loop. The loss is computed from the activations of
the layer specified by targetLayerName in the constructor.</p>
<p>If the target layer is not found in the activation dictionaries, returns zero loss.</p>
</div>




  <a id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeLoss_" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeLoss*"></a>

  <h3 id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeLoss_AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0__" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeLoss(AiDotNet.Tensors.LinearAlgebra.Matrix{`0},AiDotNet.Tensors.LinearAlgebra.Matrix{`0},AiDotNet.Tensors.LinearAlgebra.Matrix{`0})">
  ComputeLoss(Matrix&lt;T&gt;, Matrix&lt;T&gt;, Matrix&lt;T&gt;?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/KnowledgeDistillation/Strategies/NeuronSelectivityDistillationStrategy.cs/#L84"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Computes the base distillation loss on final outputs.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override T ComputeLoss(Matrix&lt;T&gt; studentBatchOutput, Matrix&lt;T&gt; teacherBatchOutput, Matrix&lt;T&gt;? trueLabelsBatch = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>studentBatchOutput</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Matrix-1.html">Matrix</a>&lt;T&gt;</dt>
    <dd></dd>
    <dt><code>teacherBatchOutput</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Matrix-1.html">Matrix</a>&lt;T&gt;</dt>
    <dd></dd>
    <dt><code>trueLabelsBatch</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Matrix-1.html">Matrix</a>&lt;T&gt;</dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">T</span></dt>
    <dd></dd>
  </dl>







  <h4 class="section" id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeLoss_AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0__AiDotNet_Tensors_LinearAlgebra_Matrix__0___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method implements standard distillation loss (soft + hard loss) on final outputs.
It does NOT include the selectivity component, which requires intermediate activations.
Use ComputeSelectivityLoss separately and combine the losses manually. See class remarks for usage pattern.</p>
</div>




  <a id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeSelectivityLoss_" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeSelectivityLoss*"></a>

  <h3 id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeSelectivityLoss_AiDotNet_Tensors_LinearAlgebra_Vector__0____AiDotNet_Tensors_LinearAlgebra_Vector__0____" data-uid="AiDotNet.KnowledgeDistillation.Strategies.NeuronSelectivityDistillationStrategy`1.ComputeSelectivityLoss(AiDotNet.Tensors.LinearAlgebra.Vector{`0}[],AiDotNet.Tensors.LinearAlgebra.Vector{`0}[])">
  ComputeSelectivityLoss(Vector&lt;T&gt;[], Vector&lt;T&gt;[])
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/KnowledgeDistillation/Strategies/NeuronSelectivityDistillationStrategy.cs/#L206"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Computes neuron selectivity loss by comparing activation patterns across a batch.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public T ComputeSelectivityLoss(Vector&lt;T&gt;[] studentActivations, Vector&lt;T&gt;[] teacherActivations)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>studentActivations</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;[]</dt>
    <dd><p>Student neuron activations for a batch [batchSize x numNeurons].</p>
</dd>
    <dt><code>teacherActivations</code> <a class="xref" href="AiDotNet.Tensors.LinearAlgebra.Vector-1.html">Vector</a>&lt;T&gt;[]</dt>
    <dd><p>Teacher neuron activations for a batch [batchSize x numNeurons].</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">T</span></dt>
    <dd><p>Selectivity matching loss.</p>
</dd>
  </dl>







  <h4 class="section" id="AiDotNet_KnowledgeDistillation_Strategies_NeuronSelectivityDistillationStrategy_1_ComputeSelectivityLoss_AiDotNet_Tensors_LinearAlgebra_Vector__0____AiDotNet_Tensors_LinearAlgebra_Vector__0_____remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This should be called with intermediate layer activations, not final outputs.
Collect activations for an entire batch, then call this method.</p>
</div>





</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/KnowledgeDistillation/Strategies/NeuronSelectivityDistillationStrategy.cs/#L52" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
