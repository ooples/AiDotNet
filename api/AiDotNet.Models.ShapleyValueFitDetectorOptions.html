<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class ShapleyValueFitDetectorOptions | AiDotNet Documentation </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class ShapleyValueFitDetectorOptions | AiDotNet Documentation ">
      
      <meta name="description" content="Configuration options for the Shapley Value Fit Detector, which evaluates model fit quality by analyzing feature importance using Shapley values.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ooples/AiDotNet/new/master/apiSpec/new?filename=AiDotNet_Models_ShapleyValueFitDetectorOptions.md&amp;value=---%0Auid%3A%20AiDotNet.Models.ShapleyValueFitDetectorOptions%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="AiDotNet">
            AiDotNet
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions">



  <h1 id="AiDotNet_Models_ShapleyValueFitDetectorOptions" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions" class="text-break">
Class ShapleyValueFitDetectorOptions  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Models/Options/ShapleyValueFitDetectorOptions.cs/#L39"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="AiDotNet.html">AiDotNet</a>.<a class="xref" href="AiDotNet.Models.html">Models</a></dd></dl>
  <dl><dt>Assembly</dt><dd>AiDotNet.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Configuration options for the Shapley Value Fit Detector, which evaluates model fit quality
by analyzing feature importance using Shapley values.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class ShapleyValueFitDetectorOptions</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">ShapleyValueFitDetectorOptions</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="AiDotNet_Models_ShapleyValueFitDetectorOptions_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
Shapley values, derived from cooperative game theory, provide a method for fairly distributing the 
"contribution" of each feature to the prediction made by a machine learning model. The Shapley Value 
Fit Detector uses these values to assess model fit by analyzing the distribution of feature importance. 
It identifies which features contribute significantly to the model's predictions and uses this information 
to detect potential overfitting (when the model relies too heavily on too few features) or underfitting 
(when the model distributes importance too evenly across many features). This class provides configuration 
options for the thresholds used in this analysis, including the cumulative importance threshold for 
identifying significant features, the number of Monte Carlo samples for calculating Shapley values, 
and thresholds for detecting overfitting and underfitting based on the ratio of important features.
</p>
<p><b>For Beginners:</b> This class helps evaluate if your model is using features appropriately.
<p>Shapley values measure how much each feature contributes to your model's predictions:</p>
<ul>
<li>They come from game theory and provide a fair way to distribute &quot;credit&quot; among features</li>
<li>They show which features are doing the heavy lifting in your model</li>
<li>They can reveal if your model is using features in a balanced way</li>
</ul>
<p>The detector uses these values to identify potential problems:</p>
<ul>
<li>Overfitting: When your model relies too heavily on just a few features (like memorizing the data)</li>
<li>Underfitting: When your model spreads importance too evenly across many features (not finding strong patterns)</li>
</ul>
<p>For example, in a house price prediction model:</p>
<ul>
<li>Overfitting might show up as the model relying almost entirely on exact address</li>
<li>Underfitting might show up as the model giving similar importance to crucial factors (like location)
and irrelevant ones (like the day of week the house was listed)</li>
</ul>
<p>This class lets you configure how the detector evaluates feature importance distribution
to identify these potential issues.</p>

</div>


  <h2 class="section" id="properties">Properties
</h2>


  <a id="AiDotNet_Models_ShapleyValueFitDetectorOptions_ImportanceThreshold_" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions.ImportanceThreshold*"></a>

  <h3 id="AiDotNet_Models_ShapleyValueFitDetectorOptions_ImportanceThreshold" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions.ImportanceThreshold">
  ImportanceThreshold
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Models/Options/ShapleyValueFitDetectorOptions.cs/#L78"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets the threshold for cumulative importance to determine significant features.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public double ImportanceThreshold { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a></dt>
    <dd><p>A double value between 0 and 1, defaulting to 0.8 (80%).</p>
</dd>
  </dl>




  <h4 class="section" id="AiDotNet_Models_ShapleyValueFitDetectorOptions_ImportanceThreshold_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This property defines the cumulative importance threshold used to identify the subset of features that 
are considered significant. Features are sorted by their Shapley values (importance) in descending order, 
and features are added to the "significant" set until their cumulative importance exceeds this threshold. 
For example, with the default value of 0.8, features are added until they collectively account for 80% 
of the total importance. This approach focuses the analysis on the features that have the most impact 
on the model's predictions. A higher threshold will include more features in the significant set, while 
a lower threshold will be more selective, including only the most important features.
</p>
<p><b>For Beginners:</b> This setting determines which features are considered "important" based on their combined contribution.
<p>The detector works by:</p>
<ul>
<li>Ranking all features from most to least important based on their Shapley values</li>
<li>Adding up importance values starting from the top until reaching this threshold</li>
<li>Considering only those features as &quot;significant&quot; for further analysis</li>
</ul>
<p>The default value of 0.8 means:</p>
<ul>
<li>Features are added to the &quot;important&quot; list until they collectively account for 80% of total importance</li>
<li>This typically identifies the vital few features that drive most of the model's predictions</li>
</ul>
<p>Think of it like the Pareto principle (80/20 rule):</p>
<ul>
<li>Often a small subset of features contributes most of the predictive power</li>
<li>This threshold helps identify that critical subset</li>
</ul>
<p>When to adjust this value:</p>
<ul>
<li>Increase it (e.g., to 0.9) to include more features in your &quot;important&quot; set</li>
<li>Decrease it (e.g., to 0.7) to focus only on the most critical features</li>
</ul>
<p>For example, in a customer churn model with 50 features, this threshold might identify that
just 8 features account for 80% of the model's predictive power.</p>

</div>




  <a id="AiDotNet_Models_ShapleyValueFitDetectorOptions_MonteCarloSamples_" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions.MonteCarloSamples*"></a>

  <h3 id="AiDotNet_Models_ShapleyValueFitDetectorOptions_MonteCarloSamples" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions.MonteCarloSamples">
  MonteCarloSamples
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Models/Options/ShapleyValueFitDetectorOptions.cs/#L118"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets the number of Monte Carlo samples to use when calculating Shapley values.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int MonteCarloSamples { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>A positive integer, defaulting to 1000.</p>
</dd>
  </dl>




  <h4 class="section" id="AiDotNet_Models_ShapleyValueFitDetectorOptions_MonteCarloSamples_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This property specifies the number of Monte Carlo samples used to approximate Shapley values. Exact 
computation of Shapley values is computationally expensive, with complexity growing exponentially with 
the number of features. Monte Carlo sampling provides an efficient approximation by randomly sampling 
feature coalitions. A larger number of samples provides more accurate approximations but requires more 
computational resources. The default value of 1000 is generally sufficient for most applications to 
provide stable estimates while maintaining reasonable computational efficiency. For models with many 
features or when high precision is required, a larger number of samples might be appropriate, while for 
exploratory analysis or when computational resources are limited, a smaller number might be used.
</p>
<p><b>For Beginners:</b> This setting controls how accurately the Shapley values are calculated.
<p>Calculating exact Shapley values is extremely computationally intensive:</p>
<ul>
<li>The exact calculation would require testing all possible combinations of features</li>
<li>This becomes impossible with more than a few features</li>
<li>Monte Carlo sampling provides an efficient approximation</li>
</ul>
<p>The default value of 1000 means:</p>
<ul>
<li>The algorithm will take 1000 random samples of feature combinations</li>
<li>It uses these samples to estimate each feature's contribution</li>
<li>More samples give more accurate estimates but take longer to compute</li>
</ul>
<p>When to adjust this value:</p>
<ul>
<li>Increase it (e.g., to 2000 or 5000) when you need very precise importance values
and have computational resources to spare</li>
<li>Decrease it (e.g., to 500 or 200) when you need faster results and can accept
slightly less precise estimates</li>
</ul>
<p>For most applications, 1000 samples provides a good balance between accuracy and
computational efficiency. This is similar to how polling works - more samples give
more accurate results, but with diminishing returns.</p>

</div>




  <a id="AiDotNet_Models_ShapleyValueFitDetectorOptions_OverfitThreshold_" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions.OverfitThreshold*"></a>

  <h3 id="AiDotNet_Models_ShapleyValueFitDetectorOptions_OverfitThreshold" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions.OverfitThreshold">
  OverfitThreshold
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Models/Options/ShapleyValueFitDetectorOptions.cs/#L161"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets the threshold for the ratio of important features to total features,
below which the model is considered to be overfitting.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public double OverfitThreshold { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a></dt>
    <dd><p>A double value between 0 and 1, defaulting to 0.2 (20%).</p>
</dd>
  </dl>




  <h4 class="section" id="AiDotNet_Models_ShapleyValueFitDetectorOptions_OverfitThreshold_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This property defines the threshold used to detect overfitting based on the ratio of significant features 
to total features. If this ratio falls below the threshold, the model is considered to be overfitting, 
indicating that it is relying too heavily on too few features. Overfitting often occurs when a model 
learns the training data too well, including its noise and outliers, resulting in poor generalization to 
new data. The default value of 0.2 means that if less than 20% of the features account for the cumulative 
importance specified by ImportanceThreshold, the model is flagged as potentially overfitting. This threshold 
may need adjustment based on the specific domain, the total number of features, and the expected distribution 
of feature importance for well-fitted models in the particular application.
</p>
<p><b>For Beginners:</b> This setting helps detect if your model is relying too heavily on too few features.
<p>Overfitting often manifests as a model that:</p>
<ul>
<li>Puts too much importance on a small subset of features</li>
<li>Essentially &quot;memorizes&quot; patterns in those few features</li>
<li>Fails to generalize well to new data</li>
</ul>
<p>The OverfitThreshold value (default 0.2) means:</p>
<ul>
<li>If less than 20% of your features account for the important portion of predictions
(as defined by ImportanceThreshold), the model may be overfitting</li>
<li>This suggests the model is ignoring potentially useful information in other features</li>
</ul>
<p>For example, if you have 100 features and only 10 of them (10%) account for 80% of the
model's predictions, this would fall below the default threshold of 20% and trigger
an overfitting warning.</p>
<p>When to adjust this value:</p>
<ul>
<li>Decrease it when you expect a very small number of features to legitimately dominate
(like in some physics or chemistry models where a few variables truly determine outcomes)</li>
<li>Increase it when you expect importance to be more evenly distributed across features</li>
</ul>
<p>This helps identify models that might perform well on training data but fail when
deployed to real-world scenarios.</p>

</div>




  <a id="AiDotNet_Models_ShapleyValueFitDetectorOptions_UnderfitThreshold_" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions.UnderfitThreshold*"></a>

  <h3 id="AiDotNet_Models_ShapleyValueFitDetectorOptions_UnderfitThreshold" data-uid="AiDotNet.Models.ShapleyValueFitDetectorOptions.UnderfitThreshold">
  UnderfitThreshold
  <a class="header-action link-secondary" title="View source" href="https://github.com/ooples/AiDotNet/blob/master/src/Models/Options/ShapleyValueFitDetectorOptions.cs/#L204"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets or sets the threshold for the ratio of important features to total features,
above which the model is considered to be underfitting.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public double UnderfitThreshold { get; set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a></dt>
    <dd><p>A double value between 0 and 1, defaulting to 0.8 (80%).</p>
</dd>
  </dl>




  <h4 class="section" id="AiDotNet_Models_ShapleyValueFitDetectorOptions_UnderfitThreshold_remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This property defines the threshold used to detect underfitting based on the ratio of significant features 
to total features. If this ratio exceeds the threshold, the model is considered to be underfitting, 
indicating that it is distributing importance too evenly across many features without focusing sufficiently 
on the most predictive ones. Underfitting often occurs when a model is too simple to capture the underlying 
patterns in the data. The default value of 0.8 means that if more than 80% of the features are needed to 
account for the cumulative importance specified by ImportanceThreshold, the model is flagged as potentially 
underfitting. This threshold may need adjustment based on the specific domain, the total number of features, 
and the expected distribution of feature importance for well-fitted models in the particular application.
</p>
<p><b>For Beginners:</b> This setting helps detect if your model is spreading importance too evenly across too many features.
<p>Underfitting often manifests as a model that:</p>
<ul>
<li>Distributes importance too evenly across many or all features</li>
<li>Fails to identify which features are truly predictive</li>
<li>Is too simple to capture important patterns in the data</li>
</ul>
<p>The UnderfitThreshold value (default 0.8) means:</p>
<ul>
<li>If more than 80% of your features are needed to account for the important portion of predictions
(as defined by ImportanceThreshold), the model may be underfitting</li>
<li>This suggests the model isn't effectively distinguishing between important and unimportant features</li>
</ul>
<p>For example, if you have 100 features and need 85 of them (85%) to account for 80% of the
model's predictions, this would exceed the default threshold of 80% and trigger
an underfitting warning.</p>
<p>When to adjust this value:</p>
<ul>
<li>Increase it when you expect most features to legitimately contribute similarly
(like in some complex systems where many variables truly matter equally)</li>
<li>Decrease it when you expect a clearer distinction between important and unimportant features</li>
</ul>
<p>This helps identify models that might be too simplistic and miss important patterns
in your data.</p>

</div>





</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ooples/AiDotNet/blob/master/src/Models/Options/ShapleyValueFitDetectorOptions.cs/#L39" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          AiDotNet - Enterprise AI/ML Library for .NET
        </div>
      </div>
    </footer>
  </body>
</html>
