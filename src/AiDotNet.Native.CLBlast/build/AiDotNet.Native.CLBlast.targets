<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!-- Copy CLBlast native library to output directory based on runtime -->
  <!-- Use simpler Windows detection for reliability -->
  <ItemGroup Condition="'$(OS)' == 'Windows_NT'">
    <Content Include="$(MSBuildThisFileDirectory)..\runtimes\win-x64\native\clblast.dll">
      <Link>clblast.dll</Link>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <Visible>false</Visible>
    </Content>
  </ItemGroup>

  <!-- Future: Linux support -->
  <!--
  <ItemGroup Condition="'$(RuntimeIdentifier)' == 'linux-x64' Or ('$(RuntimeIdentifier)' == '' And '$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Linux)))' == 'true')">
    <None Include="$(MSBuildThisFileDirectory)..\runtimes\linux-x64\native\libclblast.so">
      <Link>libclblast.so</Link>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>
  -->

  <!-- Future: macOS support -->
  <!--
  <ItemGroup Condition="'$(RuntimeIdentifier)' == 'osx-x64' Or '$(RuntimeIdentifier)' == 'osx-arm64' Or ('$(RuntimeIdentifier)' == '' And '$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::OSX)))' == 'true')">
    <None Include="$(MSBuildThisFileDirectory)..\runtimes\osx-x64\native\libclblast.dylib">
      <Link>libclblast.dylib</Link>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="$(MSBuildThisFileDirectory)..\runtimes\osx-arm64\native\libclblast.dylib">
      <Link>libclblast.dylib</Link>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>
  -->

</Project>
